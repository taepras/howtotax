{"version":3,"sources":["utils/TaxCalculation.js","theme.js","components/ScaleReference.jsx","data/TaxBrackets.js","components/MoneyBlock.jsx","components/TaxBracketDisplay.jsx","components/D3Component.jsx","components/StoryIndicator.jsx","components/ScrollBox.jsx","components/Slider.jsx","components/ScrollInstruction.jsx","components/Button.jsx","components/Step.jsx","pages/CoverPage.jsx","pages/EndingPage.jsx","components/PageNavigator.jsx","components/Pill.jsx","styles/globalStyles.js","App.jsx","reportWebVitals.js","index.jsx"],"names":["useNetIncome","income","expense","allowance","useMemo","Math","max","theme","colors","bg","text","textSecondary","textMuted","incomeText","expenseText","allowanceText","tax","taxText","white","ScaleReference","scale","barWidth","x","y","maxSize","aspectRatio","textRef","useRef","squareRef","patternRef","useState","textWidth","setTextWidth","rectSide","ref","side","sqrt","nextSide","area","height","width","sizeOf1000","bankNoteArea","h","toLocaleString","useEffect","current","d3","transition","duration","attr","pattern","select","getBBox","transform","id","href","process","fill","stroke","fillOpacity","alignmentBaseline","textAnchor","taxBrackets","minNetIncome","maxNetIncome","taxRate","MoneyBlock","amount","offset","label","isBlink","outlined","enableTransition","fade","transitionTime","transitionDuration","moneyBlockRef","fadeOp","useLayoutEffect","g","style","areaTotal","console","log","strokeWidth","className","data-amount","data-offset","strokeDasharray","fontSize","paintOrder","strokeLinejoin","TaxBracketDisplay","scaleIncome","scaleTaxRate","showTax","blinkTax","netIncome","active","isPullTax","setPullTax","taxBracketRef","taxMaskRef","generateTaxBracketsPathD","useCallback","pathD","map","d","join","length","bracketLineGroups","selectAll","data","bracketLineGroupsEnter","enter","append","classed","merge","round","i","clipPath","onClick","SvgContainer","styled","div","CartesianSvg","svg","D3Component","incomeGroups","isGroupIncome","showBreakdown","padding","left","right","top","bottom","showBrackets","isActivateTax","isFocusIncome","useDimensions","onResize","observe","unobserve","w","entr","entry","d3Container","cleanedExpense","cleanedAllowance","min","domain","range","axisIncome","tickFormat","axisTaxRate","tickSize","tickPadding","call","sum","reduce","a","b","x1","y1","x2","y2","stopColor","stopOpacity","ig","slice","strokeOpacity","StoryIndicatorContainer","StoryIndicatorItem","props","StoryIndicator","currentStep","totalSteps","steps","FadeTop","transparentize","FadeBottom","StyledScrollBox","ScrollBox","children","onScroll","scrollBoxRef","showTopFade","setShowTopFade","showBottomFade","setShowBottomFade","handleScroll","e","scrollTop","offsetHeight","scrollHeight","addEventListener","removeEventListener","StyledSlider","ReactSlider","StyledThumb","color","darken","StyledTrack","index","Tooltip","visible","Slider","onBeforeChange","onAfterChange","showTooltip","setShowTooltip","renderTrack","trackProps","state","renderThumb","thumbProps","valueNow","scrollPreview","keyframes","ScrollInstruction","css","Button","button","secondary","disabled","Step","status","CoverPage","currentNarrativeStep","setCurrentNarrativeStep","sign","gap","alignItems","justifyContent","backgroundColor","zIndex","paddingTop","marginTop","textAlign","backgroundImage","backgroundSize","backgroundPosition","position","borderRadius","display","flexDirection","marginBottom","fontWeight","lineHeight","target","rel","EndingPage","narrativeStepsCount","data-href","data-layout","data-size","data-url","data-via","data-dnt","data-show-count","data-lang","data-type","data-ver","data-color","data-count","border","textDecoration","window","location","PageNavigator","setCurrentStep","stepCount","flexGrow","flexBasis","Pill","span","bold","lighten","GlobalStyle","createGlobalStyle","ChartContainer","SideContainer","ContentContainer","PageContainer","ControlsContainer","ControlsGrid","NetIncomeEquation","highlight","App","salary","setSalary","incomeFreelance","setIncomeFreelance","incomeMerchant","setIncomeMerchant","enableIncome","setEnableIncome","enableIncomeExtra","setEnableIncomeExtra","salaryDisplay","incomeFreelanceDisplay","incomeMerchantDisplay","enableExpense","setEnableExpense","expense40_1_2","expense40_8","enableAllowance","setEnableAllowance","setAllowance","allowanceDisplay","setGroupIncome","taxFinal","sumTax","remainingNetIncome","bracketRange","useTaxCalculation","setActivateTax","setShowBrackets","setShowBreakdown","showDragInstruction","setShowDragInstruction","narrativeSteps","htmlFor","type","step","value","onChange","gridTemplateColumns","columnGap","rowGap","marginLeft","ceil","toFixed","margin","gridColumn","opacity","setTimeout","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6696445e.chunk.js","sourcesContent":["import { useMemo } from 'react';\n\nexport const useNetIncome = (income, expense, allowance) => useMemo(\n  () => Math.max(0, income - expense - allowance),\n  [income, expense, allowance],\n);\n\nexport const useTaxCalculation = (netIncome, taxBrackets) => useMemo(() => {\n  let sumTax = 0;\n  let remainingNetIncome = netIncome;\n  for (let i = 0; i < taxBrackets.length; i++) {\n    const bracketRange = taxBrackets[i].maxNetIncome - taxBrackets[i].minNetIncome;\n    const incomeInBracket = Math.min(remainingNetIncome, bracketRange);\n    const taxInBracket = incomeInBracket * taxBrackets[i].taxRate;\n    sumTax += taxInBracket;\n    remainingNetIncome -= bracketRange;\n    if (remainingNetIncome <= 0) break;\n  }\n  return sumTax;\n}, [netIncome, taxBrackets]);\n","export const theme = {\n  colors: {\n    bg: '#F8F2EF',\n    text: '#222222',\n    textSecondary: '#222222aa',\n    textMuted: '#22222266',\n    income: '#895A46',\n    incomeText: '#7C503D',\n    expense: '#1078A4',\n    expenseText: '#006895',\n    allowance: '#16AD82',\n    allowanceText: '#00956B',\n    tax: '#F7353B',\n    taxText: '#DA0910',\n    white: '#ffffff',\n  },\n};\n\n// export const theme = {\n//   colors: {\n//     bg: \"#F1E8E8\",\n//     text: \"#222222\",\n//     textSecondary: \"#222222aa\",\n//     textMuted: \"#22222266\",\n//     income: \"#0851A6\",\n//     incomeText: \"#0851A6\",\n//     expense: \"#4FA01E\",\n//     expenseText: \"#317706\",\n//     allowance: \"#B346D9\",\n//     allowanceText: \"#9C1BC9\",\n//     tax: \"#E41D1D\",\n//     taxText: \"#E41D1D\",\n//     white: \"#ffffff\",\n//   },\n// };\n\n// export const theme = {\n//   colors: {\n//     bg: \"#1f1629\",\n//     text: \"#fff\",\n//     textMuted: \"#888\",\n//     income: \"#08f\",\n//     incomeText: \"#0af\",\n//     expense: \"#382e59\",\n//     expenseText: \"#9c86eb\",\n//     allowance: \"#2a4236\",\n//     allowanceText: \"#58cc92\",\n//     tax: \"#f80\",\n//     taxText: \"#f90\",\n//   },\n// };\n\nexport default theme;\n","import React, {\n  useState, useEffect, useMemo, useRef,\n} from 'react';\nimport styled from 'styled-components';\nimport * as d3 from 'd3';\nimport { theme } from '../theme';\n\nconst ScaleReference = ({\n  scale, barWidth, x, y, maxSize = 30, aspectRatio = 2.25, ...props\n}) => {\n  const textRef = useRef(null);\n  const squareRef = useRef(null);\n  const patternRef = useRef(null);\n\n  const [textWidth, setTextWidth] = useState(0);\n\n  const rectSide = useMemo(() => {\n    let ref = 1;\n    let side = Math.sqrt(scale(ref) * barWidth);\n    let nextSide = Math.sqrt(scale(ref * 10) * barWidth);\n    while (nextSide < maxSize) {\n      side = nextSide;\n      ref *= 10;\n      nextSide = Math.sqrt(scale(ref * 10) * barWidth);\n    }\n\n    return {\n      area: side * side,\n      height: side * Math.sqrt(1 / aspectRatio),\n      width: side * Math.sqrt(aspectRatio),\n      ref,\n    };\n  }, [scale, barWidth, maxSize, aspectRatio]);\n\n  const sizeOf1000 = useMemo(() => {\n    const bankNoteArea = barWidth * scale(1000);\n    const h = Math.sqrt(bankNoteArea / aspectRatio);\n    return {\n      area: bankNoteArea,\n      width: h * aspectRatio,\n      height: h,\n    };\n  }, [aspectRatio, barWidth, scale]);\n\n  const text = useMemo(() => `= ${rectSide.ref.toLocaleString()} บาท`, [rectSide]);\n\n  useEffect(() => {\n    if (squareRef.current) {\n      d3.select(squareRef.current)\n        .transition().duration(500)\n        .attr('width', rectSide.width)\n        .attr('height', rectSide.height)\n        .attr('x', -rectSide.width - textWidth - 10)\n        .attr('y', -rectSide.height / 2);\n    }\n  }, [squareRef, rectSide, textWidth]);\n\n  useEffect(() => {\n    if (patternRef.current) {\n      const pattern = d3.select(patternRef.current);\n\n      pattern.transition().duration(500)\n        .attr('width', sizeOf1000.width / rectSide.width)// Math.sqrt(rectSide.ref / 1000))\n        .attr('height', sizeOf1000.height / rectSide.height)// Math.sqrt(rectSide.ref / 1000))\n        .attr('x', 0)\n        .attr('y', 0);\n\n      pattern.select('image')\n        .attr('width', sizeOf1000.width)\n        .attr('height', sizeOf1000.height)\n        .attr('y', -sizeOf1000.height);\n    }\n  }, [patternRef, sizeOf1000, rectSide]);\n\n  useEffect(() => {\n    setTextWidth(textRef.current ? textRef.current.getBBox().width : 80);\n  }, [textRef, text]);\n\n  return (\n    <g transform={`translate(${x}, ${y}) scale(1, -1)`}>\n      <defs>\n        <pattern\n          id=\"bank1000-ref\"\n          x=\"0\"\n          y=\"0\"\n          width={sizeOf1000.width / rectSide.width}\n          height=\"1\"\n          ref={patternRef}\n        >\n          <image\n            href={`${process.env.PUBLIC_URL}/bank1000.png`}\n            width={sizeOf1000.width}\n            height={sizeOf1000.height}\n            y={-sizeOf1000.height}\n            transform=\"scale(1, -1)\"\n          />\n          <rect\n            width={sizeOf1000.width}\n            height={sizeOf1000.height}\n            fill=\"transparent\"\n            stroke={theme.colors.bg}\n            fillOpacity={0.5}\n          />\n        </pattern>\n      </defs>\n      <rect fill=\"url(#bank1000-ref)\" ref={squareRef} />\n      {/* <rect fill={theme.colors.income} ref={squareRef} /> */}\n      <text fill={theme.colors.textMuted} alignmentBaseline=\"middle\" textAnchor=\"end\" x={0} ref={textRef}>\n        {text}\n      </text>\n    </g>\n  );\n};\n\nexport default ScaleReference;\n","export const taxBrackets = [\n  {\n    minNetIncome: 0,\n    maxNetIncome: 150000,\n    taxRate: 0,\n  },\n  {\n    minNetIncome: 150000,\n    maxNetIncome: 300000,\n    taxRate: 0.05,\n  },\n  {\n    minNetIncome: 300000,\n    maxNetIncome: 500000,\n    taxRate: 0.1,\n  },\n  {\n    minNetIncome: 500000,\n    maxNetIncome: 750000,\n    taxRate: 0.15,\n  },\n  {\n    minNetIncome: 750000,\n    maxNetIncome: 1000000,\n    taxRate: 0.2,\n  },\n  {\n    minNetIncome: 1000000,\n    maxNetIncome: 2000000,\n    taxRate: 0.25,\n  },\n  {\n    minNetIncome: 2000000,\n    maxNetIncome: 5000000,\n    taxRate: 0.3,\n  },\n  {\n    minNetIncome: 5000000,\n    maxNetIncome: 999999999999,\n    taxRate: 0.35,\n  },\n];\n\nexport default taxBrackets;\n","import React, {\n  useRef, useEffect, useLayoutEffect, useMemo, useCallback, useState,\n} from 'react';\nimport * as d3 from 'd3';\n// import { transition } from 'd3';\nimport useDimensions from 'react-cool-dimensions';\nimport styled from 'styled-components';\nimport { useResizeDetector } from 'react-resize-detector';\nimport { transition } from 'd3';\nimport { useNetIncome } from '../utils/TaxCalculation';\nimport ScaleReference from './ScaleReference';\n\nimport { taxBrackets } from '../data/TaxBrackets';\nimport { theme } from '../theme';\n\n// const transitionDuration = 1000\n\nexport const MoneyBlock = ({\n  amount,\n  offset,\n  scale,\n  barWidth,\n  fill,\n  label,\n  isBlink,\n  outlined = false,\n  enableTransition = true,\n  fade = false,\n  transitionTime = 500,\n  stroke,\n  id = 0,\n}) => {\n  const transitionDuration = useMemo(\n    () => (enableTransition ? transitionTime : 0),\n    [enableTransition, transitionTime],\n  );\n\n  const moneyBlockRef = useRef(null);\n  const patternRef = useRef(null);\n  const strokeWidth = 1;\n\n  const fadeOp = useMemo(() => (outlined ? 0.2 : 1), [outlined]);\n\n  useLayoutEffect(() => {\n    if (moneyBlockRef.current) {\n      const g = d3.select(moneyBlockRef.current);\n\n      g.transition().duration(transitionDuration)\n        .attr('transform', `translate(0, ${scale(offset)})`);\n\n      g.select('rect.block')\n        .attr('width', barWidth)\n        .style('animation', isBlink ? 'blink-from-full 0.5s infinite' : 'none')\n        .style('animation-timing-function', 'linear')\n        .transition()\n        .duration(transitionDuration)\n        // .style('fill', outlined ? 'transparent' : fill)\n        // .attr('y', scale(offset))\n        .attr('height', Math.max(0, scale(amount)))\n        .attr('fill-opacity', fadeOp);\n\n      g.select('rect.block-outline')\n        .attr('width', barWidth - strokeWidth)\n        // .style('animation', isBlink ? 'blink-from-full 1s infinite' : 'none')\n        .transition()\n        .duration(transitionDuration)\n        // .attr('y', scale(offset))\n        .attr('height', Math.max(0, scale(amount)) - strokeWidth)\n        .attr('stroke-opacity', (outlined ? 1 : stroke ? 0.6 : 0) * fadeOp)\n        .attr('fill-opacity', fadeOp);\n\n      g.select('text.label')\n        .text(label)\n        .transition().duration(transitionDuration)\n        // .attr('x', barWidth / 2)\n        .attr('x', barWidth - 24)\n        .style('text-anchor', 'end')\n        .style('fill', outlined ? fill : theme.colors.white)\n        .style('stroke', outlined ? theme.colors.bg : '#000')\n        .attr('y', -scale(amount / 2))\n        .attr('opacity', amount > 0 ? (1 * fadeOp) : 0);\n    }\n  }, [\n    amount,\n    offset,\n    scale,\n    barWidth,\n    fill,\n    label,\n    isBlink,\n    transitionDuration,\n    moneyBlockRef,\n    fadeOp,\n    outlined,\n    stroke,\n  ]);\n\n  const sizeOf1000 = useMemo(() => {\n    const areaTotal = barWidth * scale(amount);\n    const valueTotal = amount;\n    const bankNoteAspectRatio = 2.25;\n\n    const bankNoteArea = valueTotal === 0 ? 0 : (1000 * areaTotal) / valueTotal;\n    const h = Math.sqrt(bankNoteArea / bankNoteAspectRatio);\n    return {\n      area: bankNoteArea,\n      width: h * bankNoteAspectRatio,\n      height: h,\n    };\n  }, [amount, barWidth, scale]);\n\n  useEffect(() => {\n    if (patternRef.current) {\n      const pattern = d3.select(patternRef.current);\n\n      console.log(sizeOf1000, barWidth, amount);\n      pattern.transition().duration(500)\n        .attr('width', (sizeOf1000.width ?? 0) / barWidth)// Math.sqrt(rectSide.ref / 1000))\n        .attr('height', (sizeOf1000.height ?? 0) / (amount === 0 ? 1 : scale(amount)))// Math.sqrt(rectSide.ref / 1000))\n        .attr('x', 0)\n        .attr('y', 0);\n\n      pattern.select('image')\n        .transition().duration(500)\n        .attr('width', sizeOf1000.width)\n        .attr('height', sizeOf1000.height)\n        .attr('y', -sizeOf1000.height);\n\n      pattern.select('rect.color-overlay')\n        .transition().duration(500)\n        .attr('fill-opacity', outlined ? 0 : 0.7);\n    }\n  }, [patternRef, sizeOf1000, barWidth, scale, amount, outlined]);\n\n  return (\n    <>\n      <g ref={moneyBlockRef}>\n        <defs>\n          <pattern\n            ref={patternRef}\n            id={`bank1000-${id}`}\n            x=\"0\"\n            y=\"0\"\n            // width={sizeOf1000.width / barWidth}\n            // height={sizeOf1000.height / scale(amount)}\n          >\n            <image\n              href={`${process.env.PUBLIC_URL}/bank1000.png`}\n              // width={sizeOf1000.width}\n              // height={sizeOf1000.height}\n              transform=\"scale(1, -1)\"\n              // y={-sizeOf1000.height}\n            />\n            <rect\n              width=\"100%\"\n              height=\"100%\"\n              fill=\"transparent\"\n              stroke={theme.colors.bg}\n              strokeWidth={3}\n            />\n            <rect\n              className=\"color-overlay\"\n              width=\"100%\"\n              height=\"100%\"\n              fill={fill}\n              // fill=\"transparent\"\n              // fillOpacity={outlined ? 0 : 0.7}\n            />\n          </pattern>\n        </defs>\n        <rect\n          className=\"block\"\n          width={barWidth}\n          fill={`url(#bank1000-${id})`}\n          // fill={outlined ? 'transparent' : fill}\n          // opacity={fadeOp}\n          // stroke={outlined ? fill : theme.colors.text}\n          // stroke-opacity={outlined ? 1 : stroke ? 0.6 : 0}\n          // strokeWidth={strokeWidth}\n          // stroke-dasharray=\"5, 5\"\n          data-amount={amount}\n          data-offset={offset}\n        />\n        <rect\n          className=\"block-outline\"\n          width={barWidth - strokeWidth}\n          x={strokeWidth / 2}\n          y={strokeWidth / 2}\n          // fill={outlined ? 'transparent' : fill}\n          fill={outlined ? 'transparent' : `url(#bank1000-${id})`}\n          stroke={outlined ? fill : theme.colors.white}\n          strokeWidth={strokeWidth}\n          // strokeOpacity={(outlined ? 1 : stroke ? 0.6 : 0) * fadeOp}\n          strokeDasharray=\"5, 3\"\n          data-amount={amount}\n          data-offset={offset}\n        />\n        <text\n          className=\"label\"\n          style={{\n            // fill: outlined ? fill : theme.colors.white,\n            // stroke: outlined ? theme.colors.bg : '#000',\n            fontSize: '0.875rem',\n            alignmentBaseline: 'middle',\n            textAnchor: 'middle',\n            paintOrder: 'stroke fill',\n            strokeWidth: 4,\n            strokeLinejoin: 'round',\n          }}\n        >\n          {label}\n        </text>\n      </g>\n    </>\n  );\n};\n\nexport default MoneyBlock;\n","import React, {\n  useRef, useEffect, useLayoutEffect, useMemo, useCallback,\n} from 'react';\nimport * as d3 from 'd3';\n// import { transition } from 'd3';\n\nimport { taxBrackets } from '../data/TaxBrackets';\nimport { theme } from '../theme';\n\n// const transitionDuration = 1000\n\nexport const TaxBracketDisplay = ({\n  barWidth,\n  scaleIncome,\n  scaleTaxRate,\n  showTax,\n  blinkTax,\n  netIncome,\n  // netIncomeMask,\n  enableTransition = true,\n  active = false,\n  transitionTime = 500,\n  isPullTax = false,\n  setPullTax = () => { },\n}) => {\n  const transitionDuration = useMemo(\n    () => (enableTransition ? transitionTime : 0),\n    [enableTransition, transitionTime],\n  );\n\n  const taxBracketRef = useRef(null);\n  const taxMaskRef = useRef(null);\n\n  const generateTaxBracketsPathD = useCallback((x) => {\n    let pathD = 'M 0 0 ';\n    pathD += taxBrackets.map((d) => ''\n                + `L ${scaleTaxRate(d.taxRate)} ${scaleIncome(d.minNetIncome)} `\n                + `L ${scaleTaxRate(d.taxRate)} ${scaleIncome(d.maxNetIncome)} `).join('');\n    pathD += `L 0 ${scaleIncome(taxBrackets[taxBrackets.length - 1].maxNetIncome)} `;\n    pathD += 'Z';\n    return pathD;\n  }, [scaleIncome, scaleTaxRate]);\n\n  useLayoutEffect(() => {\n    if (taxBracketRef.current && taxMaskRef.current) {\n      const g = d3.select(taxBracketRef.current);\n      const mask = d3.select(taxMaskRef.current);\n\n      mask.attr('width', barWidth)\n        .transition().duration(transitionDuration)\n      // .style('fill', '#08f')\n        .attr('height', Math.max(0, scaleIncome(netIncome)));\n\n      g.select('path.tax-stairs-camouflage')\n        .attr('fill', theme.colors.bg)\n        .transition().duration(transitionDuration)\n        .attr('opacity', showTax ? 1 : 0)\n        .attr('d', generateTaxBracketsPathD);\n\n      g.select('path.tax-stairs')\n        .attr('fill', theme.colors.tax)\n        .style('animation', showTax && blinkTax ? 'blink-from-none 1s infinite' : 'none')\n        .transition()\n        .duration(transitionDuration)\n        .attr('d', generateTaxBracketsPathD)\n        .attr('transform', isPullTax ? `translate(${-50}, 0)` : 'translate(0, 0)')\n        .style('opacity', showTax && !isPullTax ? 1 : 0);\n\n      const bracketLineGroups = g.select('g.tax-lines')\n        .selectAll('g')\n        .data(taxBrackets);\n\n      const bracketLineGroupsEnter = bracketLineGroups\n        .enter()\n        .append('g')\n        .classed('bracket', true);\n\n      bracketLineGroupsEnter.append('text').classed('bracket-rate-text', true);\n      bracketLineGroupsEnter.append('text').classed('bracket-min-text', true);\n      bracketLineGroupsEnter.append('rect').classed('bracket-rect', true);\n      bracketLineGroupsEnter.append('line').classed('bracket-line', true);\n\n      bracketLineGroups.merge(bracketLineGroupsEnter)\n        .select('rect')\n        .attr('x', 0) // d => scaleTaxRate(d.taxRate))\n        .attr('width', (d) => scaleTaxRate(d.taxRate))\n        .style('fill-opacity', 0)\n        .style('stroke', theme.colors.tax)\n        .style('stroke-width', 2)\n        // .style('stroke-dasharray', '5, 3')\n        .transition()\n        .duration(transitionDuration)\n        .attr('y', (d) => scaleIncome(d.minNetIncome))\n        .attr('height', (d) => scaleIncome(d.maxNetIncome - d.minNetIncome))\n        .attr('opacity', active ? 1 : 0);\n\n      bracketLineGroups.merge(bracketLineGroupsEnter)\n        .select('line')\n        .attr('x1', 0)\n        .attr('x2', barWidth)\n        .style('stroke', theme.colors.tax)\n        .style('stroke-width', 2)\n        // .style('stroke-dasharray', '5, 3')\n        .transition()\n        .duration(transitionDuration)\n      // .style('stroke-opacity', '0.4')\n        .attr('y1', (d) => Math.round(scaleIncome(d.maxNetIncome)))\n        .attr('y2', (d) => Math.round(scaleIncome(d.maxNetIncome)))\n        .attr('opacity', active ? 1 : 0);\n\n      bracketLineGroups.merge(bracketLineGroupsEnter)\n        .select('text.bracket-rate-text')\n        .style('font-size', '0.75rem')\n        .style('text-anchor', 'start')\n        .style('dominant-baseline', 'text-before-edge')\n        .style('paint-order', 'stroke fill')\n        .style('stroke-width', 4)\n        .style('stroke-linejoin', 'round')\n        .attr('x', (d) => scaleTaxRate(d.taxRate) + 5)\n        // .attr('x', barWidth - 5)\n        .transition()\n        .duration(transitionDuration)\n        // .style('fill', theme.colors.text)\n        .style('stroke', (d) => (netIncome > d.minNetIncome ? '#000' : theme.colors.bg))\n        .style('fill', (d) => (netIncome > d.minNetIncome ? theme.colors.white : theme.colors.taxText))\n        .style('font-weight', (d) => (netIncome > d.minNetIncome ? 'bold' : 'normal'))\n        .text((d) => `เริ่มคิดที่ ${d.minNetIncome.toLocaleString()} บาท`)\n        .style('fill-opacity', (d, i) => (i !== 0 && scaleIncome(d.maxNetIncome - d.minNetIncome) > 40 ? 1 : 0))\n        .style('stroke-opacity', (d, i) => (i !== 0 && scaleIncome(d.maxNetIncome - d.minNetIncome) > 40 ? 1 : 0))\n        .attr('y', (d) => -scaleIncome(d.minNetIncome) + 5)\n        .attr('opacity', active ? 1 : 0);\n\n      bracketLineGroups.merge(bracketLineGroupsEnter)\n        .select('text.bracket-min-text')\n        .style('font-size', '0.75rem')\n        .style('paint-order', 'stroke fill')\n        .style('stroke-width', 4)\n        .style('stroke-linejoin', 'round')\n        .attr('x', (d) => scaleTaxRate(d.taxRate) + 5)\n        .transition()\n        .duration(transitionDuration)\n        .style('stroke', (d) => (netIncome > d.minNetIncome ? '#000' : theme.colors.bg))\n        .style('fill', (d) => (netIncome > d.minNetIncome ? theme.colors.white : theme.colors.taxText))\n        .style('font-weight', (d) => (netIncome > d.minNetIncome ? 'bold' : 'normal'))\n        .text((d) => `ภาษี ${d.taxRate * 100}%`)\n      // .text(d => scaleIncome(d.maxNetIncome - d.minNetIncome) > 150\n      //     ? `เริ่มคิดที่ ${numberWithCommas(d.minNetIncome)} บาท`\n      //     : `${d.taxRate * 100}%`)\n        .style('fill-opacity', (d, i) => (i !== 0 && scaleIncome(d.maxNetIncome - d.minNetIncome) > 40 ? 1 : 0))\n        .style('stroke-opacity', (d, i) => (i !== 0 && scaleIncome(d.maxNetIncome - d.minNetIncome) > 40 ? 1 : 0))\n        .attr('y', (d) => -scaleIncome(d.minNetIncome) - 5)\n        .attr('opacity', active ? 1 : 0);\n    }\n  }, [\n    taxBracketRef,\n    taxMaskRef,\n    netIncome,\n    scaleTaxRate,\n    scaleIncome,\n    active,\n    showTax,\n    blinkTax,\n    barWidth,\n    generateTaxBracketsPathD,\n    isPullTax,\n    transitionDuration,\n  ]);\n\n  return (\n    <>\n      <defs>\n        <clipPath id=\"net-income-mask\">\n          <rect className=\"net-income-mask\" ref={taxMaskRef} />\n        </clipPath>\n      </defs>\n      <g id=\"tax-brackets\" ref={taxBracketRef}>\n        <g className=\"tax-lines\" />\n        {/* eslint-disable-next-line max-len */}\n        {/* <path className=\"tax-stairs-camouflage\" clipPath=\"url(#net-income-mask)\" onClick={() => setPullTax(false)} /> */}\n        <path className=\"tax-stairs\" clipPath=\"url(#net-income-mask)\" onClick={() => setPullTax(!isPullTax)} />\n      </g>\n    </>\n  );\n};\n\nexport default TaxBracketDisplay;\n","import React, {\n  useRef, useEffect, useLayoutEffect, useMemo, useCallback, useState,\n} from 'react';\nimport * as d3 from 'd3';\n// import { transition } from 'd3';\nimport useDimensions from 'react-cool-dimensions';\nimport styled from 'styled-components';\nimport { useResizeDetector } from 'react-resize-detector';\nimport { transition } from 'd3';\nimport { useNetIncome } from '../utils/TaxCalculation';\nimport ScaleReference from './ScaleReference';\n\nimport { taxBrackets } from '../data/TaxBrackets';\nimport { MoneyBlock } from './MoneyBlock';\nimport { TaxBracketDisplay } from './TaxBracketDisplay';\nimport { theme } from '../theme';\n\nconst SvgContainer = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n`;\n\nconst CartesianSvg = styled.svg`\n    & > g text {\n        transform: scale(1, -1);\n    }\n`;\n\n// const transitionDuration = 1000\n\nexport const D3Component = ({\n  incomeGroups,\n  // incomeGroupLabels,\n  // expenseGroups,\n  isGroupIncome,\n  showBreakdown,\n\n  income,\n  expense,\n  allowance,\n  // taxBrackets,\n  padding = {\n    left: 35,\n    right: 0,\n    top: 0,\n    bottom: 30,\n  },\n  isPullTax = false,\n  showBrackets = true,\n  isActivateTax = true,\n  setPullTax = (x) => { },\n  transitionTime = 500,\n  enableTransition = true,\n  isFocusIncome = true,\n  isBlink = {},\n}) => {\n  const {\n    observe, unobserve, width, height, entry,\n  } = useDimensions({\n    onResize: ({\n      /* eslint-disable-next-line no-shadow */\n      observe, unobserve, w, h, entr,\n    }) => {\n      // Triggered whenever the size of the target is changed...\n\n      unobserve(); // To stop observing the current target element\n      observe(); // To re-start observing the current target element\n    },\n  });\n\n  const transitionDuration = useMemo(\n    () => (enableTransition ? transitionTime : 0),\n    [enableTransition, transitionTime],\n  );\n\n  const d3Container = useRef(null);\n\n  const cleanedExpense = useMemo(\n    () => (expense < (income - allowance) ? +expense : +Math.max(0, income - allowance)),\n    [income, expense, allowance],\n  );\n  const cleanedAllowance = useMemo(() => Math.min(income, allowance), [income, allowance]);\n\n  const netIncome = useNetIncome(income, expense, allowance);\n\n  /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  const scaleIncome = useCallback(\n    d3.scaleLinear()\n      .domain([0, Math.max(300_000, income * 1.4)])\n      .range([0, height - padding.bottom]),\n    [height, income, padding],\n  );\n\n  const barWidth = useMemo(() => width - (padding.left + padding.right), [width, padding]);\n\n  /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  const scaleTaxRate = useCallback(\n    d3.scaleLinear()\n      .domain([0, 1])\n      .range([0, barWidth]),\n    [income, width],\n  );\n\n  const axisIncome = useMemo(() => d3.axisLeft(scaleIncome)\n    .tickFormat(d3.format('.3s')),\n  [scaleIncome]);\n  const axisTaxRate = useMemo(() => d3.axisBottom(scaleTaxRate).tickFormat(d3.format('.0%')).tickSize(-6).tickPadding(12),\n    [scaleTaxRate]);\n\n  useLayoutEffect(() => {\n    if (d3Container.current) {\n      const svg = d3.select(d3Container.current);\n\n      svg.select('g.container')\n        .attr('transform', `translate(${padding.left}, ${padding.bottom})`);\n\n      svg.select('g.overview')\n        .transition().duration(transitionDuration)\n        .attr('opacity', showBreakdown ? 0 : 1);\n\n      svg.select('g.breakdown')\n        .transition().duration(transitionDuration)\n        .attr('opacity', showBreakdown ? 1 : 0);\n\n      // AXES\n\n      d3.select('g.axis-income')\n        .attr('transform', 'translate(0, 0)')\n        .transition().duration(transitionDuration)\n        .call(axisIncome);\n\n      d3.select('g.axis-tax-rate')\n        // .attr(\"transform\", `translate(-10, 0)`)\n        .transition().duration(transitionDuration)\n        .attr('opacity', showBrackets ? 1 : 0)\n        .call(axisTaxRate);\n    }\n  }, [\n    d3Container,\n    padding,\n    axisIncome,\n    axisTaxRate,\n    showBreakdown,\n    transitionDuration,\n    showBrackets,\n  ]);\n\n  const sum = (x) => x.reduce((a, b) => a + b, 0);\n\n  return (\n    <>\n      <SvgContainer ref={observe}>\n        {/* <Fade /> */}\n        <CartesianSvg\n          id=\"chart\"\n          className=\"d3-component\"\n          width={width}\n          height={height}\n          ref={d3Container}\n        >\n          <defs>\n            <linearGradient id=\"fade-grad\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n              <stop offset=\"0%\" style={{ stopColor: theme.colors.bg, stopOpacity: 1 }} />\n              <stop offset=\"100%\" style={{ stopColor: theme.colors.bg, stopOpacity: 0 }} />\n            </linearGradient>\n          </defs>\n\n          <g transform={`translate(0, ${height}) scale(1, -1)`}>\n            <g className=\"container\">\n              <g className=\"overview\">\n                <MoneyBlock\n                  amount={netIncome}\n                  scale={scaleIncome}\n                  offset={0}\n                  barWidth={barWidth}\n                  fill=\"transparent\"\n                  label=\"เงินได้สุทธิ\"\n                  stroke={false}\n                  enableTransition={enableTransition}\n                  isBlink={isBlink.income}\n                  id=\"netincome\"\n                />\n                <MoneyBlock\n                  amount={cleanedExpense}\n                  scale={scaleIncome}\n                  offset={netIncome + cleanedAllowance}\n                  barWidth={barWidth}\n                  fill={isFocusIncome ? theme.colors.expenseText : theme.colors.expense}\n                  // fill={theme.colors.expenseText}\n                  label=\"ค่าใช้จ่าย\"\n                  stroke={false}\n                  enableTransition={enableTransition}\n                  outlined={isFocusIncome}\n                  // fade={isFocusIncome}\n                  id=\"expense\"\n                />\n                <MoneyBlock\n                  amount={cleanedAllowance}\n                  scale={scaleIncome}\n                  offset={netIncome}\n                  barWidth={barWidth}\n                  fill={isFocusIncome ? theme.colors.allowanceText : theme.colors.allowance}\n                  // fill={theme.colors.allowanceText}\n                  label=\"ค่าลดหย่อน\"\n                  stroke={false}\n                  enableTransition={enableTransition}\n                  outlined={isFocusIncome}\n                  // fade={isFocusIncome}\n                  id=\"allowance\"\n                />\n              </g>\n              <g className=\"breakdown\">\n                {incomeGroups.map((ig, i) => (\n                  <>\n                    <MoneyBlock\n                      amount={ig.income - ig.expense}\n                      scale={scaleIncome}\n                      offset={\n                        isGroupIncome\n                          ? sum(incomeGroups.slice(0, i).map((x) => x.income - x.expense))\n                          : sum(incomeGroups.slice(0, i).map((x) => x.income))\n                      }\n                      barWidth={barWidth}\n                      fill=\"transparent\"\n                      // fill={theme.colors.income}\n                      label={ig.label}\n                      stroke\n                      id={`profit-x-${i}`}\n                    />\n                    <MoneyBlock\n                      amount={ig.expense}\n                      scale={scaleIncome}\n                      offset={\n                        isGroupIncome\n                          ? (\n                            sum(incomeGroups.map((x) => x.income - x.expense))\n                            + sum(incomeGroups.slice(0, i).map((x) => x.expense))\n                          )\n                          : (\n                            sum(incomeGroups.slice(0, i).map((x) => x.income))\n                            + (ig.income - +ig.expense)\n                          )\n                      }\n                      barWidth={barWidth}\n                      fill={isFocusIncome ? theme.colors.expenseText : theme.colors.expense}\n                      label={`ค่าใช้จ่าย คิดจาก${ig.label}`}\n                      stroke\n                      outlined={isFocusIncome}\n                      id={`expense-x-${i}`}\n                    />\n                  </>\n                ))}\n              </g>\n\n              <TaxBracketDisplay\n                barWidth={barWidth}\n                scaleIncome={scaleIncome}\n                scaleTaxRate={scaleTaxRate}\n                showTax={isActivateTax}\n                blinkTax={isBlink.tax}\n                active={showBrackets}\n                netIncome={netIncome}\n              />\n\n              <g className=\"axis axis-income\" />\n              <g className=\"axis axis-tax-rate\" />\n              <line\n                className=\"axis axis-tax-blank\"\n                x1={0}\n                x2={width - padding.left - padding.right}\n                y1={0}\n                y2={0}\n                stroke={theme.colors.text}\n                strokeOpacity={0.4}\n              />\n            </g>\n          </g>\n          <rect className=\"fade\" fill=\"url(#fade-grad)\" width={width} height={(height - padding.bottom) * 0.25} />\n          <ScaleReference\n            scale={scaleIncome}\n            barWidth={barWidth}\n            x={width}\n            y={40 / 2}\n            maxSize={40}\n          />\n        </CartesianSvg>\n      </SvgContainer>\n    </>\n  );\n};\n\nexport default D3Component;\n","import React, { useMemo } from 'react';\nimport styled from 'styled-components';\nimport * as d3 from 'd3';\nimport { theme } from '../theme';\n\nconst StoryIndicatorContainer = styled.div`\n    display: flex;\n    gap: 6px;\n    position: absolute;\n    top: 15px;\n    left: 30px;\n    right: 30px;\n    z-index: 100;\n\n    @media (min-width: 480px) {\n        width: 500px;\n        margin: auto;\n    }\n`;\n\nconst StoryIndicatorItem = styled.div`\n    height: 3px;\n    flex-grow: 1;\n    border-radius: 999;\n    background-color: ${theme.colors.text};\n    transition: opacity 0.2s;\n    opacity: ${(props) => (props.active ? 1 : 0.2)};\n`;\n\nconst StoryIndicator = ({ currentStep = 0, totalSteps = 0, ...props }) => {\n  const steps = useMemo(() => d3.range(totalSteps), [totalSteps]);\n\n  return (\n    <>\n      <StoryIndicatorContainer {...props}>\n        {steps.map((d, i) => (\n          <StoryIndicatorItem active={i <= currentStep} />\n        ))}\n      </StoryIndicatorContainer>\n    </>\n  );\n};\n\nexport default StoryIndicator;\n","import React, {\n  useCallback, useEffect, useRef, useState,\n} from 'react';\nimport styled from 'styled-components';\nimport { transparentize } from 'polished';\nimport { theme } from '../theme';\n\nconst FadeTop = styled.div`\n    position: absolute;\n    top: -2px;\n    left: -2px;\n    right: -2px;\n    height: 50px;\n    background: linear-gradient(to bottom, ${theme.colors.bg}, ${transparentize(1, theme.colors.bg)});\n    pointer-events: none;\n    z-index: 1;\n\n    transition: all 0.2s;\n    opacity: ${(props) => (props.active ? 1 : 0)};\n`;\n\nconst FadeBottom = styled.div`\n    position: absolute;\n    bottom: -2px;\n    left: -2px;\n    right: -2px;\n    height: 50px;\n    background: linear-gradient(to top, ${theme.colors.bg}, ${transparentize(1, theme.colors.bg)});\n    pointer-events: none;\n    z-index: 1;\n\n    transition: all 0.2s;\n    opacity: ${(props) => (props.active ? 1 : 0)};\n`;\n\nconst ScrollBoxContainer = styled.div`\n    /* position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0; */\n    position: relative;\n    overflow-y: auto;\n    overflow-x: hidden;\n`;\n\nconst StyledScrollBox = styled.div`\n    position: relative;\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n`;\n\nconst ScrollBox = ({ children, onScroll, ...props }) => {\n  const scrollBoxRef = useRef(null);\n  const [showTopFade, setShowTopFade] = useState(true);\n  const [showBottomFade, setShowBottomFade] = useState(true);\n\n  const handleScroll = useCallback((e) => {\n    if (scrollBoxRef.current) {\n      setShowTopFade(scrollBoxRef.current.scrollTop > 0);\n      setShowBottomFade(\n        (\n          scrollBoxRef.current.offsetHeight\n          + scrollBoxRef.current.scrollTop\n        ) < scrollBoxRef.current.scrollHeight,\n      );\n    }\n  }, [scrollBoxRef]);\n\n  /* eslint-disable-next-line consistent-return */\n  useEffect(() => {\n    if (scrollBoxRef.current) {\n      console.log('registering handleScroll', handleScroll);\n      scrollBoxRef.current.addEventListener('scroll', (e) => {\n        onScroll(e);\n        handleScroll(e);\n      });\n      return () => {\n        if (scrollBoxRef.current) {\n          /* eslint-disable-next-line react-hooks/exhaustive-deps */\n          scrollBoxRef.current.removeEventListener('scroll', handleScroll);\n        }\n      };\n    }\n  }, [scrollBoxRef, handleScroll, onScroll]);\n\n  useEffect(handleScroll, [scrollBoxRef, handleScroll]);\n\n  return (\n    <>\n      <StyledScrollBox ref={scrollBoxRef} {...props}>\n        {children}\n      </StyledScrollBox>\n      <FadeTop active={showTopFade} />\n      <FadeBottom active={showBottomFade} />\n    </>\n  );\n};\n\nexport default ScrollBox;\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport ReactSlider from 'react-slider';\nimport { darken, lighten } from 'polished';\n\nconst StyledSlider = styled(ReactSlider)`\n    width: 100%;\n    height: 20px;\n`;\n\nconst StyledThumb = styled.div`\n    height: 20px;\n    line-height: 20px;\n    width: 20px;\n    text-align: center;\n    background-color: ${(props) => props.color || '#08f'};\n    /* border: 2px ${(props) => darken(0.1, props.color || '#08f')} solid; */\n    box-sizing: border-box;\n    color: #fff;\n    border-radius: 12px;\n    cursor: grab;\n    position: relative;\n`;\n\nconst StyledTrack = styled.div`\n  top: 6px;\n  bottom: 6px;\n  background: ${(props) => (\n    props.index === 1\n      ? '#0002'\n      : darken(0.05, props.color || '#08f')\n  )};\n  border-radius: 999px;\n`;\n\nconst Tooltip = styled.div`\n    opacity: ${(props) => (props.visible ? 1 : 0)};\n    position: absolute;\n    top: -40px;\n    left: 50%;\n    transform: translateX(-50%);\n    background-color: #000d;\n    padding: 4px 8px;\n    border-radius: 4px;\n    transition: all 0.2s;\n    font-size: 0.75rem;\n    pointer-events: none;\n`;\n\nconst Slider = ({\n  onBeforeChange = () => { }, onAfterChange = () => { }, color, ...props\n}) => {\n  const [showTooltip, setShowTooltip] = useState(false);\n  return (\n    <StyledSlider\n      renderTrack={\n        (trackProps, state) => <StyledTrack {...trackProps} index={state.index} color={color} />\n      }\n      renderThumb={(thumbProps, state) => (\n        <StyledThumb {...thumbProps} color={color}>\n          <Tooltip visible={showTooltip}>{state.valueNow.toLocaleString()}</Tooltip>\n        </StyledThumb>\n      )}\n      onBeforeChange={(x) => {\n        setShowTooltip(true);\n        onBeforeChange(x);\n      }}\n      onAfterChange={(x) => {\n        setShowTooltip(false);\n        onAfterChange(x);\n      }}\n      {...props}\n    />\n  );\n};\n\nexport default Slider;\n","import React from 'react';\nimport styled, { keyframes, css } from 'styled-components';\n/* eslint-disable */\nconst scrollPreview = keyframes`\n  0% {\n    opacity: 0;\n    transform: translate(-50%, 100px);\n  }\n\n  20% {\n    opacity: 1;\n    transform: translate(-50%, 100px);\n  }\n\n  80% {\n    opacity: 1;\n    transform: translate(-50%, 0);\n  }\n\n  100% {\n    opacity: 0;\n    transform: translate(-50%, 0);\n  }\n`;\n\nconst ScrollInstruction = styled.div`\n    width: 64px;\n    height: 64px;\n    background-color: #fff;\n    position: absolute;\n    left: 50%;\n    transform: translateX(-50%);\n    ${(props) => props.visible && css`animation: ${scrollPreview} 2s infinite`};\n    background: url('${process.env.PUBLIC_URL}/drag.svg');\n    background-size: cover;\n    opacity: ${(props) => (props.visible ? 1 : 0)};\n    \n    transition: all 0.2s;\n`;\n\n// const ScrollInstruction = ({ ...props }) =>\n// <StyledScrollInstruction {...props} />\n\nexport default ScrollInstruction;\n","import styled, { css } from 'styled-components';\nimport { theme } from '../theme';\n\nconst Button = styled.button`\n  border: none;\n  border-radius: 8px;\n  padding: 8px 16px;\n  font-family: \"Bai Jamjuree\", sans-serif;\n\n  ${(props) => (props.secondary\n    ? css`\n          border: 1px ${theme.colors.income} solid;\n          background-color: transparent;\n          color: ${theme.colors.income} !important;\n        `\n    : css`\n          background-color: ${theme.colors.income};\n          color: ${theme.colors.white};\n          box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);\n        `)}\n\n  ${(props) => props.disabled\n    && css`\n      opacity: 0.4;\n    `}\n`;\n\nexport default Button;\n","import styled, { css } from 'styled-components';\n\nconst Step = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  flex-grow: 1;\n  transition: all 0.5s;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n\n  ${(props) => {\n    switch (props.status) {\n      case -1:\n        return css`\n          transform: translateX(-100px);\n          opacity: 0;\n          pointer-events: none;\n        `;\n      case 1:\n        return css`\n          transform: translateX(100px);\n          opacity: 0;\n          pointer-events: none;\n        `;\n      default:\n        return css`\n          /* transform: translateX(-100px):  */\n          /* opacity: 0; */\n          /* pointer-events: none; */\n        `;\n    }\n  }}\n`;\n\nexport const StepOnly = styled.div`\n  ${(props) => {\n    switch (props.status) {\n      case -1:\n        return css`\n          transform: translateX(-100px);\n          opacity: 0;\n          pointer-events: none;\n        `;\n      case 1:\n        return css`\n          transform: translateX(100px);\n          opacity: 0;\n          pointer-events: none;\n        `;\n      default:\n        return css`\n          /* transform: translateX(-100px):  */\n          /* opacity: 0; */\n          /* pointer-events: none; */\n        `;\n    }\n  }}\n`;\n\nexport default Step;\n","import React from 'react';\nimport { theme } from '../theme';\nimport Button from '../components/Button';\nimport Step from '../components/Step';\n\nconst CoverPage = ({ currentNarrativeStep, setCurrentNarrativeStep }) => (\n  <Step\n    status={Math.sign(-1 - currentNarrativeStep)}\n    style={{\n      gap: '10px',\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: theme.colors.bg,\n      color: theme.colors.text,\n      // color: theme.colors.incomeText,\n      zIndex: 100,\n      top: 30,\n      padding: 50,\n      paddingTop: 30,\n      marginTop: -30,\n      textAlign: 'center',\n      backgroundImage: `url('${process.env.PUBLIC_URL}/bg_fast.gif')`,\n      backgroundSize: '97.2px 21.6px',\n      backgroundPosition: 'center center',\n    }}\n  >\n    <div\n      style={{\n        position: 'absolute',\n        left: '50%',\n        top: 'calc(50% - 16px)',\n        transform: 'translate(-50%, -50%)',\n        borderRadius: '50%',\n        backgroundColor: theme.colors.bg,\n        padding: '64px',\n        width: '360px',\n        height: '360px',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      <h1 style={{\n        color: theme.colors.text,\n        // marginTop: -30,\n        marginBottom: 16,\n      }}\n      >\n        เข้าใจ\n        <span style={{ color: theme.colors.taxText }}>ภาษี</span>\n        <br />\n        แบบเห็นภาพ\n      </h1>\n      <p>\n        คำนวณภาษียากจัง!? มาลองคิดภาษี\n        <br />\n        แบบคร่าวๆ สไตล์มือใหม่หัดทำภาษี\n        <br />\n        ผ่าน data visualization กัน!\n      </p>\n      <Button\n        style={{\n          padding: '8px 32px',\n          borderRadius: 8,\n          backgroundColor: theme.colors.income,\n          color: theme.colors.white,\n          fontWeight: 'bold',\n          fontSize: '1.125rem',\n        }}\n        onClick={() => setCurrentNarrativeStep(0)}\n      >\n        เริ่มเลย\n      </Button>\n      {/* <p style={{\n        color: theme.colors.textSecondary,\n        marginTop: '1rem',\n        position: ' absolute',\n        bottom: 30,\n        left: 0,\n        right: 0,\n        textAlign: 'center',\n        lineHeight: 1.2,\n      }}\n      > */}\n      <p style={{\n        color: theme.colors.textSecondary,\n        marginTop: '3rem',\n        marginBottom: '-3rem',\n        textAlign: 'center',\n        lineHeight: 1.2,\n      }}\n      >\n        <small>\n          a data visualization experiment by\n          <br />\n          <a href=\"https://taepras.com\" target=\"_blank\" rel=\"noreferrer\" style={{ color: 'inherit' }}>\n            Tae Prasongpongchai\n          </a>\n        </small>\n      </p>\n    </div>\n    {/* <p style={{ color: theme.colors.textMuted, marginTop: '1rem' }}>\n      <small>\n        *เว็บไซต์นี้ไม่มีการเก็บข้อมูลตัวเลขที่คุณกรอก\n        <br />\n        และไม่มีข้อผูกพันทางกฎหมายใดๆ\n      </small>\n    </p> */}\n  </Step>\n);\n\nexport default CoverPage;\n","import React from 'react';\nimport { theme } from '../theme';\nimport Button from '../components/Button';\nimport Step from '../components/Step';\n\nconst EndingPage = ({ currentNarrativeStep, setCurrentNarrativeStep, narrativeStepsCount }) => (\n  <Step\n    status={Math.sign(narrativeStepsCount - currentNarrativeStep)}\n    style={{\n      gap: '10px',\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: theme.colors.bg,\n      zIndex: 100,\n      top: 30,\n      padding: 50,\n      paddingTop: 30,\n      textAlign: 'center',\n    }}\n  >\n    <p>\n      เรื่องราวเกี่ยวกับภาษียังมีรายละเอียด\n      <br />\n      กว่านี้อีกมาก สามารถอ่านเพิ่มเติมได้ที่\n      <br />\n      เว็บไซต์\n      {' '}\n      <a href=\"https://www.rd.go.th/548.html\">กรมสรรพากร</a>\n    </p>\n    <p>\n      แต่ถ้าชอบ visualization นี้\n      <br />\n      แชร์ให้เพื่อนดูต่อได้เลย\n    </p>\n    <div style={{ display: 'flex', gap: '10px' }}>\n      <div\n        className=\"fb-share-button\"\n        data-href=\"https://taepras.github.io/taxvisualizer/\"\n        data-layout=\"button\"\n        data-size=\"large\"\n      >\n        <a\n          target=\"_blank\"\n          href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftaepras.github.io%2Ftaxvisualizer%2F&amp;src=sdkpreparse\"\n          className=\"fb-xfbml-parse-ignore\"\n          rel=\"noreferrer\"\n        >\n          Share\n        </a>\n      </div>\n      <a\n        href=\"https://twitter.com/share?ref_src=twsrc%5Etfw\"\n        className=\"twitter-share-button\"\n        data-size=\"large\"\n        data-url=\"https://taepras.github.io/taxvisualizer/\"\n        data-via=\"taepras\"\n        data-dnt=\"true\"\n        data-show-count=\"false\"\n      >\n        Tweet\n      </a>\n      <div\n        className=\"line-it-button\"\n        data-lang=\"en\"\n        data-type=\"share-a\"\n        data-ver=\"3\"\n        data-url=\"https://taepras.github.io/taxvisualizer/\"\n        data-color=\"default\"\n        data-size=\"large\"\n        data-count=\"false\"\n      />\n    </div>\n\n    <div style={{ display: 'flex', marginTop: '1rem', gap: '10px' }}>\n      <Button\n        style={{\n          border: 'none',\n          fontSize: '1rem',\n          textDecoration: 'underline',\n        }}\n        secondary\n        onClick={() => setCurrentNarrativeStep(narrativeStepsCount - 1)}\n      >\n        &laquo; ย้อนกลับ\n      </Button>\n      <Button\n        style={{\n          border: 'none',\n          fontSize: '1rem',\n          textDecoration: 'underline',\n        }}\n        secondary\n        onClick={() => {\n          /* eslint-disable-next-line no-undef */\n          window.location.href = '';\n        }}\n      >\n        &laquo; เริ่มใหม่\n      </Button>\n    </div>\n\n    <p style={{ marginTop: '30px', color: theme.colors.textMuted }}>\n      Tax, visualized. was created by\n      <br />\n      <a\n        href=\"https://taepras.com\"\n        style={{ color: theme.colors.textMuted }}\n      >\n        Tae Prasongpongchai\n      </a>\n    </p>\n  </Step>\n);\n\nexport default EndingPage;\n","import React from 'react';\nimport Button from './Button';\n\nconst PageNavigator = ({ currentStep, setCurrentStep, stepCount }) => (\n  <div style={{ display: 'flex', marginTop: '20px', gap: '20px' }}>\n    <Button\n      style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}\n      onClick={() => setCurrentStep(Math.max(currentStep - 1, -1))}\n        // disabled={currentStep === 0}\n      secondary\n    >\n      ย้อนกลับ\n    </Button>\n    <Button\n      style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}\n      onClick={() => setCurrentStep(\n        Math.min(currentStep + 1, stepCount),\n      )}\n      disabled={currentStep === stepCount}\n    >\n      ต่อไป\n    </Button>\n  </div>\n);\n\nexport default PageNavigator;\n","import styled, { css } from 'styled-components';\nimport { lighten, transparentize } from 'polished';\nimport { theme } from '../theme';\n\nconst Pill = styled.span`\n  /* border: none; */\n  border-radius: 2px;\n  padding: 4px 2px;\n  background-color: ${(props) => transparentize(0.92, theme.colors[props.color])};\n  color: ${(props) => theme.colors[props.color]};\n  font-weight: ${(props) => (props.bold ? 'bold' : 'inherit')};\n  /* font-weight: bold; */\n  /* border: 1px solid ${(props) => lighten(0.4, theme.colors[props.color])};; */\n`;\n\nexport default Pill;\n","// globalStyles.js\nimport { createGlobalStyle } from 'styled-components';\nimport { theme } from '../theme';\n\nconst GlobalStyle = createGlobalStyle`\n\n  body {\n    margin: 0;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background-color: ${theme.colors.bg};\n    color: ${theme.colors.text};\n    font-family: 'Bai Jamjuree', sans-serif;\n  }\n\n  p {\n    margin: 0;\n    margin-bottom: 1rem;\n    line-height: 1.5;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    font-family: 'Mitr',\n      sans-serif;\n      line-height: 1;\n  }\n\n  h1 {\n    font-size: 3rem;\n  }\n\n  a:any-link {\n    color: inherit;\n    text-decoration: underline;\n  }\n\n  a:hover {\n    opacity: .7;\n  }\n\n  .axis line, .axis path {\n    stroke: ${theme.colors.text};\n  }\n\n  .axis text {\n    fill: ${theme.colors.text};\n    font-family: 'Bai Jamjuree', sans-serif;\n  }\n\n  @keyframes blink-from-none {\n    0% {\n      opacity: 0.4;\n    }\n\n    50% {\n      opacity: 0.8;\n    }\n\n    100% {\n      opacity: 0.4;\n    }\n  }\n\n  @keyframes blink-from-full {\n    0% {\n      opacity: 1;\n    }\n\n    50% {\n      opacity: 0.4;\n    }\n\n    100% {\n      opacity: 1;\n    }\n  }\n\n  button {\n    cursor: pointer;\n  }\n\n  button:hover {\n    opacity: .7;\n  }\n`;\n\nexport default GlobalStyle;\n","/* eslint-disable max-len */\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport { D3Component } from './components/D3Component';\nimport { useNetIncome, useTaxCalculation } from './utils/TaxCalculation';\nimport StoryIndicator from './components/StoryIndicator';\nimport ScrollBox from './components/ScrollBox';\nimport Slider from './components/Slider';\nimport ScrollInstruction from './components/ScrollInstruction';\n\nimport { taxBrackets } from './data/TaxBrackets';\nimport { theme } from './theme';\n\nimport Button from './components/Button';\nimport Step from './components/Step';\nimport CoverPage from './pages/CoverPage';\nimport EndingPage from './pages/EndingPage';\nimport PageNavigator from './components/PageNavigator';\nimport Pill from './components/Pill';\nimport GlobalStyle from './styles/globalStyles';\n\nconst ChartContainer = styled.div`\n  /* padding: 30px; */\n  width: 100%;\n  margin-top: 10px;\n  /* height: 50vh; */\n  flex: 1;\n  position: relative;\n  transition: all 0.2s;\n`;\n\nconst SideContainer = styled.div`\n  height: 220px;\n  /* overflow-y: auto; */\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n\n  @media (min-width: 480px) {\n    height: auto;\n    margin-left: 80px;\n    width: 40%;\n    min-width: 300px;\n    max-width: 400px;\n    justify-content: center;\n  }\n`;\n\nconst ContentContainer = styled.div`\n  /* height: 200px; */\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  flex-grow: 1;\n  position: relative;\n\n  @media (min-width: 480px) {\n    min-height: 240px;\n    flex-grow: 0;\n  }\n`;\n\nconst PageContainer = styled.div`\n  padding: 30px;\n  /* padding-top: 15px; */\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  gap: 10px;\n  flex-direction: column;\n  overflow: hidden;\n\n  @media (min-width: 480px) {\n    flex-direction: row;\n    padding: 50px;\n  }\n`;\n\nconst ControlsContainer = styled.div`\n  /* margin-top: 30px; */\n  display: flex;\n  /* grid-template-columns: auto auto 80px; */\n  /* column-gap: 10px; */\n  /* row-gap: 15px; */\n  gap: 0.5rem;\n  flex-direction: column;\n  /* margin-bottom: 30px; */\n  align-content: center;\n\n  label {\n    white-space: nowrap;\n  }\n`;\n\nconst ControlsGrid = styled.div`\n  /* margin-top: 30px; */\n  display: grid;\n  grid-template-columns: auto auto 80px;\n  column-gap: 10px;\n  row-gap: 5px;\n  /* margin-bottom: 30px; */\n  align-content: center;\n\n  label {\n    white-space: nowrap;\n  }\n`;\n\nconst InputGroup = styled.div`\n  /* margin-bottom: 10px; */\n  display: flex;\n  flex-direction: column;\n`;\n\nfunction NetIncomeEquation({\n  income, expense, allowance, highlight = {},\n}) {\n  const netIncome = useNetIncome(income, expense, allowance);\n  return (\n    <div style={{ display: 'flex', alignItems: 'center', marginTop: '20px' }}>\n      <div style={{ flexGrow: 1, textAlign: 'center' }}>\n        <small\n          style={{\n            color: highlight.income\n              ? theme.colors.incomeText\n              : theme.colors.textMuted,\n          }}\n        >\n          รายได้\n        </small>\n        <br />\n        <small\n          style={{\n            fontWeight: highlight.income ? 'bold' : 'normal',\n            color: highlight.income\n              ? theme.colors.text\n              : theme.colors.textMuted,\n          }}\n        >\n          {Math.round(income).toLocaleString()}\n        </small>\n      </div>\n      <div style={{ color: theme.colors.textMuted }}>−</div>\n      <div style={{ flexGrow: 1, textAlign: 'center' }}>\n        <small\n          style={{\n            color: highlight.expense\n              ? theme.colors.expenseText\n              : theme.colors.textMuted,\n          }}\n        >\n          ค่าใช้จ่าย\n        </small>\n        <br />\n        <small\n          style={{\n            fontWeight: highlight.expense ? 'bold' : 'normal',\n            color: highlight.expense\n              ? theme.colors.text\n              : theme.colors.textMuted,\n          }}\n        >\n          {Math.round(expense).toLocaleString()}\n        </small>\n      </div>\n      <div style={{ color: theme.colors.textMuted }}>−</div>\n      <div style={{ flexGrow: 1, textAlign: 'center' }}>\n        <small\n          style={{\n            color: highlight.allowance\n              ? theme.colors.allowanceText\n              : theme.colors.textMuted,\n          }}\n        >\n          ลดหย่อน\n        </small>\n        <br />\n        <small\n          style={{\n            fontWeight: highlight.allowance ? 'bold' : 'normal',\n            color: highlight.allowance\n              ? theme.colors.text\n              : theme.colors.textMuted,\n          }}\n        >\n          {Math.round(allowance).toLocaleString()}\n        </small>\n      </div>\n      <div style={{ color: theme.colors.textMuted }}>=</div>\n      <div style={{ flexGrow: 1, textAlign: 'center' }}>\n        <small\n          style={{\n            color: highlight.netIncome\n              ? theme.colors.incomeText\n              : theme.colors.textMuted,\n          }}\n        >\n          เงินได้สุทธิ\n        </small>\n        <br />\n        <small\n          style={{\n            fontWeight: highlight.netIncome ? 'bold' : 'normal',\n            color: highlight.netIncome\n              ? theme.colors.text\n              : theme.colors.textMuted,\n          }}\n        >\n          {Math.round(netIncome).toLocaleString()}\n        </small>\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  // income stated & computed numbers\n  const [salary, setSalary] = useState(300_000);\n  const [incomeFreelance, setIncomeFreelance] = useState(50_000);\n  const [incomeMerchant, setIncomeMerchant] = useState(50_000);\n  const [enableIncome, setEnableIncome] = useState(false);\n  const [enableIncomeExtra, setEnableIncomeExtra] = useState(false);\n  const salaryDisplay = useMemo(\n    () => (enableIncome ? salary : 0),\n    [enableIncome, salary],\n  );\n  const incomeFreelanceDisplay = useMemo(\n    () => (enableIncomeExtra ? incomeFreelance : 0),\n    [enableIncomeExtra, incomeFreelance],\n  );\n  const incomeMerchantDisplay = useMemo(\n    () => (enableIncomeExtra ? incomeMerchant : 0),\n    [enableIncomeExtra, incomeMerchant],\n  );\n  const income = useMemo(\n    () => (+salaryDisplay + +incomeFreelanceDisplay + +incomeMerchantDisplay),\n    [salaryDisplay, incomeMerchantDisplay, incomeFreelanceDisplay],\n  );\n\n  // expense stated & computed numbers\n  const [enableExpense, setEnableExpense] = useState(false);\n  /* eslint-disable-next-line camelcase */\n  const expense40_1_2 = useMemo(\n    () => (enableExpense ? Math.min((+salary + +incomeFreelance) * 0.5, 100_000) : 0),\n    [salary, incomeFreelance, enableExpense],\n  );\n  /* eslint-disable-next-line camelcase */\n  const expense40_8 = useMemo(\n    () => (enableExpense ? incomeMerchant * 0.6 : 0),\n    [incomeMerchant, enableExpense],\n  );\n  const expense = useMemo(\n    /* eslint-disable-next-line camelcase */\n    () => (enableExpense ? +expense40_1_2 + +expense40_8 : 0),\n    /* eslint-disable-next-line camelcase */\n    [expense40_1_2, expense40_8, enableExpense],\n  );\n\n  // allowance stated & computed numbers\n  const [enableAllowance, setEnableAllowance] = useState(false);\n  const [allowance, setAllowance] = useState(60_000);\n  const allowanceDisplay = useMemo(\n    () => (enableAllowance ? allowance : 0),\n    [allowance, enableAllowance],\n  );\n\n  const [isGroupIncome, setGroupIncome] = useState(false);\n\n  const netIncome = useNetIncome(income, expense, allowanceDisplay);\n  const taxFinal = useTaxCalculation(netIncome, taxBrackets);\n\n  const [enableTransition, setEnableTransition] = useState(true);\n  const [currentNarrativeStep, setCurrentNarrativeStep] = useState(-1);\n\n  // display parameters\n  const [isPullTax, setPullTax] = useState(false);\n  const [isActivateTax, setActivateTax] = useState(false);\n  const [showBrackets, setShowBrackets] = useState(false);\n  const [showBreakdown, setShowBreakdown] = useState(true);\n  const [showDragInstruction, setShowDragInstruction] = useState(true);\n\n  // หลายคนอาจจะเคยเห็นตาราง \"อัตราภาษีเงินได้บุคคลธรรมดา\" หน้าตาแบบนี้ แต่ยังไม่เข้าใจว่ามันคำนวณยังไงกันแน่ เราจะมาทำตารางนี้ให้เห็นภาพกัน\n  // ถ้าเราเอาตารางอัตราภาษีมาพล็อตแบบนี้ ก็จะได้กราฟหน้าตาเป็น \"ขั้นบันได\" แบบนี้\n  // กติกาของ \"ภาษีเงินได้บุคคลธรรมดา\" ก็คือ ถ้า \"รายได้สุทธิ\" ของเราเข้าไปอยู่ในกล่องขั้นบันไดภาษีสีแดง ส่วนที่อยู่ในกล่องก็คือภาษีที่เราจะต้องจ่าย\n  // ซึ่ง \"รายได้สุทธิ\" ก็คือรายได้หลังหัก \"ค่าใช้จ่าย\" และ \"ค่าลดหย่อน\" แล้ว [สมการ]\n\n  const narrativeSteps = [\n    <>\n      <p style={{ textAlign: 'center' }}>\n        <Pill color=\"taxText\">ภาษีเงินได้บุคคลธรรมดา</Pill>\n        {' '}\n        คิดจาก\n        {' '}\n        <Pill color=\"incomeText\">เงินได้สุทธิ</Pill>\n        {' '}\n        ซึ่งคำนวณจากรายได้ของเราหลังจากหักค่าใช้จ่ายแล้ว\n      </p>\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <div style={{ flexGrow: 1, textAlign: 'center' }}>\n          <Pill color=\"incomeText\">เงินได้สุทธิ</Pill>\n        </div>\n        <div>=</div>\n        <div style={{ flexGrow: 1, textAlign: 'center' }}>\n          <Pill color=\"incomeText\">รายได้</Pill>\n        </div>\n        <div>−</div>\n        <div style={{ flexGrow: 1, textAlign: 'center' }}>\n          <Pill color=\"expenseText\">ค่าใช้จ่าย</Pill>\n        </div>\n        <div>−</div>\n        <div style={{ flexGrow: 1, textAlign: 'center' }}>\n          <Pill color=\"allowanceText\">ค่าลดหย่อน</Pill>\n        </div>\n\n        {/* <div style={{ flexGrow: 1, flexBasis: 0, textAlign: \"center\" }}>\n          <small>ภาษี</small>\n          <br />\n          <b>{numberWithCommas(Math.ceil(taxFinal))} </b>\n        </div> */}\n      </div>\n    </>,\n\n    <>\n      <ControlsContainer>\n        <p style={{ textAlign: 'center' }}>\n          ทีนี้ สมมติว่าคุณทำงานได้เงินเดือนรวมทั้งปี\n          {' '}\n          <Pill color=\"incomeText\" bold>{salary.toLocaleString()}</Pill>\n          {' '}\n          บาท\n        </p>\n        <div style={{ display: 'flex' }}>\n          <label\n            htmlFor=\"salaryinput\"\n            style={{ flexGrow: 1 }}\n          >\n            เงินเดือน (ทั้งปี รวมโบนัส)\n          </label>\n          <input\n            id=\"salaryinput\"\n            type=\"number\"\n            step={10_000}\n            min={0}\n            value={salary}\n            onChange={(e) => setSalary(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={salary}\n          onAfterChange={setSalary}\n          color={theme.colors.income}\n        />\n      </ControlsContainer>\n      {/* <small style={{ marginLeft: \"auto\", color: theme.colors.textMuted }}>\n        เงินเดือน &times; 12 = {numberWithCommas(income)} บาท/ปี\n      </small> */}\n      <NetIncomeEquation\n        income={income}\n        expense={expense}\n        allowance={allowanceDisplay}\n        highlight={{ income: true }}\n      />\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        และสมมติว่าคุณทำฟรีแลนซ์อีก\n        {' '}\n        <Pill color=\"incomeText\" bold>{incomeFreelance.toLocaleString()}</Pill>\n        {' '}\n        บาท กับขายของออนไลน์ได้มาอีก\n        {' '}\n        <Pill color=\"incomeText\" bold>{incomeMerchant.toLocaleString()}</Pill>\n        {' '}\n        บาท\n      </p>\n      <ControlsGrid style={{ gridTemplateColumns: '80px auto 80px' }}>\n        <label style={{ flexGrow: 1 }}>\n          <small>\n            ฟรีแลนซ์\n            {' '}\n            <span style={{ color: theme.colors.textMuted }}>/ ปี</span>\n          </small>\n        </label>\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={incomeFreelance}\n          onAfterChange={setIncomeFreelance}\n          color={theme.colors.income}\n        />\n        <div>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={incomeFreelance}\n            onChange={(e) => setIncomeFreelance(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n\n        <label style={{ flexGrow: 1 }}>\n          <small>\n            ขายของ\n            {' '}\n            <span style={{ color: theme.colors.textMuted }}>/ ปี</span>\n          </small>\n        </label>\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={incomeMerchant}\n          onAfterChange={setIncomeMerchant}\n          color={theme.colors.income}\n        />\n        <div>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={incomeMerchant}\n            onChange={(e) => setIncomeMerchant(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n      </ControlsGrid>\n      <NetIncomeEquation\n        income={income}\n        expense={expense}\n        allowance={allowanceDisplay}\n        highlight={{ income: true }}\n      />\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        <Pill color=\"expenseText\">ค่าใช้จ่าย</Pill>\n        ที่หักได้ คิดจาก\n        <Pill color=\"incomeText\">รายได้</Pill>\n        แต่ละประเภท\n        <br />\n        ซึ่งตามภาษาภาษีแล้ว...\n      </p>\n      <p\n        style={{\n          display: 'grid',\n          gridTemplateColumns: 'auto auto',\n          columnGap: '10px',\n          marginBottom: 0,\n        }}\n      >\n        <span style={{ textAlign: 'right' }}>เงินเดือน</span>\n        <span>นับเป็น &ldquo;เงินได้ประเภทที่ 1&rdquo;</span>\n        <span style={{ textAlign: 'right' }}>เงินจากฟรีแลนซ์</span>\n        <span>นับเป็น &ldquo;เงินได้ประเภทที่ 2&rdquo;</span>\n        <span style={{ textAlign: 'right' }}>เงินจากขายของ</span>\n        <span>นับเป็น &ldquo;เงินได้ประเภทที่ 8&rdquo;</span>\n      </p>\n      {/* <p style={{ textAlign: \"center\", color: theme.colors.textMuted }}>\n        *ตามประมวลรัษฎากร มาตรา 40\n      </p> */}\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        แล้วมีรายได้เท่านี้ จะหัก\n        <Pill color=\"expenseText\">ค่าใช้จ่าย</Pill>\n        ได้เท่าไหร่?\n      </p>\n      <div\n        style={{\n          display: 'grid',\n          gridTemplateColumns: 'auto auto',\n          alignItems: 'center',\n          columnGap: '10px',\n          rowGap: '10px',\n        }}\n      >\n        <span style={{ textAlign: 'right' }}>\n          <b>\n            เงินเดือน\n            {' '}\n            {incomeFreelance > 0 && '+ ฟรีแลนซ์'}\n          </b>\n          <br />\n          <span style={{ color: theme.colors.textSecondary }}>\n            หักได้ 50% ของรายได้\n            <br />\n            (รวมไม่เกิน 100,000 บาท)\n          </span>\n        </span>\n        <span>\n          →\n          {' '}\n          <Pill color=\"expenseText\" bold>{expense40_1_2.toLocaleString()}</Pill>\n          {' '}\n          บาท\n        </span>\n        {incomeMerchant > 0 && (\n          <>\n            <span style={{ textAlign: 'right' }}>\n              <b>ขายของ</b>\n              <br />\n              <span style={{ color: theme.colors.textSecondary }}>\n                หักได้อย่างน้อย 60%\n              </span>\n            </span>\n            <span>\n              →\n              {' '}\n              <Pill color=\"expenseText\" bold>{expense40_8.toLocaleString()}</Pill>\n              {' '}\n              บาท\n            </span>\n          </>\n        )}\n      </div>\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center', marginBottom: 0 }}>\n        ดังนั้น คุณจะหักค่าใช้จ่ายได้รวม\n        <br />\n        <b style={{ color: theme.colors.expenseText }}>\n          <Pill color=\"expenseText\" bold>{Math.round(expense).toLocaleString()}</Pill>\n        </b>\n        {' '}\n        บาท\n      </p>\n      <NetIncomeEquation\n        income={income}\n        expense={expense}\n        allowance={allowanceDisplay}\n        highlight={{ expense: true }}\n      />\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        นอกจาก\n        <Pill color=\"expenseText\">ค่าใช้จ่าย</Pill>\n        แล้ว ทุกคน\n        <br />\n        สามารถหัก &ldquo;ค่าลดหย่อนส่วนตัว&rdquo;\n        <br />\n        ได้ทันทีอีก\n        {' '}\n        <Pill color=\"allowanceText\" bold>60,000</Pill>\n        {' '}\n        บาท!\n      </p>\n      <p style={{ textAlign: 'center', marginBottom: 0 }}>\n        และ\n        <Pill color=\"allowanceText\">ค่าลดหย่อน</Pill>\n        ก็มาจากสิ่งอื่นๆ ได้อีก\n        <br />\n        เช่น การบริจาคเงิน ค่าเบี้ยประกันต่างๆ ฯลฯ\n      </p>\n    </>,\n\n    <>\n      {/* <p>ลดหย่อนส่วนตัวได้ 60,000 บาท</p> */}\n      <ControlsContainer>\n        <div style={{ display: 'flex' }}>\n          <label style={{ flexGrow: 1 }}>ค่าลดหย่อน</label>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={allowance}\n            onChange={(e) => setAllowance(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n        <Slider\n          min={60_000}\n          max={income - expense}\n          step={10_000}\n          value={allowance}\n          onAfterChange={setAllowance}\n          color={theme.colors.allowance}\n        />\n      </ControlsContainer>\n      <small style={{ marginLeft: 'auto', color: theme.colors.textMuted }}>\n        ลดหย่อนส่วนตัวได้ 60,000 บาท\n      </small>\n      <NetIncomeEquation\n        income={income}\n        expense={expense}\n        allowance={allowanceDisplay}\n        highlight={{ allowance: true }}\n      />\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center', marginBottom: 0 }}>\n        ดังนั้นเงินได้สุทธิของคุณคือ\n        <br />\n        <Pill color=\"incomeText\" bold>\n          {Math.round(netIncome).toLocaleString()}\n        </Pill>\n        {' '}\n        บาท\n      </p>\n      <NetIncomeEquation\n        income={income}\n        expense={expense}\n        allowance={allowanceDisplay}\n        highlight={{\n          income: true,\n          expense: true,\n          allowance: true,\n          netIncome: true,\n        }}\n      />\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center', marginBottom: 0 }}>\n        เมื่อคำนวณ\n        <Pill color=\"incomeText\">เงินได้สุทธิ</Pill>\n        ได้แล้ว\n        <br />\n        จะต้องนำตัวเลขที่ได้ไปเข้า\n        <Pill color=\"taxText\">ขั้นบันไดภาษี</Pill>\n        <br />\n        เพื่อคำนวณภาษีที่จะต้องจ่าย\n      </p>\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        ดังนั้น ภาษีเงินได้บุคคลธรรมดา\n        <br />\n        ที่คุณจะต้องเสียคือ\n        {' '}\n        <Pill color=\"taxText\" bold>\n          {Math.ceil(taxFinal).toLocaleString()}\n        </Pill>\n        {' '}\n        บาท\n        <br />\n        หรือเป็นประมาณ\n        {' '}\n        <Pill color=\"taxText\" bold>\n          {((taxFinal / income) * 100).toFixed(1)}\n          %\n        </Pill>\n        {' '}\n        ของเงินได้ทั้งปี\n      </p>\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.incomeText }}>รายได้</small>\n          <br />\n          <b>\n            {income.toLocaleString()}\n          </b>\n        </div>\n        <div style={{ color: theme.colors.textMuted }}>→</div>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.incomeText }}>เงินได้สุทธิ</small>\n          <br />\n          <b>\n            {netIncome?.toLocaleString()}\n          </b>\n        </div>\n        <div style={{ color: theme.colors.textMuted }}>→</div>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.taxText }}>ภาษี</small>\n          <br />\n          <b>\n            {Math.ceil(taxFinal).toLocaleString()}\n            {' '}\n          </b>\n        </div>\n      </div>\n    </>,\n\n    <ScrollBox\n      style={{ height: '500px' }}\n      onScroll={() => {\n        setShowDragInstruction(false);\n      }}\n    >\n      <ScrollInstruction visible={showDragInstruction} />\n      <p style={{ marginBottom: '0.5rem' }}>\n        <b>ลองปรับตัวเลขดู</b>\n      </p>\n      <div\n        style={{\n          margin: '1rem  0 0.5rem',\n          fontWeight: 'bold',\n          color: theme.colors.incomeText,\n          display: 'flex',\n        }}\n      >\n        <div style={{ flexGrow: 1 }}>รายได้</div>\n        <div>\n          {income.toLocaleString()}\n          {' '}\n          บาท\n        </div>\n      </div>\n      <ControlsGrid style={{ gridTemplateColumns: '80px auto 80px' }}>\n        <label style={{ flexGrow: 1 }}>\n          <small>เงินเดือน</small>\n        </label>\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={salary}\n          onAfterChange={setSalary}\n          color={theme.colors.income}\n        />\n        <div>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={salary}\n            onChange={(e) => setSalary(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n\n        <label style={{ flexGrow: 1 }}>\n          <small>ฟรีแลนซ์</small>\n        </label>\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={incomeFreelance}\n          onAfterChange={setIncomeFreelance}\n          color={theme.colors.income}\n        />\n        <div>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={incomeFreelance}\n            onChange={(e) => setIncomeFreelance(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n\n        <label style={{ flexGrow: 1 }}>\n          <small>ขายของ</small>\n        </label>\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={incomeMerchant}\n          onAfterChange={setIncomeMerchant}\n          color={theme.colors.income}\n        />\n        <div>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={incomeMerchant}\n            onChange={(e) => setIncomeMerchant(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n        {/* <small\n          style={{\n            display: \"block\",\n            gridColumn: \"1 / -1\",\n            textAlign: \"right\",\n            marginLeft: \"auto\",\n            color: theme.colors.textMuted,\n            marginTop: \"-10px\",\n          }}\n        >\n          เงินเดือน &times; 12 = รายได้ <b>{numberWithCommas(income)}</b> บาท/ปี\n        </small> */}\n      </ControlsGrid>\n\n      <div\n        style={{\n          margin: '1rem 0 0.5rem',\n          fontWeight: 'bold',\n          color: theme.colors.expenseText,\n          display: 'flex',\n        }}\n      >\n        <div style={{ flexGrow: 1 }}>ค่าใช้จ่าย</div>\n        <div>\n          {expense.toLocaleString()}\n          {' '}\n          บาท\n        </div>\n      </div>\n      <ControlsGrid>\n        <label style={{ flexGrow: 1 }}>\n          <small>คิดจากเงินเดือน + ฟรีแลนซ์</small>\n        </label>\n        <div style={{ gridColumn: '2 / -1', textAlign: 'right' }}>\n          <small>\n            หักได้\n            {' '}\n            {Math.round(expense40_1_2).toLocaleString()}\n            {' '}\n            บาท\n          </small>\n        </div>\n\n        <label style={{ flexGrow: 1 }}>\n          <small>คิดจากขายของ</small>\n        </label>\n        <div style={{ gridColumn: '2 / -1', textAlign: 'right' }}>\n          <small>\n            หักได้\n            {' '}\n            {Math.round(expense40_8).toLocaleString()}\n            {' '}\n            บาท\n          </small>\n        </div>\n      </ControlsGrid>\n      <div\n        style={{\n          margin: '1rem  0 0.5rem',\n          fontWeight: 'bold',\n          color: theme.colors.allowanceText,\n          display: 'flex',\n        }}\n      >\n        <div style={{ flexGrow: 1 }}>ค่าลดหย่อน</div>\n        <div>\n          {allowance.toLocaleString()}\n          {' '}\n          บาท\n        </div>\n      </div>\n      <ControlsGrid style={{ gridTemplateColumns: '80px auto 80px' }}>\n        <label style={{ flexGrow: 1 }}>\n          <small>ค่าลดหย่อน</small>\n        </label>\n        <Slider\n          min={60_000}\n          max={income - expense}\n          step={10_000}\n          value={allowance}\n          onAfterChange={setAllowance}\n          color={theme.colors.allowance}\n        />\n        <input\n          type=\"number\"\n          step={10000}\n          min={0}\n          value={allowance}\n          onChange={(e) => setAllowance(e.target.value)}\n          style={{ width: '80px' }}\n        />\n      </ControlsGrid>\n      <hr style={{ margin: '1rem 0', opacity: 0.2 }} />\n      <div style={{ display: 'flex', alignItems: 'center', marginTop: '10px' }}>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.incomeText }}>รายได้</small>\n          <br />\n          <span style={{ color: theme.colors.text }}>\n            {income.toLocaleString()}\n          </span>\n        </div>\n        <div>→</div>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.incomeText }}>เงินได้สุทธิ</small>\n          <br />\n          <span style={{ color: theme.colors.text }}>\n            {Math.round(netIncome).toLocaleString()}\n          </span>\n        </div>\n        <div>→</div>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.taxText }}>ภาษี</small>\n          <br />\n          <b>\n            {Math.ceil(taxFinal).toLocaleString()}\n            {' '}\n            <small>\n              (\n              {((taxFinal / income) * 100).toFixed(1)}\n              %)\n\n            </small>\n          </b>\n        </div>\n      </div>\n    </ScrollBox>,\n    // </div>,\n  ];\n\n  useEffect(() => {\n    setEnableIncome(currentNarrativeStep >= 1);\n    setEnableIncomeExtra(currentNarrativeStep >= 2);\n    setEnableExpense(currentNarrativeStep >= 4);\n    setGroupIncome(currentNarrativeStep >= 5);\n    setShowBreakdown(!(currentNarrativeStep >= 6));\n    setTimeout(() => setEnableAllowance(currentNarrativeStep >= 6), 400);\n    setShowBrackets(currentNarrativeStep >= 9);\n    setActivateTax(currentNarrativeStep >= 10);\n  }, [currentNarrativeStep, enableAllowance, income, expense]);\n\n  return (\n    <>\n      <GlobalStyle />\n      <StoryIndicator\n        currentStep={currentNarrativeStep}\n        totalSteps={narrativeSteps.length + 1}\n        style={{ marginBottom: '20px' }}\n      />\n      <PageContainer>\n        <CoverPage\n          currentNarrativeStep={currentNarrativeStep}\n          setCurrentNarrativeStep={setCurrentNarrativeStep}\n        />\n        <EndingPage\n          currentNarrativeStep={currentNarrativeStep}\n          setCurrentNarrativeStep={setCurrentNarrativeStep}\n          narrativeStepsCount={narrativeSteps.length}\n        />\n\n        <ChartContainer>\n          <D3Component\n            incomeGroups={[\n              {\n                label: `เงินเดือน${incomeFreelanceDisplay > 0 ? ' + ฟรีแลนซ์' : ''\n                }`,\n                income: +salaryDisplay + +incomeFreelanceDisplay,\n                expense: expense40_1_2,\n              },\n              {\n                label: 'ขายของ',\n                income: incomeMerchantDisplay,\n                expense: expense40_8,\n              },\n            ]}\n            isGroupIncome={isGroupIncome}\n            showBreakdown={showBreakdown}\n            income={income}\n            expense={expense}\n            allowance={allowanceDisplay}\n            isPullTax={isPullTax}\n            setPullTax={setPullTax}\n            enableTransition={enableTransition}\n            isActivateTax={isActivateTax}\n            showBrackets={showBrackets}\n            isBlink={{\n              tax: currentNarrativeStep === 10,\n              income: currentNarrativeStep === 8,\n              // expense: currentNarrativeStep == 2,\n              // allowance: currentNarrativeStep == 3,\n            }}\n            isFocusIncome={currentNarrativeStep >= 8}\n          />\n        </ChartContainer>\n        <SideContainer>\n          <ContentContainer>\n            {narrativeSteps.map((step, i) => (\n              <>\n                <Step status={Math.sign(i - currentNarrativeStep)}>{step}</Step>\n              </>\n            ))}\n          </ContentContainer>\n          <PageNavigator\n            currentStep={currentNarrativeStep}\n            setCurrentStep={setCurrentNarrativeStep}\n            stepCount={narrativeSteps.length}\n          />\n        </SideContainer>\n      </PageContainer>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  /* eslint-disable-next-line no-undef */\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}