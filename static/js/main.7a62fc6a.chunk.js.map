{"version":3,"sources":["components/D3Component.jsx","utils/display.js","components/StoryIndicator.jsx","App.js","utils/TaxCalculation.js","reportWebVitals.js","index.js"],"names":["SvgContainer","styled","div","Fade","CartesianSvg","svg","D3Component","income","expense","allowance","taxBrackets","padding","left","right","top","bottom","isPullTax","isActivateTax","setPullTax","x","transitionTime","enableTransition","useDimensions","onResize","observe","unobserve","width","height","entry","transitionDuration","useMemo","d3Container","useRef","cleanedExpense","Math","max","cleanedAllowance","netIncome","scaleIncome","useCallback","d3","domain","range","barWidth","scaleTaxRate","axisIncomeLeft","tickFormat","axisIncomeRight","axisTaxRate","generateTaxBracketsPathD","d","pathD","map","taxRate","minNetIncome","maxNetIncome","join","length","useLayoutEffect","current","select","attr","transition","duration","style","console","log","text","bracketLineGroups","selectAll","data","bracketLineGroupsEnter","enter","append","classed","merge","toString","replace","i","call","ref","id","className","transform","fill","fontSize","alignmentBaseline","textAnchor","fillOpacity","clip-path","onClick","numberWithCommas","StoryIndicatorContainer","StoryIndicatorItem","props","active","StoryIndicator","currentStep","totalSteps","steps","ChartContainer","SideContainer","Step","status","css","ContentContainer","PageContainer","ControlsContainer","Button","button","secondary","disabled","App","useState","setIncome","setExpense","setAllowance","setEnableTransition","currentNarrativeStep","setCurrentNarrativeStep","setActivateTax","useNetIncome","taxFinal","sumTax","remainingNetIncome","bracketRange","min","useTaxCalculation","type","value","onChange","e","target","onMouseDown","onMouseUp","step","color","display","alignItems","flexGrow","textAlign","flexBasis","ceil","narrativeSteps","useEffect","marginBottom","sign","marginTop","gap","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7a62fc6a.chunk.js","sourcesContent":["import React, { useRef, useEffect, useLayoutEffect, useMemo, useCallback, useState } from 'react';\r\nimport * as d3 from 'd3';\r\n// import { transition } from 'd3';\r\nimport useDimensions from \"react-cool-dimensions\";\r\nimport styled from 'styled-components';\r\nimport { useResizeDetector } from 'react-resize-detector';\r\nimport { transition } from 'd3';\r\n\r\n\r\nconst SvgContainer = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n`\r\n\r\nconst Fade = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 20%;\r\n    background: linear-gradient(to bottom, #222, #2220);\r\n`\r\n\r\nconst CartesianSvg = styled.svg`\r\n    & > g text {\r\n        transform: scale(1, -1);\r\n    }\r\n`\r\n\r\n// const transitionDuration = 1000\r\n\r\nexport const D3Component = ({\r\n    income,\r\n    expense,\r\n    allowance,\r\n    taxBrackets,\r\n    padding = {\r\n        left: 35,\r\n        right: 0,\r\n        top: 0,\r\n        bottom: 30,\r\n    },\r\n    isPullTax = false,\r\n    isActivateTax = true,\r\n    setPullTax = (x) => {},\r\n    transitionTime = 500,\r\n    enableTransition = true\r\n}) => {\r\n    const { observe, unobserve, width, height, entry } = useDimensions({\r\n        onResize: ({ observe, unobserve, width, height, entry }) => {\r\n            // Triggered whenever the size of the target is changed...\r\n\r\n            unobserve(); // To stop observing the current target element\r\n            observe(); // To re-start observing the current target element\r\n        },\r\n    });\r\n\r\n    const transitionDuration = useMemo(() => enableTransition ? transitionTime : 0, [enableTransition, transitionTime]);\r\n\r\n    const d3Container = useRef(null);\r\n\r\n    const cleanedExpense = useMemo(() => expense < (income - allowance) ? +expense : +Math.max(0, income - allowance), [income, expense]);\r\n    const cleanedAllowance = useMemo(() => allowance < income ? +allowance : +income, [income, allowance]);\r\n\r\n    const netIncome = useMemo(() => {\r\n        return Math.max(income - expense - allowance, 0);\r\n    }, [income, expense, allowance]);\r\n\r\n    const scaleIncome = useCallback(\r\n        d3.scaleLinear()\r\n            .domain([0, Math.max(300_000, income * 1.4)])\r\n            .range([0, height - padding.bottom])\r\n        , [height, income, padding])\r\n\r\n    const barWidth = useMemo(() => width - (padding.left + padding.right), [width, padding]);\r\n\r\n    const scaleTaxRate = useCallback(\r\n        d3.scaleLinear()\r\n            .domain([0, 1])\r\n            .range([0, barWidth])\r\n        , [income, width])\r\n\r\n    const axisIncomeLeft = useMemo(() => d3.axisLeft(scaleIncome)\r\n        .tickFormat(d3.format(\".3s\"))\r\n        , [scaleIncome]);\r\n    const axisIncomeRight = useMemo(() => d3.axisRight(scaleIncome), [scaleIncome]);\r\n    const axisTaxRate = useMemo(() => d3.axisBottom(scaleTaxRate).tickFormat(d3.format('.0%'))\r\n        , [scaleTaxRate]);\r\n\r\n    const numberWithCommas = (x) => x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\r\n\r\n    const generateTaxBracketsPathD = d => {\r\n        let pathD = 'M 0 0 ';\r\n        pathD += taxBrackets.map((d) => {\r\n            return ''\r\n                + `L ${scaleTaxRate(d.taxRate)} ${scaleIncome(d.minNetIncome)} `\r\n                + `L ${scaleTaxRate(d.taxRate)} ${scaleIncome(d.maxNetIncome)} `\r\n        }).join('')\r\n        pathD += `L 0 ${scaleIncome(taxBrackets[taxBrackets.length - 1].maxNetIncome)} `\r\n        pathD += `Z`\r\n        return pathD;\r\n    }\r\n\r\n    useLayoutEffect(() => {\r\n        if (d3Container.current) {\r\n\r\n            const svg = d3.select(d3Container.current);\r\n\r\n            svg.select('g.container')\r\n                .attr('transform', `translate(${padding.left}, ${padding.bottom})`);\r\n\r\n            svg.select('rect.net-income')\r\n                .attr('width', barWidth)\r\n                .transition().duration(transitionDuration)\r\n                .style('fill', '#08f')\r\n                .attr('height', Math.max(0, scaleIncome(netIncome)));\r\n\r\n            svg.select('rect.net-income-mask')\r\n                .attr('width', barWidth)\r\n                .transition().duration(transitionDuration)\r\n                // .style('fill', '#08f')\r\n                .attr('height', Math.max(0, scaleIncome(netIncome)));\r\n\r\n            console.log('netIncome + cleanedAllowance', netIncome + cleanedAllowance, cleanedAllowance, scaleIncome(cleanedAllowance))\r\n            svg.select('rect.expense')\r\n                .attr('width', barWidth)\r\n                .transition().duration(transitionDuration)\r\n                .style('fill', '#135')\r\n                .attr('y', scaleIncome(netIncome + cleanedAllowance))\r\n                .attr('height', Math.max(0, scaleIncome(cleanedExpense)));\r\n\r\n            svg.select('rect.allowance')\r\n                .attr('width', barWidth)\r\n                .transition().duration(transitionDuration)\r\n                .style('fill', '#147')\r\n                .attr('y', scaleIncome(netIncome))\r\n                .attr('height', Math.max(0, scaleIncome(cleanedAllowance)));\r\n\r\n            svg.select('text.net-income-text')\r\n                .text(`เงินได้สุทธิ`)// ${numberWithCommas(netIncome)} บาท`)\r\n                .attr('x', barWidth / 2)\r\n                .attr('y', -scaleIncome(netIncome / 2));\r\n\r\n            svg.select('text.net-expense-text')\r\n                .text(`ค่าลดหย่อน`)// ${numberWithCommas(allowance)} บาท`)\r\n                .attr('x', barWidth / 2)\r\n                .attr('y', -scaleIncome(netIncome + cleanedAllowance / 2));\r\n\r\n            svg.select('text.net-allowance-text')\r\n                .text(`ค่าใช้จ่าย`)// ${numberWithCommas(expense)} บาท`)\r\n                .attr('x', barWidth / 2)\r\n                .attr('y', -scaleIncome(income - expense / 2));\r\n\r\n            svg.select('path.tax-stairs-camouflage')\r\n                .attr('fill', '#222')\r\n                .transition().duration(transitionDuration)\r\n                .attr('opacity', isActivateTax ? 1 : 0)\r\n                .attr('d', generateTaxBracketsPathD)\r\n\r\n            svg.select('path.tax-stairs')\r\n                .attr('fill', '#f80')\r\n                .transition().duration(transitionDuration)\r\n                .attr('d', generateTaxBracketsPathD)\r\n                .attr('transform', isPullTax ? `translate(${-50}, 0)` : 'translate(0, 0)')\r\n                .style('opacity', isActivateTax && !isPullTax ? 1 : 0);\r\n\r\n            const bracketLineGroups = svg.select('g.tax-lines')\r\n                .selectAll('g')\r\n                .data(taxBrackets)\r\n\r\n            const bracketLineGroupsEnter = bracketLineGroups\r\n                .enter()\r\n                .append('g')\r\n                .classed('bracket', true)\r\n\r\n            bracketLineGroupsEnter.append('text').classed('bracket-rate-text', true)\r\n            bracketLineGroupsEnter.append('text').classed('bracket-min-text', true)\r\n            bracketLineGroupsEnter.append('rect').classed('bracket-rect', true)\r\n            bracketLineGroupsEnter.append('line').classed('bracket-line', true)\r\n\r\n            bracketLineGroups.merge(bracketLineGroupsEnter)\r\n                .select('rect')\r\n                .attr('x', 0)   // d => scaleTaxRate(d.taxRate))\r\n                .attr('width', d => scaleTaxRate(d.taxRate))\r\n                .style('fill-opacity', 0)\r\n                .style('stroke', '#f80')\r\n                .style(\"stroke-dasharray\", \"3, 3\")\r\n                .transition().duration(transitionDuration)\r\n                .attr('y', d => scaleIncome(d.minNetIncome))\r\n                .attr('height', d => scaleIncome(d.maxNetIncome - d.minNetIncome))\r\n\r\n            bracketLineGroups.merge(bracketLineGroupsEnter)\r\n                .select('line')\r\n                .attr('x1', 0)\r\n                .attr('x2', barWidth)\r\n                .style('stroke', '#f80')\r\n                .style(\"stroke-dasharray\", \"3, 3\")\r\n                .transition().duration(transitionDuration)\r\n                // .style('stroke-opacity', '0.4')\r\n                .attr('y1', d => scaleIncome(d.maxNetIncome))\r\n                .attr('y2', d => scaleIncome(d.maxNetIncome))\r\n\r\n            bracketLineGroups.merge(bracketLineGroupsEnter)\r\n                .select('text.bracket-rate-text')\r\n                .style('fill', '#fff')\r\n                .style('font-size', '0.75rem')\r\n                .style('text-anchor', 'end')\r\n                .attr('x', barWidth - 5)\r\n                .transition().duration(transitionDuration)\r\n                .text(d => `เริ่มคิดที่ ${numberWithCommas(d.minNetIncome)} บาท`)\r\n                .style('fill-opacity', (d, i) => i != 0 && scaleIncome(d.maxNetIncome - d.minNetIncome) > 20 ? 1 : 0)\r\n                .attr('y', d => -scaleIncome(d.minNetIncome) - 5)\r\n\r\n            bracketLineGroups.merge(bracketLineGroupsEnter)\r\n                .select('text.bracket-min-text')\r\n                .style('fill', '#fff')\r\n                .style('font-size', '0.75rem')\r\n                .attr('x', d => scaleTaxRate(d.taxRate) + 5)\r\n                .transition().duration(transitionDuration)\r\n                .text(d => `ภาษี ${d.taxRate * 100}%`)\r\n                // .text(d => scaleIncome(d.maxNetIncome - d.minNetIncome) > 150\r\n                //     ? `เริ่มคิดที่ ${numberWithCommas(d.minNetIncome)} บาท`\r\n                //     : `${d.taxRate * 100}%`)\r\n                .style('fill-opacity', (d, i) => i != 0 && scaleIncome(d.maxNetIncome - d.minNetIncome) > 20 ? 1 : 0)\r\n                .attr('y', d => -scaleIncome(d.minNetIncome) - 5)\r\n\r\n            // AXES\r\n\r\n            d3.select(\"g.axis-income-bottom\")\r\n                .attr(\"transform\", `translate(0, 0)`)\r\n                .transition().duration(transitionDuration)\r\n                .call(axisIncomeLeft);\r\n\r\n            d3.select(\"g.axis-tax-rate\")\r\n                // .attr(\"transform\", `translate(-10, 0)`)\r\n                .transition().duration(transitionDuration)\r\n                .call(axisTaxRate);\r\n        }\r\n    }, [\r\n        width, height,\r\n        d3Container,\r\n        isPullTax,\r\n        barWidth,\r\n        scaleIncome,\r\n        netIncome,\r\n        income,\r\n        expense,\r\n        allowance,\r\n        taxBrackets,\r\n        padding,\r\n        axisIncomeLeft,\r\n        axisIncomeRight,\r\n        axisTaxRate,\r\n        cleanedAllowance,\r\n        cleanedExpense,\r\n        scaleTaxRate\r\n    ]);\r\n\r\n    return (<>\r\n        <SvgContainer ref={observe}>\r\n            <Fade />\r\n            <CartesianSvg\r\n                id=\"chart\"\r\n                className=\"d3-component\"\r\n                width={width}\r\n                height={height}\r\n                ref={d3Container}\r\n            >\r\n                <defs>\r\n                    <clipPath id=\"net-income-mask\">\r\n                        <rect className=\"net-income-mask\" />\r\n                    </clipPath>\r\n                </defs>\r\n                <g transform={`translate(0, ${height}) scale(1, -1)`}>\r\n                    <g className=\"container\">\r\n                        <rect className=\"net-income\" />\r\n                        <rect className=\"expense\" />\r\n                        <rect className=\"allowance\" />\r\n                        <text className=\"net-income-text\" style={{\r\n                            fill: '#fff', fontSize: '0.75rem', alignmentBaseline: 'middle', textAnchor: 'middle', fillOpacity: 0.4\r\n                        }} />\r\n                        <text className=\"net-expense-text\" style={{\r\n                            fill: '#fff', fontSize: '0.75rem', alignmentBaseline: 'middle', textAnchor: 'middle', fillOpacity: 0.4\r\n                        }} />\r\n                        <text className=\"net-allowance-text\" style={{\r\n                            fill: '#fff', fontSize: '0.75rem', alignmentBaseline: 'middle', textAnchor: 'middle', fillOpacity: 0.4\r\n                        }} />\r\n                        <g className=\"tax-lines\" />\r\n                        <g className=\"axis-income-top\" />\r\n                        <g className=\"axis-income-bottom\" />\r\n                        <g className=\"axis-tax-rate\" />\r\n                        <path className=\"tax-stairs-camouflage\" clip-path=\"url(#net-income-mask)\" onClick={() => setPullTax(false)} />\r\n                        <path className=\"tax-stairs\" clip-path=\"url(#net-income-mask)\" onClick={() => setPullTax(!isPullTax)} />\r\n                    </g>\r\n                </g>\r\n            </CartesianSvg>\r\n        </SvgContainer>\r\n    </>);\r\n}","export const numberWithCommas = (x) => x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\r\n","import React, { useMemo } from 'react';\r\nimport styled from 'styled-components';\r\nimport * as d3 from 'd3'\r\n\r\nconst StoryIndicatorContainer = styled.div`\r\n    display: flex;\r\n    gap: 4px;\r\n`\r\n\r\nconst StoryIndicatorItem = styled.div`\r\n    height: 2px;\r\n    flex-grow: 1;\r\n    border-radius: 999;\r\n    background-color: #fff;\r\n    transition: opacity 0.2s;\r\n    opacity: ${props => props.active ? 1 : 0.4};\r\n`\r\n\r\nconst StoryIndicator = ({ currentStep = 0, totalSteps = 0, ...props }) => {\r\n    const steps = useMemo(() => d3.range(totalSteps), [totalSteps]);\r\n\r\n    return (\r\n        <>\r\n            <StoryIndicatorContainer {...props}>\r\n                {steps.map((d, i) => (\r\n                    <StoryIndicatorItem active={i <= currentStep} />\r\n                ))}\r\n            </StoryIndicatorContainer>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default StoryIndicator;","import { useEffect, useMemo, useState } from \"react\";\nimport { D3Component } from \"./components/D3Component\";\nimport styled, { css } from \"styled-components\";\nimport \"./App.css\";\nimport { numberWithCommas } from \"./utils/display\";\nimport { useNetIncome, useTaxCalculation } from \"./utils/TaxCalculation\";\nimport StoryIndicator from \"./components/StoryIndicator\";\n\nconst ChartContainer = styled.div`\n  /* padding: 30px; */\n  width: 100%;\n  /* height: 50vh; */\n  flex: 1;\n  position: relative;\n  transition: all 0.2s;\n`;\n\nconst SideContainer = styled.div`\n  height: 180px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n\n  @media (min-width: 768px) {\n    height: auto;\n    margin-left: 80px;\n    width: 400px;\n    max-width: 40%;\n    justify-content: center;\n  }\n`;\n\nconst Step = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  flex-grow: 1;\n  transition: all 0.5s;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n\n  ${(props) => {\n    switch (props.status) {\n      case -1:\n        return css`\n          transform: translateX(-100px);\n          opacity: 0;\n          pointer-events: none;\n        `;\n        break;\n      case 1:\n        return css`\n          transform: translateX(100px);\n          opacity: 0;\n          pointer-events: none;\n        `;\n        break;\n      default:\n        return css`\n          /* transform: translateX(-100px):  */\n          /* opacity: 0; */\n          /* pointer-events: none; */\n        `;\n        break;\n    }\n  }}\n`;\n\nconst ContentContainer = styled.div`\n  /* height: 200px; */\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  flex-grow: 1;\n  position: relative;\n\n  @media (min-width: 768px) {\n    height: 240px;\n    flex-grow: 0;\n  }\n`;\n\nconst PageContainer = styled.div`\n  padding: 30px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  gap: 10px;\n  flex-direction: column;\n\n  @media (min-width: 768px) {\n    flex-direction: row;\n    padding: 50px;\n  }\n`;\n\nconst ControlsContainer = styled.div`\n  /* margin-top: 30px; */\n  display: grid;\n  grid-template-columns: auto auto 80px;\n  column-gap: 10px;\n  row-gap: 15px;\n  flex-direction: column;\n  /* margin-bottom: 30px; */\n  align-content: center;\n\n  label {\n    white-space: nowrap;\n  }\n`;\n\nconst InputGroup = styled.div`\n  /* margin-bottom: 10px; */\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Button = styled.button`\n  border: none;\n  border-radius: 4px;\n  padding: 4px 8px;\n\n  ${props => props.secondary ? css`\n    border: 1px white solid;\n    background-color: transparent;\n    color: white;\n  ` : css`\n    background-color: white;\n  `}\n\n  ${props => props.disabled && css`\n    opacity: 0.4;\n  `}\n`\n\nfunction App() {\n  const [income, setIncome] = useState(0);\n  const [expense, setExpense] = useState(0);\n  const [allowance, setAllowance] = useState(0);\n  const [enableTransition, setEnableTransition] = useState(true);\n  const [currentNarrativeStep, setCurrentNarrativeStep] = useState(0);\n\n  const [isPullTax, setPullTax] = useState(false);\n  const [isActivateTax, setActivateTax] = useState(false);\n\n  const taxBrackets = [\n    {\n      minNetIncome: 0,\n      maxNetIncome: 150000,\n      taxRate: 0,\n    },\n    {\n      minNetIncome: 150000,\n      maxNetIncome: 300000,\n      taxRate: 0.05,\n    },\n    {\n      minNetIncome: 300000,\n      maxNetIncome: 500000,\n      taxRate: 0.1,\n    },\n    {\n      minNetIncome: 500000,\n      maxNetIncome: 750000,\n      taxRate: 0.15,\n    },\n    {\n      minNetIncome: 750000,\n      maxNetIncome: 1000000,\n      taxRate: 0.2,\n    },\n    {\n      minNetIncome: 1000000,\n      maxNetIncome: 2000000,\n      taxRate: 0.25,\n    },\n    {\n      minNetIncome: 2000000,\n      maxNetIncome: 5000000,\n      taxRate: 0.3,\n    },\n    {\n      minNetIncome: 5000000,\n      maxNetIncome: 999999999999,\n      taxRate: 0.35,\n    },\n  ];\n\n  const netIncome = useNetIncome(income, expense, allowance);\n  const taxFinal = useTaxCalculation(netIncome, taxBrackets);\n\n  const [narrativeSteps, _] = useState([\n    <>\n      <p>คำนวณภาษีเงินได้บุคคลธรรมดา</p>\n      <ControlsContainer>\n        <label>รายได้ต่อปี</label>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"10000000\"\n          value={income}\n          onChange={(e) => setIncome(e.target.value)}\n          onMouseDown={() => setEnableTransition(false)}\n          onMouseUp={() => setEnableTransition(true)}\n        />\n        <input\n          type=\"number\"\n          step={10000}\n          min={0}\n          value={income}\n          onChange={(e) => setIncome(e.target.value)}\n        />\n      </ControlsContainer>\n    </>,\n\n    <>\n      <p>ค่าลดหย่อน default 100,000 บาท</p>\n      <ControlsContainer>\n        <label>ค่าใช้จ่าย</label>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"1000000\"\n          value={expense}\n          onChange={(e) => setExpense(e.target.value)}\n        />\n        <input\n          type=\"number\"\n          step={10000}\n          min={0}\n          value={expense}\n          onChange={(e) => setExpense(e.target.value)}\n        />\n      </ControlsContainer>\n    </>,\n\n    <>\n      <p>ค่าลดหย่อน default 60,000 บาท</p>\n      <ControlsContainer>\n        <label>ค่าลดหย่อน</label>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"1000000\"\n          value={allowance}\n          onChange={(e) => setAllowance(e.target.value)}\n        />\n        <input\n          type=\"number\"\n          step={10000}\n          min={0}\n          value={allowance}\n          onChange={(e) => setAllowance(e.target.value)}\n        />\n      </ControlsContainer>\n    </>,\n\n    <>\n      <p>\n        \"ภาษีเงินได้บุคคลธรรมดา\" คิดจาก \"\n        <span style={{ color: \"#0af\" }}>เงินได้สุทธิ</span>\"\n      </p>\n      <div style={{ display: \"flex\", alignItems: \"center\" }}>\n        <div style={{ flexGrow: 1, textAlign: \"center\" }}>\n          <small>รายได้</small>\n          <br />\n          <small>{numberWithCommas(income)}</small>\n        </div>\n        <div>-</div>\n        <div style={{ flexGrow: 1, textAlign: \"center\" }}>\n          <small>ค่าใช้จ่าย</small>\n          <br />\n          <small>{numberWithCommas(expense)}</small>\n        </div>\n        <div>-</div>\n        <div style={{ flexGrow: 1, textAlign: \"center\" }}>\n          <small>ลดหย่อน</small>\n          <br />\n          <small>{numberWithCommas(allowance)}</small>\n        </div>\n        <div>=</div>\n        <div style={{ flexGrow: 1, textAlign: \"center\" }}>\n          <small style={{ color: \"#0af\" }}>เงินได้สุทธิ</small>\n          <br />\n          <b>{numberWithCommas(netIncome)} ฿</b>\n        </div>\n        {/* <div style={{ flexGrow: 1, flexBasis: 0, textAlign: \"center\" }}>\n          <small>ภาษี</small>\n          <br />\n          <b>{numberWithCommas(Math.ceil(taxFinal))} ฿</b>\n        </div> */}\n      </div>\n    </>,\n\n    <>\n      <p>\n        เมื่อคำนวณ \"เงินได้สุทธิ\" แล้ว จะต้องนำไปเข้า \"\n        <span style={{ color: \"#f90\" }}>ขั้นบันไดภาษี</span>\"\n        เพื่อคำนวณภาษีออกมา\n      </p>\n\n      <p>สีส้มคือสัดส่วนภาษีที่คุณต้องเสีย</p>\n      <div style={{ display: \"flex\", alignItems: \"center\" }}>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: \"center\" }}>\n          <small style={{ color: \"#0af\" }}>เงินได้สุทธิ</small>\n          <br />\n          {numberWithCommas(netIncome)} ฿\n        </div>\n        <div>🠖</div>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: \"center\" }}>\n          <small style={{ color: \"#f90\" }}>ภาษี</small>\n          <br />\n          <b>{numberWithCommas(Math.ceil(taxFinal))} ฿</b>\n        </div>\n      </div>\n    </>,\n  ]);\n\n  useEffect(() => {\n    if (currentNarrativeStep == 1) {\n      if (expense == 0) setExpense(100_000);\n    }\n\n    if (currentNarrativeStep == 1) {\n      if (allowance == 0) setAllowance(60_000);\n    }\n\n    if (currentNarrativeStep == 4) {\n      setActivateTax(true);\n    } else {\n      setActivateTax(false);\n    }\n  }, [currentNarrativeStep, allowance, expense]);\n\n  return (\n    <PageContainer>\n      <StoryIndicator\n        currentStep={currentNarrativeStep}\n        totalSteps={narrativeSteps.length}\n        style={{marginBottom: '20px'}}\n      />\n      <ChartContainer>\n        <D3Component\n          income={income}\n          expense={expense}\n          allowance={allowance}\n          taxBrackets={taxBrackets}\n          isPullTax={isPullTax}\n          setPullTax={setPullTax}\n          enableTransition={enableTransition}\n          isActivateTax={isActivateTax}\n        />\n      </ChartContainer>\n      <SideContainer>\n        <ContentContainer>\n          {narrativeSteps.map((step, i) => (\n            <>\n              <Step status={Math.sign(i - currentNarrativeStep)}>{step}</Step>\n            </>\n          ))}\n        </ContentContainer>\n        <div style={{ display: \"flex\", marginTop: \"20px\", gap: \"20px\" }}>\n          <Button\n            style={{ flexGrow: 1, flexBasis: 0, textAlign: \"center\" }}\n            onClick={() =>\n              setCurrentNarrativeStep(Math.max(currentNarrativeStep - 1, 0))\n            }\n            disabled={currentNarrativeStep === 0}\n            secondary\n          >\n            ย้อนกลับ\n          </Button>\n          <Button\n            style={{ flexGrow: 1, flexBasis: 0, textAlign: \"center\" }}\n            onClick={() =>\n              setCurrentNarrativeStep(\n                Math.min(currentNarrativeStep + 1, narrativeSteps.length - 1)\n              )\n            }\n            disabled={currentNarrativeStep === narrativeSteps.length - 1}\n          >\n            ต่อไป\n          </Button>\n        </div>\n      </SideContainer>\n    </PageContainer>\n  );\n}\n\nexport default App;\n","// export const useTaxCalc = ({income, expense, allowance}) => {\r\n//     return \r\n// }\r\n\r\nimport { useMemo } from \"react\"\r\n\r\nexport const useNetIncome = (income, expense, allowance) => {\r\n    return useMemo(() => {\r\n        return Math.max(0, income - expense - allowance);\r\n      }, [income, expense, allowance]);\r\n}\r\n\r\nexport const useTaxCalculation = (netIncome, taxBrackets) => {\r\n    return useMemo(() => {\r\n        let sumTax = 0;\r\n        let remainingNetIncome = netIncome;\r\n        for (let i in taxBrackets) {\r\n          let bracketRange =\r\n            taxBrackets[i].maxNetIncome - taxBrackets[i].minNetIncome;\r\n          let incomeInBracket = Math.min(remainingNetIncome, bracketRange);\r\n          let taxInBracket = incomeInBracket * taxBrackets[i].taxRate;\r\n          sumTax += taxInBracket;\r\n          remainingNetIncome -= bracketRange;\r\n          if (remainingNetIncome <= 0) break;\r\n        }\r\n        return sumTax;\r\n      }, [netIncome, taxBrackets]);\r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}