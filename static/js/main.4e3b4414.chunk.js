(this.webpackJsonptaxvisualizer=this.webpackJsonptaxvisualizer||[]).push([[0],{64:function(t,e,n){},69:function(t,e,n){},70:function(t,e,n){"use strict";n.r(e);var a,c,i,r,o,s,l,m,x=n(0),u=n.n(x),d=n(25),j=n.n(d),b=(n(64),n(7)),f=n(3),h=n(2),p=n(26),g=n(4),O=n(1),y=g.a.div(a||(a=Object(f.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n"]))),v=g.a.div(c||(c=Object(f.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 20%;\n    background: linear-gradient(to bottom, #222, #2220);\n"]))),N=g.a.svg(i||(i=Object(f.a)(["\n    & > g text {\n        transform: scale(1, -1);\n    }\n"]))),I=function(t){var e=t.income,n=t.expense,a=t.allowance,c=t.taxBrackets,i=t.padding,r=void 0===i?{left:35,right:0,top:0,bottom:50}:i,o=t.isPullTax,s=void 0!==o&&o,l=t.setPullTax,m=void 0===l?function(t){}:l,u=t.transitionTime,d=void 0===u?500:u,j=t.enableTransition,b=void 0===j||j,f=Object(p.a)({onResize:function(t){var e=t.observe,n=t.unobserve;t.width,t.height,t.entry;n(),e()}}),g=f.observe,I=(f.unobserve,f.width),w=f.height,k=(f.entry,Object(x.useMemo)((function(){return b?d:0}),[b,d])),M=Object(x.useRef)(null),R=Object(x.useMemo)((function(){return n<e-a?+n:+Math.max(0,e-a)}),[e,n]),C=Object(x.useMemo)((function(){return a<e?+a:+e}),[e,a]),S=Object(x.useMemo)((function(){return Math.max(e-n-a,0)}),[e,n,a]),B=Object(x.useCallback)(h.e().domain([0,Math.max(3e5,1.4*e)]).range([0,w-r.bottom]),[w,e,r]),T=Object(x.useMemo)((function(){return I-(r.left+r.right)}),[I,r]),z=Object(x.useCallback)(h.e().domain([0,1]).range([0,T]),[e,I]),A=Object(x.useMemo)((function(){return h.b(B).tickFormat(h.d(".3s"))}),[B]),F=Object(x.useMemo)((function(){return h.c(B)}),[B]),P=Object(x.useMemo)((function(){return h.a(z).tickFormat(h.d(".0%"))}),[z]),L=function(t){var e="M 0 0 ";return e+=c.map((function(t){return""+"L ".concat(z(t.taxRate)," ").concat(B(t.minNetIncome)," ")+"L ".concat(z(t.taxRate)," ").concat(B(t.maxNetIncome)," ")})).join(""),e+="L 0 ".concat(B(c[c.length-1].maxNetIncome)," "),e+="Z"};return Object(x.useLayoutEffect)((function(){if(M.current){var t=h.f(M.current);t.select("g.container").attr("transform","translate(".concat(r.left,", ").concat(r.bottom,")")),t.select("rect.net-income").attr("width",T).transition().duration(k).style("fill","#08f").attr("height",Math.max(0,B(S))),t.select("rect.net-income-mask").attr("width",T).transition().duration(k).attr("height",Math.max(0,B(S))),console.log("netIncome + cleanedAllowance",S+C,C,B(C)),t.select("rect.expense").attr("width",T).transition().duration(k).style("fill","#135").attr("y",B(S+C)).attr("height",Math.max(0,B(R))),t.select("rect.allowance").attr("width",T).transition().duration(k).style("fill","#147").attr("y",B(S)).attr("height",Math.max(0,B(C))),t.select("text.net-income-text").text("\u0e40\u0e07\u0e34\u0e19\u0e44\u0e14\u0e49\u0e2a\u0e38\u0e17\u0e18\u0e34").attr("x",T/2).attr("y",-B(S/2)),t.select("text.net-expense-text").text("\u0e04\u0e48\u0e32\u0e25\u0e14\u0e2b\u0e22\u0e48\u0e2d\u0e19").attr("x",T/2).attr("y",-B(S+C/2)),t.select("text.net-allowance-text").text("\u0e04\u0e48\u0e32\u0e43\u0e0a\u0e49\u0e08\u0e48\u0e32\u0e22").attr("x",T/2).attr("y",-B(e-n/2)),t.select("path.tax-stairs-camouflage").attr("fill","#222").transition().duration(k).attr("d",L),t.select("path.tax-stairs").attr("fill","#f80").transition().duration(k).attr("d",L).attr("transform",s?"translate(".concat(-50,", 0)"):"translate(0, 0)").style("opacity",s?0:1);var a=t.select("g.tax-lines").selectAll("g").data(c),i=a.enter().append("g").classed("bracket",!0);i.append("text").classed("bracket-rate-text",!0),i.append("text").classed("bracket-min-text",!0),i.append("rect").classed("bracket-rect",!0),i.append("line").classed("bracket-line",!0),a.merge(i).select("rect").attr("x",0).attr("width",(function(t){return z(t.taxRate)})).style("fill-opacity",0).style("stroke","#f80").style("stroke-dasharray","3, 3").transition().duration(k).attr("y",(function(t){return B(t.minNetIncome)})).attr("height",(function(t){return B(t.maxNetIncome-t.minNetIncome)})),a.merge(i).select("line").attr("x1",0).attr("x2",T).style("stroke","#f80").style("stroke-dasharray","3, 3").transition().duration(k).attr("y1",(function(t){return B(t.maxNetIncome)})).attr("y2",(function(t){return B(t.maxNetIncome)})),a.merge(i).select("text.bracket-rate-text").style("fill","#fff").style("font-size","0.75rem").style("text-anchor","end").attr("x",T-5).transition().duration(k).text((function(t){return"\u0e40\u0e23\u0e34\u0e48\u0e21\u0e04\u0e34\u0e14\u0e17\u0e35\u0e48 ".concat(t.minNetIncome.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," \u0e1a\u0e32\u0e17")})).style("fill-opacity",(function(t,e){return 0!=e&&B(t.maxNetIncome-t.minNetIncome)>20?1:0})).attr("y",(function(t){return-B(t.minNetIncome)-5})),a.merge(i).select("text.bracket-min-text").style("fill","#fff").style("font-size","0.75rem").attr("x",(function(t){return z(t.taxRate)+5})).transition().duration(k).text((function(t){return"\u0e20\u0e32\u0e29\u0e35 ".concat(100*t.taxRate,"%")})).style("fill-opacity",(function(t,e){return 0!=e&&B(t.maxNetIncome-t.minNetIncome)>20?1:0})).attr("y",(function(t){return-B(t.minNetIncome)-5})),h.f("g.axis-income-bottom").attr("transform","translate(0, 0)").transition().duration(k).call(A),h.f("g.axis-tax-rate").transition().duration(k).call(P)}}),[I,w,M,s,T,B,S,e,n,a,c,r,A,F,P,C,R,z]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(y,{ref:g,children:[Object(O.jsx)(v,{}),Object(O.jsxs)(N,{id:"chart",className:"d3-component",width:I,height:w,ref:M,children:[Object(O.jsx)("defs",{children:Object(O.jsx)("clipPath",{id:"net-income-mask",children:Object(O.jsx)("rect",{className:"net-income-mask"})})}),Object(O.jsx)("g",{transform:"translate(0, ".concat(w,") scale(1, -1)"),children:Object(O.jsxs)("g",{className:"container",children:[Object(O.jsx)("rect",{className:"net-income"}),Object(O.jsx)("rect",{className:"expense"}),Object(O.jsx)("rect",{className:"allowance"}),Object(O.jsx)("text",{className:"net-income-text",style:{fill:"#fff",fontSize:"0.75rem",alignmentBaseline:"middle",textAnchor:"middle",fillOpacity:.4}}),Object(O.jsx)("text",{className:"net-expense-text",style:{fill:"#fff",fontSize:"0.75rem",alignmentBaseline:"middle",textAnchor:"middle",fillOpacity:.4}}),Object(O.jsx)("text",{className:"net-allowance-text",style:{fill:"#fff",fontSize:"0.75rem",alignmentBaseline:"middle",textAnchor:"middle",fillOpacity:.4}}),Object(O.jsx)("g",{className:"tax-lines"}),Object(O.jsx)("g",{className:"axis-income-top"}),Object(O.jsx)("g",{className:"axis-income-bottom"}),Object(O.jsx)("g",{className:"axis-tax-rate"}),Object(O.jsx)("path",{className:"tax-stairs-camouflage","clip-path":"url(#net-income-mask)",onClick:function(){return m(!1)}}),Object(O.jsx)("path",{className:"tax-stairs","clip-path":"url(#net-income-mask)",onClick:function(){return m(!s)}})]})})]})]})})},w=(n(69),function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),k=g.a.div(r||(r=Object(f.a)(["\n  /* padding: 30px; */\n  width: 100%;\n  /* height: 50vh; */\n  flex: 1;\n  position: relative;\n"]))),M=g.a.div(o||(o=Object(f.a)([""]))),R=g.a.div(s||(s=Object(f.a)(["\n  padding: 30px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: 768px) {\n    flex-direction: row;\n    padding: 50px;\n  }\n"]))),C=g.a.div(l||(l=Object(f.a)(["\n  /* margin-top: 30px; */\n  display: grid;\n  grid-template-columns: auto auto 80px;\n  column-gap: 10px;\n  row-gap: 15px;\n  flex-direction: column;\n  /* margin-bottom: 30px; */\n  align-content: center;\n\n  @media (min-width: 768px) {\n    margin-left: 80px;\n    width: 400px;\n    max-width: 40%;\n  }\n\n  label {\n    white-space: nowrap;\n  }\n"])));g.a.div(m||(m=Object(f.a)(["\n  /* margin-bottom: 10px; */\n  display: flex;\n  flex-direction: column;\n"])));var S=function(){var t=Object(x.useState)(48e4),e=Object(b.a)(t,2),n=e[0],a=e[1],c=Object(x.useState)(1e5),i=Object(b.a)(c,2),r=i[0],o=i[1],s=Object(x.useState)(6e4),l=Object(b.a)(s,2),m=l[0],u=l[1],d=Object(x.useState)(!0),j=Object(b.a)(d,2),f=j[0],h=j[1],p=Object(x.useMemo)((function(){return n-r-m}),[n,r,m]),g=Object(x.useState)(!1),y=Object(b.a)(g,2),v=y[0],N=y[1],S=[{minNetIncome:0,maxNetIncome:15e4,taxRate:0},{minNetIncome:15e4,maxNetIncome:3e5,taxRate:.05},{minNetIncome:3e5,maxNetIncome:5e5,taxRate:.1},{minNetIncome:5e5,maxNetIncome:75e4,taxRate:.15},{minNetIncome:75e4,maxNetIncome:1e6,taxRate:.2},{minNetIncome:1e6,maxNetIncome:2e6,taxRate:.25},{minNetIncome:2e6,maxNetIncome:5e6,taxRate:.3},{minNetIncome:5e6,maxNetIncome:999999999999,taxRate:.35}],B=Object(x.useMemo)((function(){var t=0,e=p;for(var n in S){var a=S[n].maxNetIncome-S[n].minNetIncome;if(t+=Math.min(e,a)*S[n].taxRate,(e-=a)<=0)break}return t}),[p]);return Object(O.jsxs)(R,{children:[Object(O.jsx)(k,{children:Object(O.jsx)(I,{income:n,expense:r,allowance:m,taxBrackets:S,isPullTax:v,setPullTax:N,enableTransition:f})}),Object(O.jsxs)(M,{children:[Object(O.jsxs)(C,{children:[Object(O.jsx)("label",{children:"\u0e23\u0e32\u0e22\u0e44\u0e14\u0e49"}),Object(O.jsx)("input",{type:"range",min:"0",max:"10000000",value:n,onChange:function(t){return a(t.target.value)},onMouseDown:function(){return h(!1)},onMouseUp:function(){return h(!0)}}),Object(O.jsx)("input",{type:"number",step:1e4,min:0,value:n,onChange:function(t){return a(t.target.value)}}),Object(O.jsx)("label",{children:"\u0e04\u0e48\u0e32\u0e43\u0e0a\u0e49\u0e08\u0e48\u0e32\u0e22"}),Object(O.jsx)("input",{type:"range",min:"0",max:"1000000",value:r,onChange:function(t){return o(t.target.value)}}),Object(O.jsx)("input",{type:"number",step:1e4,min:0,value:r,onChange:function(t){return o(t.target.value)}}),Object(O.jsx)("label",{children:"\u0e04\u0e48\u0e32\u0e25\u0e14\u0e2b\u0e22\u0e48\u0e2d\u0e19"}),Object(O.jsx)("input",{type:"range",min:"0",max:"1000000",value:m,onChange:function(t){return u(t.target.value)}}),Object(O.jsx)("input",{type:"number",step:1e4,min:0,value:m,onChange:function(t){return u(t.target.value)}})]}),Object(O.jsxs)("div",{style:{display:"flex",marginTop:"20px"},children:[Object(O.jsxs)("div",{style:{flexGrow:1,flexBasis:0,textAlign:"center"},children:[Object(O.jsx)("small",{children:"\u0e40\u0e07\u0e34\u0e19\u0e44\u0e14\u0e49\u0e2a\u0e38\u0e17\u0e18\u0e34"}),Object(O.jsx)("br",{}),Object(O.jsxs)("b",{children:[w(p)," \u0e3f"]})]}),Object(O.jsxs)("div",{style:{flexGrow:1,flexBasis:0,textAlign:"center"},children:[Object(O.jsx)("small",{children:"\u0e20\u0e32\u0e29\u0e35"}),Object(O.jsx)("br",{}),Object(O.jsxs)("b",{children:[w(B)," \u0e3f"]})]})]})]})]})},B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,72)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),i(t),r(t)}))};j.a.render(Object(O.jsx)(u.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root")),B()}},[[70,1,2]]]);
//# sourceMappingURL=main.4e3b4414.chunk.js.map