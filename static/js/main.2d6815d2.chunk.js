(this.webpackJsonptaxvisualizer=this.webpackJsonptaxvisualizer||[]).push([[0],{55:function(t,e,n){},58:function(t,e,n){},59:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(20),i=n.n(r),o=(n(55),n(5)),s=n(2),m=n(0),l=1e3,u=function(t){var e=t.income,n=t.expense,c=t.allowance,r=t.taxBrackets,i=t.width,u=void 0===i?800:i,x=t.height,f=void 0===x?500:x,j=t.padding,b=void 0===j?50:j,d=Object(a.useRef)(null),N=Object(a.useMemo)((function(){return n<e-c?+n:+Math.max(0,e-c)}),[e,n]),g=Object(a.useMemo)((function(){return c<e?+c:+e}),[e,c]),h=Object(a.useMemo)((function(){return Math.max(e-n-c,0)}),[e,n,c]),p=Object(a.useCallback)(s.e().domain([0,Math.max(3e5,1.5*e)]).range([0,u]),[e]),I=Object(a.useMemo)((function(){return f-50-2*b}),[f,b]),O=Object(a.useCallback)(s.e().domain([1,0]).range([0,I]),[e]),y=Object(a.useMemo)((function(){return s.a(p)}),[p]),v=Object(a.useMemo)((function(){return s.c(p)}),[p]),k=Object(a.useMemo)((function(){return s.b(O).tickFormat(s.d(".0%"))}),[O]),R=Object(a.useState)(!1),M=Object(o.a)(R,2),w=M[0],C=M[1];return Object(a.useEffect)((function(){if(d.current){var t=s.f(d.current);t.select("g.container").attr("transform","translate(".concat(b,", ").concat(b,")")),t.select("rect.net-income").attr("height",I).transition().duration(l).style("fill","#08f").attr("width",Math.max(0,p(h))),console.log("netIncome + cleanedAllowance",h+g,g,p(g)),t.select("rect.expense").attr("height",I).transition().duration(l).style("fill","#135").attr("x",p(h+g)).attr("width",Math.max(0,p(N))),t.select("rect.allowance").attr("height",I).transition().duration(l).style("fill","#147").attr("x",p(h)).attr("width",Math.max(0,p(g)));var e=t.select("g.tax-lines").selectAll("g").data(r),n=e.enter().append("g").classed("bracket",!0);n.append("text").classed("bracket-rate-text",!0),n.append("text").classed("bracket-min-text",!0),n.append("rect").classed("bracket-rect",!0),n.append("line").classed("bracket-line",!0),e.merge(n).select("rect").attr("y",(function(t){return O(t.taxRate)})).attr("height",(function(t){return O(1-t.taxRate)})).style("fill-opacity",0).style("stroke","#f80").transition().duration(l).attr("x",(function(t){return p(t.minNetIncome)})).attr("width",(function(t){return p(t.maxNetIncome-t.minNetIncome)})),e.merge(n).select("line").attr("y1",0).attr("y2",I).style("stroke","#f80").style("stroke-dasharray","3, 3").transition().duration(l).attr("x1",(function(t){return p(t.maxNetIncome)})).attr("x2",(function(t){return p(t.maxNetIncome)})),e.merge(n).select("text.bracket-rate-text").style("fill","#f80").attr("y",-30).transition().duration(l).text((function(t){return"\u0e2d\u0e31\u0e15\u0e23\u0e32\u0e20\u0e32\u0e29\u0e35 ".concat(100*t.taxRate,"%")})).style("fill-opacity",(function(t){return p(t.maxNetIncome-t.minNetIncome)>150?1:0})).attr("x",(function(t){return p(t.minNetIncome)})),e.merge(n).select("text.bracket-min-text").style("fill","#f80").attr("y",-10).transition().duration(l).text((function(t){return p(t.maxNetIncome-t.minNetIncome)>150?"\u0e40\u0e23\u0e34\u0e48\u0e21\u0e04\u0e34\u0e14\u0e17\u0e35\u0e48 ".concat(t.minNetIncome.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," \u0e1a\u0e32\u0e17"):"".concat(100*t.taxRate,"%")})).style("fill-opacity",(function(t){return p(t.maxNetIncome-t.minNetIncome)>50?1:0})).attr("x",(function(t){return p(t.minNetIncome)}));var a=t.select("g.tax-parts").selectAll("rect").data(r),c=a.enter().append("rect").style("fill","#f80").style("fill-opacity",1);a.merge(c).attr("y",(function(t){return O(t.taxRate)})).attr("height",(function(t){return I*t.taxRate})).transition().duration(l).attr("x",(function(t){return p(t.minNetIncome)})).attr("width",(function(t){return h>t.minNetIncome?h<t.maxNetIncome?p(h-t.minNetIncome):p(t.maxNetIncome-t.minNetIncome):0})),console.log(w),t.select("g.tax-parts").transition().attr("transform",w?"translate(0, ".concat(b+20,")"):"translate(0, 0)");var i=t.select("g.tax-camouflage").selectAll("rect").data(r),o=i.enter().append("rect").style("fill","#222").style("stroke","#222").style("fill-opacity",1);i.merge(o).attr("y",(function(t){return O(t.taxRate)})).attr("height",(function(t){return O(1-t.taxRate)})).transition().duration(l).attr("x",(function(t){return p(t.minNetIncome)})).attr("width",(function(t){return h>t.minNetIncome?h<t.maxNetIncome?p(h-t.minNetIncome):p(t.maxNetIncome-t.minNetIncome):0})),s.f("g.axis-income-bottom").attr("transform","translate(0, ".concat(I,")")).transition().duration(l).call(y),s.f("g.axis-tax-rate").transition().duration(l).call(k)}}),[d,w,I,p,h,e,n,c,r,f,b,v,y,k,g,N,O]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("svg",{className:"d3-component",width:u,height:f,ref:d,children:Object(m.jsxs)("g",{className:"container",children:[Object(m.jsx)("rect",{className:"net-income"}),Object(m.jsx)("rect",{className:"expense"}),Object(m.jsx)("rect",{className:"allowance"}),Object(m.jsx)("g",{className:"tax-lines"}),Object(m.jsx)("g",{className:"tax-camouflage"}),Object(m.jsx)("g",{className:"axis-income-top"}),Object(m.jsx)("g",{className:"axis-income-bottom"}),Object(m.jsx)("g",{className:"axis-tax-rate"}),Object(m.jsx)("g",{className:"tax-parts"})]})}),Object(m.jsx)("p",{children:h}),Object(m.jsx)("button",{onClick:function(){return C(!w)},children:"Tax"})]})};n(58);var x=function(){var t=Object(a.useState)(5e5),e=Object(o.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(1e5),i=Object(o.a)(r,2),s=i[0],l=i[1],x=Object(a.useState)(6e4),f=Object(o.a)(x,2),j=f[0],b=f[1],d=Object(a.useMemo)((function(){return n-s-j}),[n,s,j]),N=[{minNetIncome:0,maxNetIncome:15e4,taxRate:0},{minNetIncome:15e4,maxNetIncome:3e5,taxRate:.05},{minNetIncome:3e5,maxNetIncome:5e5,taxRate:.1},{minNetIncome:5e5,maxNetIncome:75e4,taxRate:.15},{minNetIncome:75e4,maxNetIncome:1e6,taxRate:.2},{minNetIncome:1e6,maxNetIncome:2e6,taxRate:.25},{minNetIncome:2e6,maxNetIncome:5e6,taxRate:.3},{minNetIncome:5e6,maxNetIncome:999999999999,taxRate:.35}],g=Object(a.useMemo)((function(){var t=0,e=d;for(var n in N){var a=N[n].maxNetIncome-N[n].minNetIncome;if(t+=Math.min(e,a)*N[n].taxRate,(e-=a)<=0)break}return t}),[d]);return Object(m.jsxs)("div",{className:"my-app",children:[Object(m.jsx)("input",{type:"number",step:1e4,min:0,value:n,onChange:function(t){return c(t.target.value)}}),Object(m.jsx)("input",{type:"number",step:1e4,min:0,value:s,onChange:function(t){return l(t.target.value)}}),Object(m.jsx)("input",{type:"number",step:1e4,min:0,value:j,onChange:function(t){return b(t.target.value)}}),Object(m.jsx)("p",{children:d}),Object(m.jsx)("p",{children:g}),Object(m.jsx)(u,{income:n,expense:s,allowance:j,taxBrackets:N})]})},f=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),r(t),i(t)}))};i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(x,{})}),document.getElementById("root")),f()}},[[59,1,2]]]);
//# sourceMappingURL=main.2d6815d2.chunk.js.map