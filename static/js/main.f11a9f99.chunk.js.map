{"version":3,"sources":["utils/TaxCalculation.js","theme.js","components/ScaleReference.jsx","data/TaxBrackets.js","components/MoneyBlock.jsx","components/TaxBracketDisplay.jsx","components/D3Component.jsx","components/StoryIndicator.jsx","components/ScrollBox.jsx","components/Slider.jsx","components/ScrollInstruction.jsx","components/Button.jsx","components/Step.jsx","pages/CoverPage.jsx","pages/EndingPage.jsx","components/PageNavigator.jsx","components/Pill.jsx","styles/globalStyles.js","App.jsx","reportWebVitals.js","index.jsx"],"names":["useNetIncome","income","expense","allowance","useMemo","Math","max","theme","colors","bg","text","textSecondary","textMuted","incomeText","expenseText","allowanceText","tax","taxText","white","transitionTime","ScaleReference","_ref","scale","barWidth","x","y","maxSize","aspectRatio","props","textRef","useRef","squareRef","patternRef","textWidth","setTextWidth","useState","rectSide","ref","side","sqrt","nextSide","area","height","width","sizeOf1000","bankNoteArea","h","concat","toLocaleString","useEffect","current","d3","transition","duration","attr","pattern","select","getBBox","_jsxs","transform","children","_jsx","id","href","process","fill","stroke","fillOpacity","alignmentBaseline","textAnchor","taxBrackets","minNetIncome","maxNetIncome","taxRate","MoneyBlock","amount","offset","label","isBlink","outlined","enableTransition","fade","transitionDuration","moneyBlockRef","fadeOp","useLayoutEffect","g","style","areaTotal","_sizeOf1000$width","_sizeOf1000$height","console","log","_Fragment","strokeWidth","className","strokeDasharray","fontSize","paintOrder","strokeLinejoin","TaxBracketDisplay","scaleIncome","scaleTaxRate","showTax","blinkTax","netIncome","active","isPullTax","setPullTax","forceBlink","taxBracketRef","taxMaskRef","generateTaxBracketsPathD","useCallback","pathD","map","d","join","length","bracketLineGroups","selectAll","data","bracketLineGroupsEnter","enter","append","classed","merge","round","i","clipPath","onClick","SvgContainer","styled","div","_templateObject","_taggedTemplateLiteral","CartesianSvg","svg","_templateObject2","D3Component","incomeGroups","isGroupIncome","showBreakdown","padding","left","right","top","bottom","showBrackets","isActivateTax","isFocusIncome","showFullScale","forceBlinkTax","showScaleReference","observe","unobserve","entry","useDimensions","onResize","_ref2","w","entr","d3Container","cleanedExpense","cleanedAllowance","min","domain","range","axisIncome","tickFormat","axisTaxRate","ticks","tickSize","tickPadding","call","sum","reduce","a","b","x1","y1","x2","y2","stopColor","stopOpacity","ig","slice","dominantBaseline","opacity","strokeOpacity","StoryIndicatorContainer","StoryIndicatorItem","StoryIndicator","currentStep","totalSteps","steps","FadeTop","transparentize","FadeBottom","StyledScrollBox","_templateObject3","_templateObject4","ScrollBox","onScroll","scrollBoxRef","showTopFade","setShowTopFade","showBottomFade","setShowBottomFade","handleScroll","e","scrollTop","offsetHeight","scrollHeight","addEventListener","removeEventListener","StyledSlider","ReactSlider","StyledThumb","color","darken","StyledTrack","index","Tooltip","visible","Slider","onBeforeChange","onAfterChange","showTooltip","setShowTooltip","renderTrack","trackProps","state","renderThumb","thumbProps","valueNow","scrollPreview","keyframes","ScrollInstruction","css","Button","button","secondary","disabled","Step","unfixSize","status","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","CoverPage","currentNarrativeStep","setCurrentNarrativeStep","sign","gap","alignItems","justifyContent","backgroundColor","zIndex","paddingTop","marginTop","textAlign","backgroundImage","backgroundSize","backgroundPosition","position","borderRadius","display","flexDirection","marginBottom","fontWeight","lineHeight","target","rel","EndBox","PageOverlay","LinkButton","EndingPage","narrativeStepsCount","showQr","setShowQr","margin","toFixed","title","marginLeft","border","textDecoration","window","location","marginRight","src","alt","currentTarget","maxWidth","download","PageNavigator","setCurrentStep","stepCount","flexGrow","flexBasis","Pill","span","bold","lighten","GlobalStyle","createGlobalStyle","ChartContainer","SideContainer","ContentContainer","taller","VisibleNonMobile","PageContainer","ControlsContainer","ControlsGrid","TaxTableDisplay","show","NetIncomeEquation","highlight","App","salary","setSalary","incomeFreelance","setIncomeFreelance","incomeMerchant","setIncomeMerchant","enableIncome","setEnableIncome","enableIncomeExtra","setEnableIncomeExtra","salaryDisplay","incomeFreelanceDisplay","incomeMerchantDisplay","enableExpense","setEnableExpense","expense40_1_2","expense40_8","enableAllowance","setEnableAllowance","setAllowance","allowanceDisplay","setGroupIncome","taxFinal","useTaxCalculation","sumTax","remainingNetIncome","bracketRange","setEnableTransition","setActivateTax","setShowBrackets","setShowBreakdown","showDragInstruction","setShowDragInstruction","setShowFullScale","narrativeSteps","htmlFor","type","step","value","onChange","gridTemplateColumns","columnGap","rowGap","ceil","gridColumn","setTimeout","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f11a9f99.chunk.js","sourcesContent":["import { useMemo } from 'react';\n\nexport const useNetIncome = (income, expense, allowance) => useMemo(\n  () => Math.max(0, income - expense - allowance),\n  [income, expense, allowance],\n);\n\nexport const useTaxCalculation = (netIncome, taxBrackets) => useMemo(() => {\n  let sumTax = 0;\n  let remainingNetIncome = netIncome;\n  for (let i = 0; i < taxBrackets.length; i++) {\n    const bracketRange = taxBrackets[i].maxNetIncome - taxBrackets[i].minNetIncome;\n    const incomeInBracket = Math.min(remainingNetIncome, bracketRange);\n    const taxInBracket = incomeInBracket * taxBrackets[i].taxRate;\n    sumTax += taxInBracket;\n    remainingNetIncome -= bracketRange;\n    if (remainingNetIncome <= 0) break;\n  }\n  return sumTax;\n}, [netIncome, taxBrackets]);\n","export const theme = {\n  colors: {\n    bg: '#F8F2EF',\n    text: '#222222',\n    textSecondary: '#222222aa',\n    textMuted: '#22222266',\n    // income: '#895A46',\n    income: '#7A5D52',\n    incomeText: '#7C503D',\n    expense: '#1078A4',\n    expenseText: '#006895',\n    allowance: '#16AD82',\n    allowanceText: '#00956B',\n    tax: '#F7353B',\n    taxText: '#DA0910',\n    white: '#ffffff',\n  },\n  transitionTime: 1000,\n};\n\n// export const theme = {\n//   colors: {\n//     bg: \"#F1E8E8\",\n//     text: \"#222222\",\n//     textSecondary: \"#222222aa\",\n//     textMuted: \"#22222266\",\n//     income: \"#0851A6\",\n//     incomeText: \"#0851A6\",\n//     expense: \"#4FA01E\",\n//     expenseText: \"#317706\",\n//     allowance: \"#B346D9\",\n//     allowanceText: \"#9C1BC9\",\n//     tax: \"#E41D1D\",\n//     taxText: \"#E41D1D\",\n//     white: \"#ffffff\",\n//   },\n// };\n\n// export const theme = {\n//   colors: {\n//     bg: \"#1f1629\",\n//     text: \"#fff\",\n//     textMuted: \"#888\",\n//     income: \"#08f\",\n//     incomeText: \"#0af\",\n//     expense: \"#382e59\",\n//     expenseText: \"#9c86eb\",\n//     allowance: \"#2a4236\",\n//     allowanceText: \"#58cc92\",\n//     tax: \"#f80\",\n//     taxText: \"#f90\",\n//   },\n// };\n\nexport default theme;\n","import React, {\n  useState, useEffect, useMemo, useRef,\n} from 'react';\nimport styled from 'styled-components';\nimport * as d3 from 'd3';\nimport { theme } from '../theme';\n\nconst ScaleReference = ({\n  scale, barWidth, x, y, maxSize = 30, aspectRatio = 2.25, ...props\n}) => {\n  const textRef = useRef(null);\n  const squareRef = useRef(null);\n  const patternRef = useRef(null);\n\n  const [textWidth, setTextWidth] = useState(0);\n\n  const rectSide = useMemo(() => {\n    let ref = 1;\n    let side = Math.sqrt(scale(ref) * barWidth);\n    let nextSide = Math.sqrt(scale(ref * 10) * barWidth);\n    while (nextSide < maxSize) {\n      side = nextSide;\n      ref *= 10;\n      nextSide = Math.sqrt(scale(ref * 10) * barWidth);\n    }\n\n    return {\n      area: side * side,\n      height: side * Math.sqrt(1 / aspectRatio),\n      width: side * Math.sqrt(aspectRatio),\n      ref,\n    };\n  }, [scale, barWidth, maxSize, aspectRatio]);\n\n  const sizeOf1000 = useMemo(() => {\n    const bankNoteArea = barWidth * scale(1000);\n    const h = Math.sqrt(bankNoteArea / aspectRatio);\n    return {\n      area: bankNoteArea,\n      width: h * aspectRatio,\n      height: h,\n    };\n  }, [aspectRatio, barWidth, scale]);\n\n  const text = useMemo(() => `= ${rectSide.ref.toLocaleString()} บาท`, [rectSide]);\n\n  useEffect(() => {\n    if (squareRef.current) {\n      d3.select(squareRef.current)\n        .transition().duration(500)\n        .attr('width', rectSide.width)\n        .attr('height', rectSide.height)\n        .attr('x', -rectSide.width - textWidth - 10)\n        .attr('y', -rectSide.height / 2);\n    }\n  }, [squareRef, rectSide, textWidth]);\n\n  useEffect(() => {\n    if (patternRef.current) {\n      const pattern = d3.select(patternRef.current);\n\n      pattern.transition().duration(500)\n        .attr('width', sizeOf1000.width / rectSide.width)// Math.sqrt(rectSide.ref / 1000))\n        .attr('height', sizeOf1000.height / rectSide.height)// Math.sqrt(rectSide.ref / 1000))\n        .attr('x', 0)\n        .attr('y', 0);\n\n      pattern.select('image')\n        .attr('width', sizeOf1000.width)\n        .attr('height', sizeOf1000.height)\n        .attr('y', -sizeOf1000.height);\n    }\n  }, [patternRef, sizeOf1000, rectSide]);\n\n  useEffect(() => {\n    setTextWidth(textRef.current ? textRef.current.getBBox().width : 80);\n  }, [textRef, text]);\n\n  return (\n    <g transform={`translate(${x}, ${y}) scale(1, -1)`}>\n      <defs>\n        <pattern\n          id=\"bank1000-ref\"\n          x=\"0\"\n          y=\"0\"\n          width={sizeOf1000.width / rectSide.width}\n          height=\"1\"\n          ref={patternRef}\n        >\n          <image\n            href={`${process.env.PUBLIC_URL}/bank1000.png`}\n            width={sizeOf1000.width}\n            height={sizeOf1000.height}\n            y={-sizeOf1000.height}\n            transform=\"scale(1, -1)\"\n          />\n          <rect\n            width={sizeOf1000.width}\n            height={sizeOf1000.height}\n            fill=\"transparent\"\n            stroke={theme.colors.bg}\n            fillOpacity={0.5}\n          />\n        </pattern>\n      </defs>\n      <rect fill=\"url(#bank1000-ref)\" ref={squareRef} />\n      {/* <rect fill={theme.colors.income} ref={squareRef} /> */}\n      <text fill={theme.colors.textMuted} alignmentBaseline=\"middle\" textAnchor=\"end\" x={0} ref={textRef}>\n        {text}\n      </text>\n    </g>\n  );\n};\n\nexport default ScaleReference;\n","export const taxBrackets = [\n  {\n    minNetIncome: 0,\n    maxNetIncome: 150000,\n    taxRate: 0,\n  },\n  {\n    minNetIncome: 150000,\n    maxNetIncome: 300000,\n    taxRate: 0.05,\n  },\n  {\n    minNetIncome: 300000,\n    maxNetIncome: 500000,\n    taxRate: 0.1,\n  },\n  {\n    minNetIncome: 500000,\n    maxNetIncome: 750000,\n    taxRate: 0.15,\n  },\n  {\n    minNetIncome: 750000,\n    maxNetIncome: 1000000,\n    taxRate: 0.2,\n  },\n  {\n    minNetIncome: 1000000,\n    maxNetIncome: 2000000,\n    taxRate: 0.25,\n  },\n  {\n    minNetIncome: 2000000,\n    maxNetIncome: 5000000,\n    taxRate: 0.3,\n  },\n  {\n    minNetIncome: 5000000,\n    maxNetIncome: 999999999999,\n    taxRate: 0.35,\n  },\n];\n\nexport default taxBrackets;\n","import React, {\n  useRef, useEffect, useLayoutEffect, useMemo, useCallback, useState,\n} from 'react';\nimport * as d3 from 'd3';\n// import { transition } from 'd3';\nimport useDimensions from 'react-cool-dimensions';\nimport styled from 'styled-components';\nimport { useResizeDetector } from 'react-resize-detector';\nimport { transition } from 'd3';\nimport { useNetIncome } from '../utils/TaxCalculation';\nimport ScaleReference from './ScaleReference';\n\nimport { taxBrackets } from '../data/TaxBrackets';\nimport { theme } from '../theme';\n\n// const transitionDuration = 1000\n\nexport const MoneyBlock = ({\n  amount,\n  offset,\n  scale,\n  barWidth,\n  fill,\n  label,\n  isBlink,\n  outlined = false,\n  enableTransition = true,\n  fade = false,\n  stroke,\n  id = 0,\n}) => {\n  const transitionDuration = useMemo(\n    () => (enableTransition ? theme.transitionTime : 0),\n    [enableTransition],\n  );\n\n  const moneyBlockRef = useRef(null);\n  const patternRef = useRef(null);\n  const strokeWidth = 1;\n\n  const fadeOp = useMemo(() => (outlined ? 0.2 : 1), [outlined]);\n\n  useLayoutEffect(() => {\n    if (moneyBlockRef.current) {\n      const g = d3.select(moneyBlockRef.current);\n\n      g.transition().duration(transitionDuration)\n        .attr('transform', `translate(0, ${scale(offset)})`);\n\n      g.select('rect.block')\n        .attr('width', barWidth)\n        .style('animation', isBlink ? 'blink-from-full 0.5s infinite' : 'none')\n        .style('animation-timing-function', 'linear')\n        .transition()\n        .duration(transitionDuration)\n        // .style('fill', outlined ? 'transparent' : fill)\n        // .attr('y', scale(offset))\n        .attr('height', Math.max(0, scale(amount)))\n        .attr('fill-opacity', fadeOp);\n\n      g.select('rect.block-outline')\n        .attr('width', barWidth - strokeWidth)\n        .style('animation', isBlink ? 'blink-from-full 1s infinite' : 'none')\n        .transition()\n        .duration(transitionDuration)\n        // .attr('y', scale(offset))\n        .attr('height', Math.max(0, scale(amount)) - strokeWidth)\n        .attr('stroke-opacity', (outlined ? 1 : stroke ? 0.6 : 0) * fadeOp)\n        .attr('fill-opacity', fadeOp);\n\n      g.select('text.label')\n        .text(label)\n        .transition().duration(transitionDuration)\n        // .attr('x', barWidth / 2)\n        .attr('x', barWidth - 12)\n        .style('text-anchor', 'end')\n        .style('fill', outlined ? fill : theme.colors.white)\n        .style('stroke', outlined ? theme.colors.bg : '#000')\n        .attr('y', -scale(amount / 2))\n        .attr('opacity', amount > 0 ? (1 * fadeOp) : 0);\n    }\n  }, [\n    amount,\n    offset,\n    scale,\n    barWidth,\n    fill,\n    label,\n    isBlink,\n    transitionDuration,\n    moneyBlockRef,\n    fadeOp,\n    outlined,\n    stroke,\n  ]);\n\n  const sizeOf1000 = useMemo(() => {\n    const areaTotal = barWidth * scale(amount);\n    const valueTotal = amount;\n    const bankNoteAspectRatio = 2.25;\n\n    const bankNoteArea = valueTotal === 0 ? 0 : (1000 * areaTotal) / valueTotal;\n    const h = Math.sqrt(bankNoteArea / bankNoteAspectRatio);\n    return {\n      area: bankNoteArea,\n      width: h * bankNoteAspectRatio,\n      height: h,\n    };\n  }, [amount, barWidth, scale]);\n\n  useEffect(() => {\n    if (patternRef.current) {\n      const pattern = d3.select(patternRef.current);\n\n      console.log(sizeOf1000, barWidth, amount);\n      pattern.transition().duration(500)\n        .attr('width', (sizeOf1000.width ?? 0) / barWidth)// Math.sqrt(rectSide.ref / 1000))\n        .attr('height', (sizeOf1000.height ?? 0) / (amount === 0 ? 1 : scale(amount)))// Math.sqrt(rectSide.ref / 1000))\n        .attr('x', 0)\n        .attr('y', 0);\n\n      pattern.select('image')\n        .transition().duration(500)\n        .attr('width', sizeOf1000.width)\n        .attr('height', sizeOf1000.height)\n        .attr('y', -sizeOf1000.height);\n\n      pattern.select('rect.color-overlay')\n        .transition().duration(500)\n        .attr('fill-opacity', outlined ? 0 : 0.7);\n    }\n  }, [patternRef, sizeOf1000, barWidth, scale, amount, outlined]);\n\n  return (\n    <>\n      <g ref={moneyBlockRef}>\n        <defs>\n          <pattern\n            ref={patternRef}\n            id={`bank1000-${id}`}\n            x=\"0\"\n            y=\"0\"\n            // width={sizeOf1000.width / barWidth}\n            // height={sizeOf1000.height / scale(amount)}\n          >\n            <image\n              href={`${process.env.PUBLIC_URL}/bank1000.png`}\n              // width={sizeOf1000.width}\n              // height={sizeOf1000.height}\n              transform=\"scale(1, -1)\"\n              // y={-sizeOf1000.height}\n            />\n            <rect\n              width=\"100%\"\n              height=\"100%\"\n              fill=\"transparent\"\n              stroke={theme.colors.bg}\n              strokeWidth={3}\n            />\n            <rect\n              className=\"color-overlay\"\n              width=\"100%\"\n              height=\"100%\"\n              fill={fill}\n              // fill=\"transparent\"\n              // fillOpacity={outlined ? 0 : 0.7}\n            />\n          </pattern>\n        </defs>\n        <rect\n          className=\"block\"\n          width={barWidth}\n          fill={`url(#bank1000-${id})`}\n          // fill={outlined ? 'transparent' : fill}\n          // opacity={fadeOp}\n          // stroke={outlined ? fill : theme.colors.text}\n          // stroke-opacity={outlined ? 1 : stroke ? 0.6 : 0}\n          // strokeWidth={strokeWidth}\n          // stroke-dasharray=\"5, 5\"\n          data-amount={amount}\n          data-offset={offset}\n        />\n        <rect\n          className=\"block-outline\"\n          width={barWidth - strokeWidth}\n          x={strokeWidth / 2}\n          y={strokeWidth / 2}\n          // fill={outlined ? 'transparent' : fill}\n          fill={outlined ? 'transparent' : `url(#bank1000-${id})`}\n          stroke={outlined ? fill : theme.colors.white}\n          strokeWidth={strokeWidth}\n          // strokeOpacity={(outlined ? 1 : stroke ? 0.6 : 0) * fadeOp}\n          strokeDasharray=\"5, 3\"\n          data-amount={amount}\n          data-offset={offset}\n        />\n        <text\n          className=\"label\"\n          style={{\n            // fill: outlined ? fill : theme.colors.white,\n            // stroke: outlined ? theme.colors.bg : '#000',\n            fontSize: '0.875rem',\n            alignmentBaseline: 'middle',\n            textAnchor: 'middle',\n            paintOrder: 'stroke fill',\n            strokeWidth: 4,\n            strokeLinejoin: 'round',\n          }}\n        >\n          {label}\n        </text>\n      </g>\n    </>\n  );\n};\n\nexport default MoneyBlock;\n","import React, {\n  useRef, useEffect, useLayoutEffect, useMemo, useCallback,\n} from 'react';\nimport * as d3 from 'd3';\n// import { transition } from 'd3';\n\nimport { taxBrackets } from '../data/TaxBrackets';\nimport { theme } from '../theme';\n\n// const transitionDuration = 1000\n\nexport const TaxBracketDisplay = ({\n  barWidth,\n  scaleIncome,\n  scaleTaxRate,\n  showTax,\n  blinkTax,\n  netIncome,\n  // netIncomeMask,\n  enableTransition = true,\n  active = false,\n  isPullTax = false,\n  setPullTax = () => { },\n  forceBlink = false,\n}) => {\n  const transitionDuration = useMemo(\n    () => (enableTransition ? theme.transitionTime : 0),\n    [enableTransition],\n  );\n\n  const taxBracketRef = useRef(null);\n  const taxMaskRef = useRef(null);\n\n  const generateTaxBracketsPathD = useCallback((x) => {\n    let pathD = 'M 0 0 ';\n    pathD += taxBrackets.map((d) => ''\n                + `L ${scaleTaxRate(d.taxRate)} ${scaleIncome(d.minNetIncome)} `\n                + `L ${scaleTaxRate(d.taxRate)} ${scaleIncome(d.maxNetIncome)} `).join('');\n    pathD += `L 0 ${scaleIncome(taxBrackets[taxBrackets.length - 1].maxNetIncome)} `;\n    pathD += 'Z';\n    return pathD;\n  }, [scaleIncome, scaleTaxRate]);\n\n  useLayoutEffect(() => {\n    if (taxBracketRef.current && taxMaskRef.current) {\n      const g = d3.select(taxBracketRef.current);\n      const mask = d3.select(taxMaskRef.current);\n\n      mask.attr('width', barWidth)\n        .transition().duration(transitionDuration)\n      // .style('fill', '#08f')\n        .attr('height', Math.max(0, scaleIncome(forceBlink ? 10_000_000 : netIncome)));\n\n      g.select('path.tax-stairs-camouflage')\n        .attr('fill', theme.colors.bg)\n        .transition().duration(transitionDuration)\n        .attr('opacity', showTax ? 1 : 0)\n        .attr('d', generateTaxBracketsPathD);\n\n      g.select('path.tax-stairs')\n        .attr('fill', theme.colors.tax)\n        .style('animation', showTax && blinkTax ? 'blink-from-none 1s infinite' : 'none')\n        .transition()\n        .duration(transitionDuration)\n        .attr('d', generateTaxBracketsPathD)\n        .attr('transform', isPullTax ? `translate(${-50}, 0)` : 'translate(0, 0)')\n        .style('opacity', showTax && !isPullTax ? 1 : 0);\n\n      const bracketLineGroups = g.select('g.tax-lines')\n        .selectAll('g')\n        .data(taxBrackets);\n\n      const bracketLineGroupsEnter = bracketLineGroups\n        .enter()\n        .append('g')\n        .classed('bracket', true);\n\n      bracketLineGroupsEnter.append('text').classed('bracket-rate-text', true);\n      bracketLineGroupsEnter.append('text').classed('bracket-min-text', true);\n      bracketLineGroupsEnter.append('rect').classed('bracket-rect', true);\n      bracketLineGroupsEnter.append('line').classed('bracket-line', true);\n\n      bracketLineGroups.merge(bracketLineGroupsEnter)\n        .select('rect')\n        .attr('x', 0) // d => scaleTaxRate(d.taxRate))\n        .attr('width', (d) => scaleTaxRate(d.taxRate))\n        .style('fill-opacity', 0)\n        .style('stroke', theme.colors.tax)\n        .style('stroke-width', 2)\n        // .style('stroke-dasharray', '5, 3')\n        .transition()\n        .duration(transitionDuration)\n        .attr('y', (d) => scaleIncome(d.minNetIncome))\n        .attr('height', (d) => scaleIncome(d.maxNetIncome - d.minNetIncome))\n        .attr('opacity', active ? 1 : 0.4);\n\n      bracketLineGroups.merge(bracketLineGroupsEnter)\n        .select('line')\n        .attr('x1', 0)\n        .attr('x2', barWidth)\n        .style('stroke', theme.colors.tax)\n        .style('stroke-width', 2)\n        .style('stroke-dasharray', '5, 3')\n        .transition()\n        .duration(transitionDuration)\n        // .style('stroke-opacity', '0.4')\n        .attr('y1', (d) => Math.round(scaleIncome(d.maxNetIncome)))\n        .attr('y2', (d) => Math.round(scaleIncome(d.maxNetIncome)))\n        .attr('opacity', active ? 1 : 0.3);\n      // eslint-disable-next-line max-len\n      // .style('stroke-opacity', (d, i) => (i !== 0 && scaleIncome(d.maxNetIncome - d.minNetIncome) > 40 ? 1 : 0));\n\n      bracketLineGroups.merge(bracketLineGroupsEnter)\n        .select('text.bracket-rate-text')\n        .style('font-size', '0.75rem')\n        .style('text-anchor', 'start')\n        .style('dominant-baseline', 'text-before-edge')\n        .style('paint-order', 'stroke fill')\n        .style('stroke-width', 4)\n        .style('stroke-linejoin', 'round')\n        .attr('x', (d) => scaleTaxRate(d.taxRate) + 5)\n        // .attr('x', barWidth - 5)\n        .transition()\n        .duration(transitionDuration)\n        // .style('fill', theme.colors.text)\n        .style('stroke', (d) => (netIncome > d.minNetIncome ? '#000' : theme.colors.bg))\n        .style('fill', (d) => (netIncome > d.minNetIncome ? theme.colors.white : theme.colors.taxText))\n        .style('font-weight', (d) => (netIncome > d.minNetIncome ? 'bold' : 'normal'))\n        .text((d) => `เริ่มคิดที่ ${d.minNetIncome.toLocaleString()} บาท`)\n        .style('fill-opacity', (d, i) => (i !== 0 && scaleIncome(d.maxNetIncome - d.minNetIncome) > 40 ? 1 : 0))\n        .style('stroke-opacity', (d, i) => (i !== 0 && scaleIncome(d.maxNetIncome - d.minNetIncome) > 40 ? 1 : 0))\n        .attr('y', (d) => -scaleIncome(d.minNetIncome) + 5)\n        .attr('opacity', active ? 1 : 0);\n\n      bracketLineGroups.merge(bracketLineGroupsEnter)\n        .select('text.bracket-min-text')\n        .style('font-size', '0.75rem')\n        .style('paint-order', 'stroke fill')\n        .style('stroke-width', 4)\n        .style('stroke-linejoin', 'round')\n        .attr('x', (d) => scaleTaxRate(d.taxRate) + 5)\n        .transition()\n        .duration(transitionDuration)\n        .style('stroke', (d) => (netIncome > d.minNetIncome ? '#000' : theme.colors.bg))\n        .style('fill', (d) => (netIncome > d.minNetIncome ? theme.colors.white : theme.colors.taxText))\n        .style('font-weight', (d) => (netIncome > d.minNetIncome ? 'bold' : 'normal'))\n        .text((d) => `ภาษี ${d.taxRate * 100}%`)\n      // .text(d => scaleIncome(d.maxNetIncome - d.minNetIncome) > 150\n      //     ? `เริ่มคิดที่ ${numberWithCommas(d.minNetIncome)} บาท`\n      //     : `${d.taxRate * 100}%`)\n        .style('fill-opacity', (d, i) => (i !== 0 && scaleIncome(d.maxNetIncome - d.minNetIncome) > 40 ? 1 : 0))\n        .style('stroke-opacity', (d, i) => (i !== 0 && scaleIncome(d.maxNetIncome - d.minNetIncome) > 40 ? 1 : 0))\n        .attr('y', (d) => -scaleIncome(d.minNetIncome) - 5)\n        .attr('opacity', active ? 1 : 0);\n    }\n  }, [\n    taxBracketRef,\n    taxMaskRef,\n    netIncome,\n    scaleTaxRate,\n    scaleIncome,\n    active,\n    showTax,\n    blinkTax,\n    barWidth,\n    generateTaxBracketsPathD,\n    isPullTax,\n    transitionDuration,\n    forceBlink,\n  ]);\n\n  return (\n    <>\n      <defs>\n        <clipPath id=\"net-income-mask\">\n          <rect className=\"net-income-mask\" ref={taxMaskRef} />\n        </clipPath>\n      </defs>\n      <g id=\"tax-brackets\" ref={taxBracketRef}>\n        <g className=\"tax-lines\" />\n        {/* eslint-disable-next-line max-len */}\n        {/* <path className=\"tax-stairs-camouflage\" clipPath=\"url(#net-income-mask)\" onClick={() => setPullTax(false)} /> */}\n        <path className=\"tax-stairs\" clipPath=\"url(#net-income-mask)\" onClick={() => setPullTax(!isPullTax)} />\n      </g>\n    </>\n  );\n};\n\nexport default TaxBracketDisplay;\n","import React, {\n  useRef, useEffect, useLayoutEffect, useMemo, useCallback, useState,\n} from 'react';\nimport * as d3 from 'd3';\n// import { transition } from 'd3';\nimport useDimensions from 'react-cool-dimensions';\nimport styled from 'styled-components';\nimport { useResizeDetector } from 'react-resize-detector';\nimport { transition } from 'd3';\nimport { useNetIncome } from '../utils/TaxCalculation';\nimport ScaleReference from './ScaleReference';\n\nimport { taxBrackets } from '../data/TaxBrackets';\nimport { MoneyBlock } from './MoneyBlock';\nimport { TaxBracketDisplay } from './TaxBracketDisplay';\nimport { theme } from '../theme';\n\nconst SvgContainer = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n`;\n\nconst CartesianSvg = styled.svg`\n    & > g text {\n        transform: scale(1, -1);\n    }\n`;\n\n// const transitionDuration = 1000\n\nexport const D3Component = ({\n  incomeGroups,\n  // incomeGroupLabels,\n  // expenseGroups,\n  isGroupIncome,\n  showBreakdown,\n\n  income,\n  expense,\n  allowance,\n  // taxBrackets,\n  padding = {\n    left: 64,\n    right: 16,\n    top: 0,\n    bottom: 48,\n  },\n  isPullTax = false,\n  showBrackets = true,\n  isActivateTax = true,\n  setPullTax = (x) => { },\n  enableTransition = true,\n  isFocusIncome = true,\n  isBlink = {},\n  showFullScale = false,\n  forceBlinkTax = false,\n  showScaleReference = true,\n}) => {\n  const {\n    observe, unobserve, width, height, entry,\n  } = useDimensions({\n    onResize: ({\n      /* eslint-disable-next-line no-shadow */\n      observe, unobserve, w, h, entr,\n    }) => {\n      // Triggered whenever the size of the target is changed...\n\n      unobserve(); // To stop observing the current target element\n      observe(); // To re-start observing the current target element\n    },\n  });\n\n  const transitionDuration = useMemo(\n    () => (enableTransition ? theme.transitionTime : 0),\n    [enableTransition],\n  );\n\n  const d3Container = useRef(null);\n\n  const cleanedExpense = useMemo(\n    () => (expense < (income - allowance) ? +expense : +Math.max(0, income - allowance)),\n    [income, expense, allowance],\n  );\n  const cleanedAllowance = useMemo(() => Math.min(income, allowance), [income, allowance]);\n\n  const netIncome = useNetIncome(income, expense, allowance);\n\n  /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  const scaleIncome = useCallback(\n    d3.scaleLinear()\n      .domain([0, showFullScale ? 6_000_000 : Math.max(300_000, income * 1.4)])\n      .range([0, height - padding.bottom]),\n    [height, income, padding],\n  );\n\n  const barWidth = useMemo(() => width - (padding.left + padding.right), [width, padding]);\n\n  /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  const scaleTaxRate = useCallback(\n    d3.scaleLinear()\n      .domain([0, 1])\n      .range([0, barWidth]),\n    [income, width],\n  );\n\n  const axisIncome = useMemo(() => d3.axisLeft(scaleIncome)\n    .tickFormat(d3.format('.3s')),\n  [scaleIncome]);\n  const axisTaxRate = useMemo(() => d3.axisBottom(scaleTaxRate).tickFormat(d3.format('.0%')).ticks(5).tickSize(-6)\n    .tickPadding(12),\n  [scaleTaxRate]);\n\n  useLayoutEffect(() => {\n    if (d3Container.current) {\n      const svg = d3.select(d3Container.current);\n\n      svg.select('g.container')\n        .attr('transform', `translate(${padding.left}, ${padding.bottom})`);\n\n      svg.select('g.overview')\n        .transition().duration(transitionDuration)\n        .attr('opacity', showBreakdown ? 0 : 1);\n\n      svg.select('g.breakdown')\n        .transition().duration(transitionDuration)\n        .attr('opacity', showBreakdown ? 1 : 0);\n\n      // AXES\n\n      d3.select('g.axis-income')\n        .attr('transform', 'translate(0, 0)')\n        .transition().duration(transitionDuration)\n        .call(axisIncome);\n\n      d3.select('g.axis-tax-rate')\n        // .attr(\"transform\", `translate(-10, 0)`)\n        .transition().duration(transitionDuration)\n        .attr('opacity', showBrackets ? 1 : 0)\n        .call(axisTaxRate);\n    }\n  }, [\n    d3Container,\n    padding,\n    axisIncome,\n    axisTaxRate,\n    showBreakdown,\n    transitionDuration,\n    showBrackets,\n  ]);\n\n  const sum = (x) => x.reduce((a, b) => a + b, 0);\n\n  return (\n    <>\n      <SvgContainer ref={observe}>\n        {/* <Fade /> */}\n        <CartesianSvg\n          id=\"chart\"\n          className=\"d3-component\"\n          width={width}\n          height={height}\n          ref={d3Container}\n        >\n          <defs>\n            <linearGradient id=\"fade-grad\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n              <stop offset=\"0%\" style={{ stopColor: theme.colors.bg, stopOpacity: 1 }} />\n              <stop offset=\"100%\" style={{ stopColor: theme.colors.bg, stopOpacity: 0 }} />\n            </linearGradient>\n          </defs>\n\n          <g transform={`translate(0, ${height}) scale(1, -1)`}>\n            <g className=\"container\">\n              <g className=\"overview\">\n                <MoneyBlock\n                  amount={netIncome}\n                  scale={scaleIncome}\n                  offset={0}\n                  barWidth={barWidth}\n                  fill=\"transparent\"\n                  label=\"เงินได้สุทธิ\"\n                  stroke={false}\n                  enableTransition={enableTransition}\n                  isBlink={isBlink.income}\n                  id=\"netincome\"\n                />\n                <MoneyBlock\n                  amount={cleanedExpense}\n                  scale={scaleIncome}\n                  offset={netIncome + cleanedAllowance}\n                  barWidth={barWidth}\n                  fill={isFocusIncome ? theme.colors.expenseText : theme.colors.expense}\n                  // fill={theme.colors.expenseText}\n                  label=\"ค่าใช้จ่าย\"\n                  stroke={false}\n                  enableTransition={enableTransition}\n                  outlined={isFocusIncome}\n                  // fade={isFocusIncome}\n                  id=\"expense\"\n                />\n                <MoneyBlock\n                  amount={cleanedAllowance}\n                  scale={scaleIncome}\n                  offset={netIncome}\n                  barWidth={barWidth}\n                  fill={isFocusIncome ? theme.colors.allowanceText : theme.colors.allowance}\n                  // fill={theme.colors.allowanceText}\n                  label=\"ค่าลดหย่อน\"\n                  stroke={false}\n                  enableTransition={enableTransition}\n                  outlined={isFocusIncome}\n                  // fade={isFocusIncome}\n                  id=\"allowance\"\n                />\n              </g>\n              <g className=\"breakdown\">\n                {incomeGroups.map((ig, i) => (\n                  <>\n                    <MoneyBlock\n                      amount={ig.income - ig.expense}\n                      scale={scaleIncome}\n                      offset={\n                        isGroupIncome\n                          ? sum(incomeGroups.slice(0, i).map((x) => x.income - x.expense))\n                          : sum(incomeGroups.slice(0, i).map((x) => x.income))\n                      }\n                      barWidth={barWidth}\n                      fill=\"transparent\"\n                      // fill={theme.colors.income}\n                      label={ig.label}\n                      stroke\n                      id={`profit-x-${i}`}\n                    />\n                    <MoneyBlock\n                      amount={ig.expense}\n                      scale={scaleIncome}\n                      offset={\n                        isGroupIncome\n                          ? (\n                            sum(incomeGroups.map((x) => x.income - x.expense))\n                            + sum(incomeGroups.slice(0, i).map((x) => x.expense))\n                          )\n                          : (\n                            sum(incomeGroups.slice(0, i).map((x) => x.income))\n                            + (ig.income - +ig.expense)\n                          )\n                      }\n                      barWidth={barWidth}\n                      fill={isFocusIncome ? theme.colors.expenseText : theme.colors.expense}\n                      label={`ค่าใช้จ่าย คิดจาก${ig.label}`}\n                      stroke\n                      outlined={isFocusIncome}\n                      id={`expense-x-${i}`}\n                    />\n                  </>\n                ))}\n              </g>\n\n              <TaxBracketDisplay\n                barWidth={barWidth}\n                scaleIncome={scaleIncome}\n                scaleTaxRate={scaleTaxRate}\n                showTax={isActivateTax}\n                blinkTax={isBlink.tax || forceBlinkTax}\n                forceBlink={forceBlinkTax}\n                active={showBrackets}\n                netIncome={netIncome}\n              />\n\n              <g className=\"axis axis-income\" />\n              <g className=\"axis axis-tax-rate\" />\n              <g transform={`translate(${0},${height / 2}) rotate(90)`}>\n                <text fill={theme.colors.text} fontSize={14} textAnchor=\"middle\" dominantBaseline=\"baseline\" y={-48}>\n                  เงินได้ →\n                </text>\n              </g>\n              <g transform={`translate(${barWidth / 2},${0})`}>\n                <text fill={theme.colors.text} fontSize={14} textAnchor=\"middle\" dominantBaseline=\"hanging\" y={24} opacity={showBrackets ? 1 : 0}>\n                  อัตราภาษี →\n                </text>\n              </g>\n\n              <line\n                className=\"axis axis-tax-blank\"\n                x1={0}\n                x2={width - padding.left - padding.right}\n                y1={0}\n                y2={0}\n                stroke={theme.colors.text}\n                strokeOpacity={0.4}\n              />\n            </g>\n          </g>\n          <rect className=\"fade\" fill=\"url(#fade-grad)\" width={width} height={(height - padding.bottom) * 0.25} />\n          {showScaleReference && (\n            <ScaleReference\n              scale={scaleIncome}\n              barWidth={barWidth}\n              x={width}\n              y={40 / 2}\n              maxSize={40}\n            />\n          )}\n        </CartesianSvg>\n      </SvgContainer>\n    </>\n  );\n};\n\nexport default D3Component;\n","import React, { useMemo } from 'react';\nimport styled from 'styled-components';\nimport * as d3 from 'd3';\nimport { theme } from '../theme';\n\nconst StoryIndicatorContainer = styled.div`\n    display: flex;\n    gap: 6px;\n    position: absolute;\n    top: 15px;\n    left: 30px;\n    right: 30px;\n    z-index: 100;\n\n    @media (min-width: 480px) {\n        width: 500px;\n        margin: auto;\n    }\n`;\n\nconst StoryIndicatorItem = styled.div`\n    height: 3px;\n    flex-grow: 1;\n    border-radius: 999;\n    background-color: ${theme.colors.text};\n    transition: opacity 0.2s;\n    opacity: ${(props) => (props.active ? 1 : 0.2)};\n`;\n\nconst StoryIndicator = ({ currentStep = 0, totalSteps = 0, ...props }) => {\n  const steps = useMemo(() => d3.range(totalSteps), [totalSteps]);\n\n  return (\n    <>\n      <StoryIndicatorContainer {...props}>\n        {steps.map((d, i) => (\n          <StoryIndicatorItem active={i <= currentStep} />\n        ))}\n      </StoryIndicatorContainer>\n    </>\n  );\n};\n\nexport default StoryIndicator;\n","import React, {\n  useCallback, useEffect, useRef, useState,\n} from 'react';\nimport styled from 'styled-components';\nimport { transparentize } from 'polished';\nimport { theme } from '../theme';\n\nconst FadeTop = styled.div`\n    position: absolute;\n    top: -2px;\n    left: -2px;\n    right: -2px;\n    height: 50px;\n    background: linear-gradient(to bottom, ${theme.colors.bg}, ${transparentize(1, theme.colors.bg)});\n    pointer-events: none;\n    z-index: 1;\n\n    transition: all 0.2s;\n    opacity: ${(props) => (props.active ? 1 : 0)};\n`;\n\nconst FadeBottom = styled.div`\n    position: absolute;\n    bottom: -2px;\n    left: -2px;\n    right: -2px;\n    height: 50px;\n    background: linear-gradient(to top, ${theme.colors.bg}, ${transparentize(1, theme.colors.bg)});\n    pointer-events: none;\n    z-index: 1;\n\n    transition: all 0.2s;\n    opacity: ${(props) => (props.active ? 1 : 0)};\n`;\n\nconst ScrollBoxContainer = styled.div`\n    /* position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0; */\n    position: relative;\n    overflow-y: auto;\n    overflow-x: hidden;\n`;\n\nconst StyledScrollBox = styled.div`\n    position: relative;\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n`;\n\nconst ScrollBox = ({ children, onScroll, ...props }) => {\n  const scrollBoxRef = useRef(null);\n  const [showTopFade, setShowTopFade] = useState(true);\n  const [showBottomFade, setShowBottomFade] = useState(true);\n\n  const handleScroll = useCallback((e) => {\n    if (scrollBoxRef.current) {\n      setShowTopFade(scrollBoxRef.current.scrollTop > 0);\n      setShowBottomFade(\n        (\n          scrollBoxRef.current.offsetHeight\n          + scrollBoxRef.current.scrollTop\n        ) < scrollBoxRef.current.scrollHeight,\n      );\n    }\n  }, [scrollBoxRef]);\n\n  /* eslint-disable-next-line consistent-return */\n  useEffect(() => {\n    if (scrollBoxRef.current) {\n      console.log('registering handleScroll', handleScroll);\n      scrollBoxRef.current.addEventListener('scroll', (e) => {\n        onScroll(e);\n        handleScroll(e);\n      });\n      return () => {\n        if (scrollBoxRef.current) {\n          /* eslint-disable-next-line react-hooks/exhaustive-deps */\n          scrollBoxRef.current.removeEventListener('scroll', handleScroll);\n        }\n      };\n    }\n  }, [scrollBoxRef, handleScroll, onScroll]);\n\n  useEffect(handleScroll, [scrollBoxRef, handleScroll]);\n\n  return (\n    <>\n      <StyledScrollBox ref={scrollBoxRef} {...props}>\n        {children}\n      </StyledScrollBox>\n      <FadeTop active={showTopFade} />\n      <FadeBottom active={showBottomFade} />\n    </>\n  );\n};\n\nexport default ScrollBox;\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport ReactSlider from 'react-slider';\nimport { darken, lighten } from 'polished';\n\nconst StyledSlider = styled(ReactSlider)`\n    width: 100%;\n    height: 20px;\n`;\n\nconst StyledThumb = styled.div`\n    height: 20px;\n    line-height: 20px;\n    width: 20px;\n    text-align: center;\n    background-color: ${(props) => props.color || '#08f'};\n    /* border: 2px ${(props) => darken(0.1, props.color || '#08f')} solid; */\n    box-sizing: border-box;\n    color: #fff;\n    border-radius: 12px;\n    cursor: grab;\n    position: relative;\n`;\n\nconst StyledTrack = styled.div`\n  top: 6px;\n  bottom: 6px;\n  background: ${(props) => (\n    props.index === 1\n      ? '#0002'\n      : darken(0.05, props.color || '#08f')\n  )};\n  border-radius: 999px;\n`;\n\nconst Tooltip = styled.div`\n    opacity: ${(props) => (props.visible ? 1 : 0)};\n    position: absolute;\n    top: -40px;\n    left: 50%;\n    transform: translateX(-50%);\n    background-color: #000d;\n    padding: 4px 8px;\n    border-radius: 4px;\n    transition: all 0.2s;\n    font-size: 0.75rem;\n    pointer-events: none;\n`;\n\nconst Slider = ({\n  onBeforeChange = () => { }, onAfterChange = () => { }, color, ...props\n}) => {\n  const [showTooltip, setShowTooltip] = useState(false);\n  return (\n    <StyledSlider\n      renderTrack={\n        (trackProps, state) => <StyledTrack {...trackProps} index={state.index} color={color} />\n      }\n      renderThumb={(thumbProps, state) => (\n        <StyledThumb {...thumbProps} color={color}>\n          <Tooltip visible={showTooltip}>{state.valueNow.toLocaleString()}</Tooltip>\n        </StyledThumb>\n      )}\n      onBeforeChange={(x) => {\n        setShowTooltip(true);\n        onBeforeChange(x);\n      }}\n      onAfterChange={(x) => {\n        setShowTooltip(false);\n        onAfterChange(x);\n      }}\n      {...props}\n    />\n  );\n};\n\nexport default Slider;\n","import React from 'react';\nimport styled, { keyframes, css } from 'styled-components';\n/* eslint-disable */\nconst scrollPreview = keyframes`\n  0% {\n    opacity: 0;\n    transform: translate(-50%, 100px);\n  }\n\n  20% {\n    opacity: 1;\n    transform: translate(-50%, 100px);\n  }\n\n  80% {\n    opacity: 1;\n    transform: translate(-50%, 0);\n  }\n\n  100% {\n    opacity: 0;\n    transform: translate(-50%, 0);\n  }\n`;\n\nconst ScrollInstruction = styled.div`\n    width: 64px;\n    height: 64px;\n    background-color: #fff;\n    position: absolute;\n    left: 50%;\n    transform: translateX(-50%);\n    ${(props) => props.visible && css`animation: ${scrollPreview} 2s infinite`};\n    background: url('${process.env.PUBLIC_URL}/drag.svg');\n    background-size: cover;\n    opacity: ${(props) => (props.visible ? 1 : 0)};\n    \n    transition: all 0.2s;\n\n    @media (min-width: 480px) {\n      display: none;\n    }\n`;\n\n// const ScrollInstruction = ({ ...props }) =>\n// <StyledScrollInstruction {...props} />\n\nexport default ScrollInstruction;\n","import styled, { css } from 'styled-components';\nimport { theme } from '../theme';\n\nconst Button = styled.button`\n  border: none;\n  border-radius: 8px;\n  padding: 8px 16px;\n  font-family: \"Bai Jamjuree\", sans-serif;\n\n  ${(props) => (props.secondary\n    ? css`\n          border: 1px ${theme.colors.income} solid;\n          background-color: transparent;\n          color: ${theme.colors.income} !important;\n        `\n    : css`\n          background-color: ${theme.colors.income};\n          color: ${theme.colors.white};\n          box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);\n        `)}\n\n  ${(props) => props.disabled\n    && css`\n      opacity: 0.4;\n    `}\n`;\n\nexport default Button;\n","import styled, { css } from 'styled-components';\n\nconst Step = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  flex-grow: 1;\n  transition: all 0.5s;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n\n  /* ${(props) => props.unfixSize && css`\n    @media (min-width: 480px) {\n      position: static;\n    }\n  `} */\n\n  ${(props) => {\n    switch (props.status) {\n      case -1:\n        return css`\n          transform: translateX(-100px);\n          opacity: 0;\n          pointer-events: none;\n        `;\n      case 1:\n        return css`\n          transform: translateX(100px);\n          opacity: 0;\n          pointer-events: none;\n        `;\n      default:\n        return css`\n          /* transform: translateX(-100px):  */\n          /* opacity: 0; */\n          /* pointer-events: none; */\n        `;\n    }\n  }}\n`;\n\nexport const StepOnly = styled.div`\n  ${(props) => {\n    switch (props.status) {\n      case -1:\n        return css`\n          transform: translateX(-100px);\n          opacity: 0;\n          pointer-events: none;\n        `;\n      case 1:\n        return css`\n          transform: translateX(100px);\n          opacity: 0;\n          pointer-events: none;\n        `;\n      default:\n        return css`\n          /* transform: translateX(-100px):  */\n          /* opacity: 0; */\n          /* pointer-events: none; */\n        `;\n    }\n  }}\n`;\n\nexport default Step;\n","import React from 'react';\nimport { theme } from '../theme';\nimport Button from '../components/Button';\nimport Step from '../components/Step';\n\nconst CoverPage = ({ currentNarrativeStep, setCurrentNarrativeStep }) => (\n  <Step\n    status={Math.sign(-1 - currentNarrativeStep)}\n    style={{\n      gap: '10px',\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: theme.colors.bg,\n      color: theme.colors.text,\n      // color: theme.colors.incomeText,\n      zIndex: 100,\n      top: 30,\n      padding: 50,\n      paddingTop: 30,\n      marginTop: -30,\n      textAlign: 'center',\n      backgroundImage: `url('${process.env.PUBLIC_URL}/bg_fast.gif')`,\n      backgroundSize: '97.2px 21.6px',\n      backgroundPosition: 'center center',\n    }}\n  >\n    <div\n      style={{\n        position: 'absolute',\n        left: '50%',\n        top: 'calc(50% - 16px)',\n        transform: 'translate(-50%, -50%)',\n        borderRadius: '50%',\n        backgroundColor: theme.colors.bg,\n        padding: '64px',\n        width: '360px',\n        height: '360px',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      <h1 style={{\n        color: theme.colors.text,\n        // marginTop: -30,\n        marginBottom: 16,\n      }}\n      >\n        HOW\n        <br />\n        TO\n        <br />\n        <span style={{ color: theme.colors.taxText }}>TAX?</span>\n        {/* <br />\n        แบบเห็นภาพ */}\n      </h1>\n      <p>\n        ภาษีคิดยังไง? คำนวณภาษียากจัง?\n        <br />\n        มาลองคิดภาษีแบบ &ldquo;เห็นภาพ&rdquo;\n        <br />\n        ผ่าน data visualization กัน!\n      </p>\n      <Button\n        style={{\n          padding: '8px 32px',\n          borderRadius: 8,\n          backgroundColor: theme.colors.income,\n          color: theme.colors.white,\n          fontWeight: 'bold',\n          fontSize: '1.125rem',\n        }}\n        onClick={() => setCurrentNarrativeStep(0)}\n      >\n        เริ่มเลย\n      </Button>\n      {/* <p style={{\n        color: theme.colors.textSecondary,\n        marginTop: '1rem',\n        position: ' absolute',\n        bottom: 30,\n        left: 0,\n        right: 0,\n        textAlign: 'center',\n        lineHeight: 1.2,\n      }}\n      > */}\n      <p style={{\n        color: theme.colors.textSecondary,\n        marginTop: '2rem',\n        marginBottom: '-2rem',\n        textAlign: 'center',\n        lineHeight: 1.2,\n      }}\n      >\n        <small>\n          a data visualization experiment by\n          <br />\n          <a href=\"https://taepras.com\" target=\"_blank\" rel=\"noreferrer\" style={{ color: 'inherit' }}>\n            Tae Prasongpongchai\n          </a>\n        </small>\n      </p>\n    </div>\n    {/* <p style={{ color: theme.colors.textMuted, marginTop: '1rem' }}>\n      <small>\n        *เว็บไซต์นี้ไม่มีการเก็บข้อมูลตัวเลขที่คุณกรอก\n        <br />\n        และไม่มีข้อผูกพันทางกฎหมายใดๆ\n      </small>\n    </p> */}\n  </Step>\n);\n\nexport default CoverPage;\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { transparentize } from 'polished';\nimport { theme } from '../theme';\nimport Button from '../components/Button';\nimport Step from '../components/Step';\n// import Pill from '../components/Pill';\n\nconst EndBox = styled.div`\n  padding: 16px 32px;\n  max-width: 100%;\n  background-color: ${transparentize(0.92, theme.colors.taxText)};\n  border-radius: 8px;\n  margin-bottom: 1rem;\n\n  p {\n    margin: 0;\n  }\n`;\n\nconst PageOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #0008;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  backdrop-filter: blur(4px);\n`;\n\nconst LinkButton = styled.a`\n  border: none;\n  border-radius: 8px;\n  padding: 8px 16px;\n  font-family: \"Bai Jamjuree\", sans-serif;\n  background-color: ${theme.colors.income};\n  color: ${theme.colors.white} !important;\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);\n  text-decoration: none !important;\n`;\n\nconst EndingPage = ({\n  currentNarrativeStep, setCurrentNarrativeStep, narrativeStepsCount, tax, income,\n}) => {\n  const [showQr, setShowQr] = useState(false);\n\n  return (\n    <Step\n      status={Math.sign(narrativeStepsCount - currentNarrativeStep)}\n      style={{\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: theme.colors.bg,\n        zIndex: 100,\n        top: 30,\n        padding: 30,\n        paddingTop: 50,\n        textAlign: 'center',\n      }}\n    >\n      <EndBox>\n        <p>\n          ดังนั้น คุณจะต้องเสียภาษีประมาณ\n        </p>\n        <p style={{ margin: `0.5rem ${0}`, color: theme.colors.taxText }}>\n          <h1 style={{ display: 'inline', margin: 0 }}>{Math.round(tax).toLocaleString()}</h1>\n          {' '}\n          <b>บาท</b>\n          <br />\n        </p>\n        <p>\n          หรือคิดเป็น\n          {' '}\n          <b style={{ color: theme.colors.taxText }}>\n            {((tax / income) * 100).toFixed(1)}\n            %\n          </b>\n          {' '}\n          ของเงินได้ทั้งหมด\n        </p>\n      </EndBox>\n      <p style={{ marginBottom: '2rem' }}>\n        ศึกษาข้อมูลเรื่องภาษีเพิ่มเติมได้จาก\n        <br />\n        {' '}\n        <a href=\"https://www.rd.go.th/548.html\" target=\"_blank\" rel=\"noreferrer\">กรมสรรพากร</a>\n        {' '}\n        หรือ\n        {' '}\n        <a href=\"https://www.google.com/search?q=%E0%B8%84%E0%B8%B3%E0%B8%99%E0%B8%A7%E0%B8%93%E0%B8%A0%E0%B8%B2%E0%B8%A9%E0%B8%B5\" title=\"Google: 'คำนวณภาษี'\" target=\"_blank\" rel=\"noreferrer\">แหล่งข้อมูลอื่นๆ</a>\n      </p>\n      <p style={{ marginBottom: '1rem' }}>\n        แต่ถ้าชอบ visualization นี้ ก็แชร์ต่อได้เลย!\n      </p>\n      <div style={{ display: 'flex', gap: '10px', marginBottom: '1rem' }}>\n        <div\n          className=\"fb-share-button\"\n          data-href=\"https://taepras.github.io/howtotax/\"\n          data-layout=\"button\"\n          data-size=\"large\"\n        >\n          <a\n            target=\"_blank\"\n            href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftaepras.github.io%2Fhowtotax%2F&amp;src=sdkpreparse\"\n            className=\"fb-xfbml-parse-ignore\"\n            rel=\"noreferrer\"\n          >\n            Share\n          </a>\n        </div>\n        <a\n          href=\"https://twitter.com/share?ref_src=twsrc%5Etfw\"\n          className=\"twitter-share-button\"\n          data-size=\"large\"\n          data-url=\"https://taepras.github.io/howtotax/\"\n          data-via=\"taepras\"\n          data-dnt=\"true\"\n          data-show-count=\"false\"\n        >\n          Tweet\n        </a>\n        <div\n          className=\"line-it-button\"\n          data-lang=\"en\"\n          data-type=\"share-a\"\n          data-ver=\"3\"\n          data-url=\"https://taepras.github.io/howtotax/\"\n          data-color=\"default\"\n          data-size=\"large\"\n          data-count=\"false\"\n        />\n      </div>\n      <p style={{ marginBottom: '1rem' }}>\n        หรือสนับสนุนผ่าน\n        <Button\n          style={{ marginLeft: '0.5rem', backgroundColor: '#113e67' }}\n          onClick={() => { setShowQr(true); }}\n        >\n          Thai QR Payment\n        </Button>\n      </p>\n\n      <div style={{ display: 'flex', marginTop: '2rem', gap: '10px' }}>\n        <Button\n          style={{\n            border: 'none',\n            fontSize: '1rem',\n            textDecoration: 'underline',\n          }}\n          secondary\n          onClick={() => setCurrentNarrativeStep(narrativeStepsCount - 1)}\n        >\n          &laquo; ย้อนกลับ\n        </Button>\n        <Button\n          style={{\n            border: 'none',\n            fontSize: '1rem',\n            textDecoration: 'underline',\n          }}\n          secondary\n          onClick={() => {\n            /* eslint-disable-next-line no-undef */\n            window.location.href = '';\n          }}\n        >\n          &laquo; เริ่มใหม่\n        </Button>\n      </div>\n\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        marginTop: '30px',\n        color: theme.colors.textSecondary,\n        fontSize: '0.875rem',\n      }}\n      >\n        <a\n          href=\"https://taepras.com\"\n          style={{ color: theme.colors.textSecondary, marginRight: 16 }}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <img src={`${process.env.PUBLIC_URL}/logo_initials.svg`} alt=\"tp_\" style={{ width: 64 }} />\n        </a>\n        <div style={{ textAlign: 'left' }}>\n          <a\n            href=\"https://taepras.com\"\n            style={{ color: theme.colors.textSecondary }}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            taepras.com\n          </a>\n          <br />\n          ธนวิชญ์ ประสงค์พงษ์ชัย\n        </div>\n      </div>\n      {showQr && (\n        <>\n          <PageOverlay\n            onClick={(e) => {\n              if (e.target === e.currentTarget) {\n                setShowQr(false);\n              }\n            }}\n          >\n            <div style={{ position: 'absolute', top: '16px', right: '16px' }}>\n              <Button\n                onClick={() => setShowQr(false)}\n                style={{\n                  fontSize: '1.125rem',\n                  // background: 'transparent',\n                  // border: '1.5px white solid',\n                  // boxShadow: 'none',\n                }}\n              >\n                ปิด X\n              </Button>\n            </div>\n            <img\n              src={`${process.env.PUBLIC_URL}/donate_thaiqr_thanawit.jpg`}\n              alt=\"Thai QR donate to Thanawit\"\n              style={{ maxWidth: '280px', borderRadius: '8px' }}\n            />\n            <LinkButton\n              href={`${process.env.PUBLIC_URL}/donate_thaiqr_thanawit.jpg`}\n              style={{ fontSize: '1.125rem', fontWeight: 'bold', backgroundColor: '#113e67' }}\n              download=\"thaiqr_donate_taepras.jpg\"\n            >\n              ดาวน์โหลดภาพ QR\n            </LinkButton>\n          </PageOverlay>\n        </>\n      )}\n    </Step>\n  );\n};\n\nexport default EndingPage;\n","import React from 'react';\nimport Button from './Button';\n\nconst PageNavigator = ({ currentStep, setCurrentStep, stepCount }) => (\n  <div style={{ display: 'flex', marginTop: '20px', gap: '20px' }}>\n    <Button\n      style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}\n      onClick={() => setCurrentStep(Math.max(currentStep - 1, -1))}\n        // disabled={currentStep === 0}\n      secondary\n    >\n      ย้อนกลับ\n    </Button>\n    <Button\n      style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}\n      onClick={() => setCurrentStep(\n        Math.min(currentStep + 1, stepCount),\n      )}\n      disabled={currentStep === stepCount}\n    >\n      ต่อไป\n    </Button>\n  </div>\n);\n\nexport default PageNavigator;\n","import styled, { css } from 'styled-components';\nimport { lighten, transparentize } from 'polished';\nimport { theme } from '../theme';\n\nconst Pill = styled.span`\n  /* border: none; */\n  border-radius: 2px;\n  padding: 4px 2px;\n  background-color: ${(props) => transparentize(0.92, theme.colors[props.color])};\n  color: ${(props) => theme.colors[props.color]};\n  font-weight: ${(props) => (props.bold ? 'bold' : 'inherit')};\n  /* font-weight: bold; */\n  /* border: 1px solid ${(props) => lighten(0.4, theme.colors[props.color])};; */\n`;\n\nexport default Pill;\n","// globalStyles.js\nimport { createGlobalStyle } from 'styled-components';\nimport { theme } from '../theme';\n\nconst GlobalStyle = createGlobalStyle`\n\n  body {\n    margin: 0;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background-color: ${theme.colors.bg};\n    color: ${theme.colors.text};\n    font-family: 'Bai Jamjuree', sans-serif;\n  }\n\n  p {\n    margin: 0;\n    margin-bottom: 1rem;\n    line-height: 1.5;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    font-family: 'Mitr',\n      sans-serif;\n      line-height: 1;\n  }\n\n  h1 {\n    font-size: 3rem;\n  }\n\n  a:any-link {\n    color: inherit;\n    text-decoration: underline;\n  }\n\n  @media (hover: hover) or (pointer: fine) {\n    a:hover {\n      opacity: .7;\n    }\n  }\n\n  .axis line, .axis path {\n    stroke: ${theme.colors.text};\n  }\n\n  .axis text {\n    fill: ${theme.colors.text};\n    font-family: 'Bai Jamjuree', sans-serif;\n  }\n\n  @keyframes blink-from-none {\n    0% {\n      opacity: 0.4;\n    }\n\n    50% {\n      opacity: 0.8;\n    }\n\n    100% {\n      opacity: 0.4;\n    }\n  }\n\n  @keyframes blink-from-full {\n    0% {\n      opacity: 1;\n    }\n\n    50% {\n      opacity: 0.4;\n    }\n\n    100% {\n      opacity: 1;\n    }\n  }\n\n  button {\n    cursor: pointer;\n  }\n  @media (hover: hover) or (pointer: fine) {\n    button:hover {\n      opacity: .7;\n    }\n  }\n`;\n\nexport default GlobalStyle;\n","/* eslint-disable max-len */\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport { D3Component } from './components/D3Component';\nimport { useNetIncome, useTaxCalculation } from './utils/TaxCalculation';\nimport StoryIndicator from './components/StoryIndicator';\nimport ScrollBox from './components/ScrollBox';\nimport Slider from './components/Slider';\nimport ScrollInstruction from './components/ScrollInstruction';\n\nimport { taxBrackets } from './data/TaxBrackets';\nimport { theme } from './theme';\n\nimport Button from './components/Button';\nimport Step from './components/Step';\nimport CoverPage from './pages/CoverPage';\nimport EndingPage from './pages/EndingPage';\nimport PageNavigator from './components/PageNavigator';\nimport Pill from './components/Pill';\nimport GlobalStyle from './styles/globalStyles';\n\nconst ChartContainer = styled.div`\n  /* padding: 30px; */\n  width: 100%;\n  margin-top: 10px;\n  /* height: 50vh; */\n  flex: 1;\n  position: relative;\n  transition: all 0.2s;\n`;\n\nconst SideContainer = styled.div`\n  height: 220px;\n  /* overflow-y: auto; */\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n\n  @media (min-width: 480px) {\n    height: auto;\n    margin-left: 80px;\n    width: 40%;\n    min-width: 300px;\n    max-width: 400px;\n    justify-content: center;\n  }\n`;\n\nconst ContentContainer = styled.div`\n  /* height: 200px; */\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  flex-grow: 1;\n  position: relative;\n\n  transition: min-height 0.3s;\n\n  @media (min-width: 480px) {\n    min-height: ${(props) => (props.taller ? '490px' : '240px')};\n    flex-grow: 0;\n  }\n`;\n\nconst VisibleNonMobile = styled.span`\n  @media (min-width: 480px) {\n    display: none;\n  }\n`;\n\nconst PageContainer = styled.div`\n  padding: 30px;\n  /* padding-top: 15px; */\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  gap: 10px;\n  flex-direction: column;\n  overflow: hidden;\n\n  @media (min-width: 480px) {\n    flex-direction: row;\n    padding: 50px;\n  }\n`;\n\nconst ControlsContainer = styled.div`\n  /* margin-top: 30px; */\n  display: flex;\n  /* grid-template-columns: auto auto 80px; */\n  /* column-gap: 10px; */\n  /* row-gap: 15px; */\n  gap: 0.5rem;\n  flex-direction: column;\n  /* margin-bottom: 30px; */\n  align-content: center;\n\n  label {\n    white-space: nowrap;\n  }\n`;\n\nconst ControlsGrid = styled.div`\n  /* margin-top: 30px; */\n  display: grid;\n  grid-template-columns: auto auto 80px;\n  column-gap: 10px;\n  row-gap: 5px;\n  /* margin-bottom: 30px; */\n  align-content: center;\n\n  label {\n    white-space: nowrap;\n  }\n`;\n\nconst InputGroup = styled.div`\n  /* margin-bottom: 10px; */\n  display: flex;\n  flex-direction: column;\n`;\n\nconst TaxTableDisplay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ${theme.colors.bg};\n  transition: opacity 0.3s;\n  opacity: ${(props) => (props.show ? 1 : 0)};\n`;\n\nfunction NetIncomeEquation({\n  income, expense, allowance, highlight = {},\n}) {\n  const netIncome = useNetIncome(income, expense, allowance);\n  return (\n    <div style={{ display: 'flex', alignItems: 'center', marginTop: '20px' }}>\n      <div style={{ flexGrow: 1, textAlign: 'center' }}>\n        <small\n          style={{\n            color: highlight.income\n              ? theme.colors.incomeText\n              : theme.colors.textMuted,\n          }}\n        >\n          รายได้\n        </small>\n        <br />\n        <small\n          style={{\n            fontWeight: highlight.income ? 'bold' : 'normal',\n            color: highlight.income\n              ? theme.colors.text\n              : theme.colors.textMuted,\n          }}\n        >\n          {Math.round(income).toLocaleString()}\n        </small>\n      </div>\n      <div style={{ color: theme.colors.textMuted }}>−</div>\n      <div style={{ flexGrow: 1, textAlign: 'center' }}>\n        <small\n          style={{\n            color: highlight.expense\n              ? theme.colors.expenseText\n              : theme.colors.textMuted,\n          }}\n        >\n          ค่าใช้จ่าย\n        </small>\n        <br />\n        <small\n          style={{\n            fontWeight: highlight.expense ? 'bold' : 'normal',\n            color: highlight.expense\n              ? theme.colors.text\n              : theme.colors.textMuted,\n          }}\n        >\n          {Math.round(expense).toLocaleString()}\n        </small>\n      </div>\n      <div style={{ color: theme.colors.textMuted }}>−</div>\n      <div style={{ flexGrow: 1, textAlign: 'center' }}>\n        <small\n          style={{\n            color: highlight.allowance\n              ? theme.colors.allowanceText\n              : theme.colors.textMuted,\n          }}\n        >\n          ลดหย่อน\n        </small>\n        <br />\n        <small\n          style={{\n            fontWeight: highlight.allowance ? 'bold' : 'normal',\n            color: highlight.allowance\n              ? theme.colors.text\n              : theme.colors.textMuted,\n          }}\n        >\n          {Math.round(allowance).toLocaleString()}\n        </small>\n      </div>\n      <div style={{ color: theme.colors.textMuted }}>=</div>\n      <div style={{ flexGrow: 1, textAlign: 'center' }}>\n        <small\n          style={{\n            color: highlight.netIncome\n              ? theme.colors.incomeText\n              : theme.colors.textMuted,\n          }}\n        >\n          เงินได้สุทธิ\n        </small>\n        <br />\n        <small\n          style={{\n            fontWeight: highlight.netIncome ? 'bold' : 'normal',\n            color: highlight.netIncome\n              ? theme.colors.text\n              : theme.colors.textMuted,\n          }}\n        >\n          {Math.round(netIncome).toLocaleString()}\n        </small>\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  // income stated & computed numbers\n  const [salary, setSalary] = useState(300_000);\n  const [incomeFreelance, setIncomeFreelance] = useState(50_000);\n  const [incomeMerchant, setIncomeMerchant] = useState(50_000);\n  const [enableIncome, setEnableIncome] = useState(false);\n  const [enableIncomeExtra, setEnableIncomeExtra] = useState(false);\n  const salaryDisplay = useMemo(\n    () => (enableIncome ? salary : 0),\n    [enableIncome, salary],\n  );\n  const incomeFreelanceDisplay = useMemo(\n    () => (enableIncomeExtra ? incomeFreelance : 0),\n    [enableIncomeExtra, incomeFreelance],\n  );\n  const incomeMerchantDisplay = useMemo(\n    () => (enableIncomeExtra ? incomeMerchant : 0),\n    [enableIncomeExtra, incomeMerchant],\n  );\n  const income = useMemo(\n    () => (+salaryDisplay + +incomeFreelanceDisplay + +incomeMerchantDisplay),\n    [salaryDisplay, incomeMerchantDisplay, incomeFreelanceDisplay],\n  );\n\n  // expense stated & computed numbers\n  const [enableExpense, setEnableExpense] = useState(false);\n  /* eslint-disable-next-line camelcase */\n  const expense40_1_2 = useMemo(\n    () => (enableExpense ? Math.min((+salary + +incomeFreelance) * 0.5, 100_000) : 0),\n    [salary, incomeFreelance, enableExpense],\n  );\n  /* eslint-disable-next-line camelcase */\n  const expense40_8 = useMemo(\n    () => (enableExpense ? incomeMerchant * 0.6 : 0),\n    [incomeMerchant, enableExpense],\n  );\n  const expense = useMemo(\n    /* eslint-disable-next-line camelcase */\n    () => (enableExpense ? +expense40_1_2 + +expense40_8 : 0),\n    /* eslint-disable-next-line camelcase */\n    [expense40_1_2, expense40_8, enableExpense],\n  );\n\n  // allowance stated & computed numbers\n  const [enableAllowance, setEnableAllowance] = useState(false);\n  const [allowance, setAllowance] = useState(60_000);\n  const allowanceDisplay = useMemo(\n    () => (enableAllowance ? allowance : 0),\n    [allowance, enableAllowance],\n  );\n\n  const [isGroupIncome, setGroupIncome] = useState(false);\n\n  const netIncome = useNetIncome(income, expense, allowanceDisplay);\n  const taxFinal = useTaxCalculation(netIncome, taxBrackets);\n\n  const [enableTransition, setEnableTransition] = useState(true);\n  const [currentNarrativeStep, setCurrentNarrativeStep] = useState(-1);\n\n  // display parameters\n  const [isPullTax, setPullTax] = useState(false);\n  const [isActivateTax, setActivateTax] = useState(false);\n  const [showBrackets, setShowBrackets] = useState(false);\n  const [showBreakdown, setShowBreakdown] = useState(true);\n  const [showDragInstruction, setShowDragInstruction] = useState(true);\n  const [showFullScale, setShowFullScale] = useState(false);\n\n  // หลายคนอาจจะเคยเห็นตาราง \"อัตราภาษีเงินได้บุคคลธรรมดา\" หน้าตาแบบนี้ แต่ยังไม่เข้าใจว่ามันคำนวณยังไงกันแน่ เราจะมาทำตารางนี้ให้เห็นภาพกัน\n  // ถ้าเราเอาตารางอัตราภาษีมาพล็อตแบบนี้ ก็จะได้กราฟหน้าตาเป็น \"ขั้นบันได\" แบบนี้\n  // กติกาของ \"ภาษีเงินได้บุคคลธรรมดา\" ก็คือ ถ้า \"รายได้สุทธิ\" ของเราเข้าไปอยู่ในกล่องขั้นบันไดภาษีสีแดง ส่วนที่อยู่ในกล่องก็คือภาษีที่เราจะต้องจ่าย\n  // ซึ่ง \"รายได้สุทธิ\" ก็คือรายได้หลังหัก \"ค่าใช้จ่าย\" และ \"ค่าลดหย่อน\" แล้ว [สมการ]\n\n  const narrativeSteps = [\n    <>\n      <p style={{ textAlign: 'center' }}>\n        เราอาจจะเคยเห็นตาราง\n        <br />\n        <Pill color=\"taxText\">อัตราภาษีเงินได้บุคคลธรรมดา</Pill>\n        {' '}\n        หน้าตาแบบนี้\n        <br />\n        แต่ยังไม่เข้าใจว่ามันคำนวณยังไงกันแน่\n        <br />\n        เราจะมาทำตารางนี้ให้เห็นภาพกัน\n      </p>\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        ถ้าเราเอาตารางเมื่อกี้มาวาดกราฟ\n        <br />\n        ให้แกนตั้งเป็น\n        {' '}\n        <Pill color=\"incomeText\">เงินได้</Pill>\n        <br />\n        และแกนนอนเป็น\n        {' '}\n        <Pill color=\"taxText\">อัตราภาษี</Pill>\n        <br />\n        ก็จะได้กราฟแบบนี้\n      </p>\n      {/* <p style={{ textAlign: 'center' }}>\n        ไล่ตั้งแต่เงินได้สุทธิบาทแรก (ภาษี 0%)\n        {' '}\n        <br />\n        ไปถึงบาทที่ 5,000,000 ขึ้นไป (ภาษี 35%)\n      </p> */}\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        กติกาของ\n        {' '}\n        <Pill color=\"taxText\">ภาษีเงินได้บุคคลธรรมดา</Pill>\n        {' '}\n        ก็คือ\n        <br />\n        ถ้า\n        {' '}\n        <Pill color=\"incomeText\">เงินได้สุทธิ</Pill>\n        {' '}\n        ของเราสูงล้ำเข้าไปในกล่อง\n        <br />\n        ขั้นบันไดภาษีสีแดงนี้ ส่วนที่อยู่ในกล่อง\n        <br />\n        ก็คือภาษีที่เราจะต้องจ่ายนั่นเอง\n      </p>\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        ซึ่ง\n        <Pill color=\"incomeText\">เงินได้สุทธิ</Pill>\n        ก็คือรายได้ของเรา\n        <br />\n        หลังจากหัก\n        <Pill color=\"expenseText\">ค่าใช้จ่าย</Pill>\n        และ\n        <br />\n        <Pill color=\"allowanceText\">ค่าลดหย่อน</Pill>\n        แล้วนั่นเอง\n      </p>\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <div style={{ flexGrow: 1, textAlign: 'center' }}>\n          <Pill color=\"incomeText\">เงินได้สุทธิ</Pill>\n        </div>\n        <div>=</div>\n        <div style={{ flexGrow: 1, textAlign: 'center' }}>\n          <Pill color=\"incomeText\">รายได้</Pill>\n        </div>\n        <div>−</div>\n        <div style={{ flexGrow: 1, textAlign: 'center' }}>\n          <Pill color=\"expenseText\">ค่าใช้จ่าย</Pill>\n        </div>\n        <div>−</div>\n        <div style={{ flexGrow: 1, textAlign: 'center' }}>\n          <Pill color=\"allowanceText\">ค่าลดหย่อน</Pill>\n        </div>\n\n        {/* <div style={{ flexGrow: 1, flexBasis: 0, textAlign: \"center\" }}>\n          <small>ภาษี</small>\n          <br />\n          <b>{numberWithCommas(Math.ceil(taxFinal))} </b>\n        </div> */}\n      </div>\n    </>,\n\n    <>\n      <ControlsContainer>\n        <p style={{ textAlign: 'center' }}>\n          ทีนี้ สมมติว่าคุณทำงานได้เงินเดือนรวมทั้งปี\n          {' '}\n          <Pill color=\"incomeText\" bold>{salary.toLocaleString()}</Pill>\n          {' '}\n          บาท\n          {' '}\n          {/* <small>\n            (ประมาณ\n            {' '}\n            {Math.round(salary / 12).toLocaleString()}\n            {' '}\n            บาท/เดือน)\n          </small> */}\n        </p>\n        <div style={{ display: 'flex' }}>\n          <label\n            htmlFor=\"salaryinput\"\n            style={{ flexGrow: 1 }}\n          >\n            เงินเดือน (ทั้งปี รวมโบนัส)\n          </label>\n          <input\n            id=\"salaryinput\"\n            type=\"number\"\n            step={10_000}\n            min={0}\n            value={salary}\n            onChange={(e) => setSalary(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={salary}\n          onAfterChange={setSalary}\n          color={theme.colors.income}\n        />\n      </ControlsContainer>\n      {/* <small style={{ marginLeft: \"auto\", color: theme.colors.textMuted }}>\n        เงินเดือน &times; 12 = {numberWithCommas(income)} บาท/ปี\n      </small> */}\n      <NetIncomeEquation\n        income={income}\n        expense={expense}\n        allowance={allowanceDisplay}\n        highlight={{ income: true }}\n      />\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        และสมมติว่าคุณทำฟรีแลนซ์อีก\n        {' '}\n        <Pill color=\"incomeText\" bold>{incomeFreelance.toLocaleString()}</Pill>\n        {' '}\n        บาท กับขายของออนไลน์ได้มาอีก\n        {' '}\n        <Pill color=\"incomeText\" bold>{incomeMerchant.toLocaleString()}</Pill>\n        {' '}\n        บาท\n      </p>\n      <ControlsGrid style={{ gridTemplateColumns: '80px auto 80px' }}>\n        <label style={{ flexGrow: 1 }}>\n          <small>\n            ฟรีแลนซ์\n            {' '}\n            <span style={{ color: theme.colors.textMuted }}>/ ปี</span>\n          </small>\n        </label>\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={incomeFreelance}\n          onAfterChange={setIncomeFreelance}\n          color={theme.colors.income}\n        />\n        <div>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={incomeFreelance}\n            onChange={(e) => setIncomeFreelance(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n\n        <label style={{ flexGrow: 1 }}>\n          <small>\n            ขายของ\n            {' '}\n            <span style={{ color: theme.colors.textMuted }}>/ ปี</span>\n          </small>\n        </label>\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={incomeMerchant}\n          onAfterChange={setIncomeMerchant}\n          color={theme.colors.income}\n        />\n        <div>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={incomeMerchant}\n            onChange={(e) => setIncomeMerchant(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n      </ControlsGrid>\n      <NetIncomeEquation\n        income={income}\n        expense={expense}\n        allowance={allowanceDisplay}\n        highlight={{ income: true }}\n      />\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        พอคิด\n        <Pill color=\"incomeText\">เงินได้</Pill>\n        เสร็จแล้ว ก็นำมาหัก\n        <Pill color=\"expenseText\">ค่าใช้จ่าย</Pill>\n      </p>\n      <p style={{ textAlign: 'center' }}>\n        โดยที่\n        {' '}\n        <Pill color=\"incomeText\">เงินได้</Pill>\n        {' '}\n        แต่ละประเภท หัก\n        <Pill color=\"expenseText\">ค่าใช้จ่าย</Pill>\n        <br />\n        ได้ต่างกัน ซึ่งตามภาษาภาษีแล้ว...\n      </p>\n      <p\n        style={{\n          display: 'grid',\n          gridTemplateColumns: 'auto auto',\n          columnGap: '10px',\n          marginBottom: 0,\n        }}\n      >\n        <small style={{ textAlign: 'right' }}>เงินเดือน</small>\n        <small>นับเป็น &ldquo;เงินได้ประเภทที่ 1&rdquo;</small>\n        <small style={{ textAlign: 'right' }}>เงินจากฟรีแลนซ์</small>\n        <small>นับเป็น &ldquo;เงินได้ประเภทที่ 2&rdquo;</small>\n        <small style={{ textAlign: 'right' }}>เงินจากขายของ</small>\n        <small>นับเป็น &ldquo;เงินได้ประเภทที่ 8&rdquo;</small>\n      </p>\n      {/* <p style={{ textAlign: \"center\", color: theme.colors.textMuted }}>\n        *ตามประมวลรัษฎากร มาตรา 40\n      </p> */}\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        แล้วมีรายได้เท่านี้ จะหัก\n        <Pill color=\"expenseText\">ค่าใช้จ่าย</Pill>\n        ได้เท่าไหร่?\n      </p>\n      <div\n        style={{\n          display: 'grid',\n          gridTemplateColumns: 'auto auto',\n          alignItems: 'center',\n          columnGap: '10px',\n          rowGap: '10px',\n        }}\n      >\n        <span style={{ textAlign: 'right' }}>\n          <b>\n            เงินเดือน\n            {' '}\n            {incomeFreelance > 0 && '+ ฟรีแลนซ์'}\n          </b>\n          <br />\n          <small style={{ color: theme.colors.textSecondary }}>\n            หักได้ 50% ของรายได้\n            <br />\n            (รวมไม่เกิน 100,000 บาท)\n          </small>\n        </span>\n        <span>\n          →\n          {' '}\n          <Pill color=\"expenseText\" bold>{expense40_1_2.toLocaleString()}</Pill>\n          {' '}\n          บาท\n        </span>\n        {incomeMerchant > 0 && (\n          <>\n            <span style={{ textAlign: 'right' }}>\n              <b>ขายของ</b>\n              <br />\n              <small style={{ color: theme.colors.textSecondary }}>\n                หักได้ 60% หรือ\n                <br />\n                หัก &ldquo;ตามจริง&rdquo; ถ้ามีใบเสร็จ\n              </small>\n            </span>\n            <span>\n              →\n              {' '}\n              <Pill color=\"expenseText\" bold>{expense40_8.toLocaleString()}</Pill>\n              {' '}\n              บาท\n            </span>\n          </>\n        )}\n      </div>\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center', marginBottom: 0 }}>\n        ดังนั้นคุณจะหักค่าใช้จ่ายได้รวม\n        <br />\n        <b style={{ color: theme.colors.expenseText }}>\n          <Pill color=\"expenseText\" bold>{Math.round(expense).toLocaleString()}</Pill>\n        </b>\n        {' '}\n        บาท\n        {' '}\n        เหลือเป็นเงินได้หลัง\n        <br />\n        หักค่าใช้จ่าย\n        {' '}\n        <Pill color=\"incomeText\" bold>{netIncome.toLocaleString()}</Pill>\n        {' '}\n        บาท\n      </p>\n      <NetIncomeEquation\n        income={income}\n        expense={expense}\n        allowance={allowanceDisplay}\n        highlight={{ expense: true }}\n      />\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        และนอกจาก\n        <Pill color=\"expenseText\">ค่าใช้จ่าย</Pill>\n        แล้ว\n        <br />\n        ก็ยังสามารถหัก\n        <Pill color=\"allowanceText\">ค่าลดหย่อน</Pill>\n        ได้อีก\n      </p>\n      <p style={{ textAlign: 'center' }}>\n        ซึ่งทุกคนจะได้หัก\n        <br />\n        &ldquo;ค่าลดหย่อนส่วนตัว&rdquo; ทันที\n        {' '}\n        <Pill color=\"allowanceText\" bold>60,000</Pill>\n        {' '}\n        บาท!\n      </p>\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        นอกจากนั้น ก็ยัง\n        <Pill color=\"allowanceText\">ลดหย่อน</Pill>\n        จากอย่างอื่นได้อีก\n        <br />\n        เช่น การบริจาคเงิน ค่าเบี้ยประกันต่างๆ ฯลฯ\n        {/* <br />\n        สมมติคุณไม่มีค่าลดหย่อนเพิ่มเติมเลย */}\n      </p>\n      <ControlsContainer>\n        <div style={{ display: 'flex' }}>\n          <label style={{ flexGrow: 1 }}>ค่าลดหย่อน</label>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={allowance}\n            onChange={(e) => setAllowance(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n        <Slider\n          min={60_000}\n          max={income - expense}\n          step={10_000}\n          value={allowance}\n          onAfterChange={setAllowance}\n          color={theme.colors.allowance}\n        />\n      </ControlsContainer>\n      {/* <small style={{ marginLeft: 'auto', color: theme.colors.textMuted }}>\n        ลดหย่อนส่วนตัวได้ 60,000 บาท\n      </small> */}\n      <NetIncomeEquation\n        income={income}\n        expense={expense}\n        allowance={allowanceDisplay}\n        highlight={{ allowance: true }}\n      />\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center', marginBottom: 0 }}>\n        ดังนั้น เมื่อคิดจาก\n        <br />\n        <Pill color=\"incomeText\">รายได้</Pill>\n        {' '}\n        <Pill color=\"expenseText\">ค่าใช้จ่าย</Pill>\n        {' '}\n        และ\n        <Pill color=\"allowanceText\">ค่าลดหย่อน</Pill>\n        ของคุณ\n        <br />\n        เงินได้สุทธิของคุณก็คือ\n        {' '}\n        <Pill color=\"incomeText\" bold>\n          {Math.round(netIncome).toLocaleString()}\n        </Pill>\n        {' '}\n        บาท\n      </p>\n      <NetIncomeEquation\n        income={income}\n        expense={expense}\n        allowance={allowanceDisplay}\n        highlight={{\n          income: true,\n          expense: true,\n          allowance: true,\n          netIncome: true,\n        }}\n      />\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        เมื่อคำนวณ\n        <Pill color=\"incomeText\">&rdquo;เงินได้สุทธิ&ldquo;</Pill>\n        ได้แล้ว\n        <br />\n        ก็กลับมาดูว่าเงินได้สุทธิของคุณล้ำเข้าไป\n        <br />\n        ในกล่อง\n        <Pill color=\"taxText\">ขั้นบันไดภาษี</Pill>\n        ทางซ้ายแค่ไหน\n      </p>\n      <p style={{ textAlign: 'center' }}>\n        ส่วนที่ล้ำเข้าไปก็คือภาษีที่จะต้องจ่าย\n      </p>\n    </>,\n\n    <>\n      <p style={{ textAlign: 'center' }}>\n        ดังนั้น ภาษีเงินได้บุคคลธรรมดา\n        <br />\n        ที่คุณจะต้องเสียคือ\n        {' '}\n        <Pill color=\"taxText\" bold>\n          {Math.ceil(taxFinal).toLocaleString()}\n        </Pill>\n        {' '}\n        บาท\n        <br />\n        หรือประมาณ\n        {' '}\n        <Pill color=\"taxText\" bold>\n          {((taxFinal / income) * 100).toFixed(1)}\n          %\n        </Pill>\n        {' '}\n        ของเงินได้ทั้งปี\n      </p>\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.incomeText }}>รายได้</small>\n          <br />\n          <b>\n            {income.toLocaleString()}\n          </b>\n        </div>\n        <div style={{ color: theme.colors.textMuted }}>→</div>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.incomeText }}>เงินได้สุทธิ</small>\n          <br />\n          <b>\n            {netIncome?.toLocaleString()}\n          </b>\n        </div>\n        <div style={{ color: theme.colors.textMuted }}>→</div>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.taxText }}>ภาษี</small>\n          <br />\n          <b>\n            {Math.ceil(taxFinal).toLocaleString()}\n            {' '}\n          </b>\n        </div>\n      </div>\n    </>,\n\n    <ScrollBox\n      // style={{ height: '500px' }}\n      onScroll={() => {\n        setShowDragInstruction(false);\n      }}\n    >\n      <ScrollInstruction visible={showDragInstruction} />\n      <p style={{ textAlign: 'center' }}>\n        ลองปรับตัวเลขคร่าวๆ ให้ตรงกับตัวคุณ\n        <VisibleNonMobile>\n          <br />\n          (เลื่อนขึ้นเพื่อดูช่องอื่นๆ)\n        </VisibleNonMobile>\n        <br />\n        <small style={{ color: theme.colors.textSecondary }}>* เว็บไซต์นี้ไม่มีการเก็บข้อมูลตัวเลขที่คุณกรอก</small>\n      </p>\n      <div\n        style={{\n          margin: '1rem  0 0.5rem',\n          fontWeight: 'bold',\n          color: theme.colors.incomeText,\n          display: 'flex',\n        }}\n      >\n        <div style={{ flexGrow: 1 }}>รายได้</div>\n        <div>\n          {income.toLocaleString()}\n          {' '}\n          บาท\n        </div>\n      </div>\n      <ControlsGrid style={{ gridTemplateColumns: '80px auto 80px' }}>\n        <label style={{ flexGrow: 1 }}>\n          <small>เงินเดือน</small>\n        </label>\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={salary}\n          onAfterChange={setSalary}\n          color={theme.colors.income}\n        />\n        <div>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={salary}\n            onChange={(e) => setSalary(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n\n        <label style={{ flexGrow: 1 }}>\n          <small>ฟรีแลนซ์</small>\n        </label>\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={incomeFreelance}\n          onAfterChange={setIncomeFreelance}\n          color={theme.colors.income}\n        />\n        <div>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={incomeFreelance}\n            onChange={(e) => setIncomeFreelance(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n\n        <label style={{ flexGrow: 1 }}>\n          <small>ขายของ</small>\n        </label>\n        <Slider\n          min={0}\n          max={1_200_000}\n          step={10_000}\n          value={incomeMerchant}\n          onAfterChange={setIncomeMerchant}\n          color={theme.colors.income}\n        />\n        <div>\n          <input\n            type=\"number\"\n            step={10000}\n            min={0}\n            value={incomeMerchant}\n            onChange={(e) => setIncomeMerchant(e.target.value)}\n            style={{ width: '80px' }}\n          />\n        </div>\n        {/* <small\n          style={{\n            display: \"block\",\n            gridColumn: \"1 / -1\",\n            textAlign: \"right\",\n            marginLeft: \"auto\",\n            color: theme.colors.textMuted,\n            marginTop: \"-10px\",\n          }}\n        >\n          เงินเดือน &times; 12 = รายได้ <b>{numberWithCommas(income)}</b> บาท/ปี\n        </small> */}\n      </ControlsGrid>\n\n      <div\n        style={{\n          margin: '1rem 0 0.5rem',\n          fontWeight: 'bold',\n          color: theme.colors.expenseText,\n          display: 'flex',\n        }}\n      >\n        <div style={{ flexGrow: 1 }}>ค่าใช้จ่าย</div>\n        <div>\n          {expense.toLocaleString()}\n          {' '}\n          บาท\n        </div>\n      </div>\n      <ControlsGrid>\n        <label style={{ flexGrow: 1 }}>\n          <small>คิดจากเงินเดือน + ฟรีแลนซ์</small>\n          <br />\n          <small style={{ color: theme.colors.textSecondary }}>(หักได้ 50% ไม่เกิน 100,000 บาท)</small>\n        </label>\n        <div style={{ gridColumn: '2 / -1', textAlign: 'right' }}>\n          <small>\n            หักได้\n            {' '}\n            {Math.round(expense40_1_2).toLocaleString()}\n            {' '}\n            บาท\n          </small>\n        </div>\n\n        <label style={{ flexGrow: 1 }}>\n          <small>คิดจากขายของ</small>\n          <br />\n          <small style={{ color: theme.colors.textSecondary }}>(หักได้ 60% หรือตามจริง)</small>\n        </label>\n        <div style={{ gridColumn: '2 / -1', textAlign: 'right' }}>\n          <small>\n            หักได้\n            {' '}\n            {Math.round(expense40_8).toLocaleString()}\n            {' '}\n            บาท\n          </small>\n        </div>\n      </ControlsGrid>\n      <div\n        style={{\n          margin: '1rem  0 0.5rem',\n          fontWeight: 'bold',\n          color: theme.colors.allowanceText,\n          display: 'flex',\n        }}\n      >\n        <div style={{ flexGrow: 1 }}>ค่าลดหย่อน</div>\n        <div>\n          {allowance.toLocaleString()}\n          {' '}\n          บาท\n        </div>\n      </div>\n      <ControlsGrid style={{ gridTemplateColumns: '80px auto 80px' }}>\n        <label style={{ flexGrow: 1 }}>\n          <small>ค่าลดหย่อน</small>\n        </label>\n        <Slider\n          min={60_000}\n          max={income - expense}\n          step={10_000}\n          value={allowance}\n          onAfterChange={setAllowance}\n          color={theme.colors.allowance}\n        />\n        <input\n          type=\"number\"\n          step={10000}\n          min={0}\n          value={allowance}\n          onChange={(e) => setAllowance(e.target.value)}\n          style={{ width: '80px' }}\n        />\n      </ControlsGrid>\n      <hr style={{ margin: '1rem 0', opacity: 0.2 }} />\n      <div style={{ display: 'flex', alignItems: 'center', marginTop: '10px' }}>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.incomeText }}>รายได้</small>\n          <br />\n          <span style={{ color: theme.colors.text }}>\n            {income.toLocaleString()}\n          </span>\n        </div>\n        <div>→</div>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.incomeText }}>เงินได้สุทธิ</small>\n          <br />\n          <span style={{ color: theme.colors.text }}>\n            {Math.round(netIncome).toLocaleString()}\n          </span>\n        </div>\n        <div>→</div>\n        <div style={{ flexGrow: 1, flexBasis: 0, textAlign: 'center' }}>\n          <small style={{ color: theme.colors.taxText }}>ภาษี</small>\n          <br />\n          <b>\n            {Math.ceil(taxFinal).toLocaleString()}\n          </b>\n        </div>\n      </div>\n      <p style={{ textAlign: 'center', marginTop: 8 }}>\n        ภาษีที่ต้องเสีย คิดเป็น\n        {' '}\n        <b>\n          {((taxFinal / income) * 100).toFixed(1)}\n          %\n        </b>\n        {' '}\n        ของเงินได้ทั้งหมด\n      </p>\n    </ScrollBox>,\n    // </div>,\n  ];\n\n  useEffect(() => {\n    setEnableIncome(currentNarrativeStep >= 4);\n    setEnableIncomeExtra(currentNarrativeStep >= 5);\n    setEnableExpense(currentNarrativeStep >= 7);\n    setGroupIncome(currentNarrativeStep >= 8);\n    setShowBreakdown(!(currentNarrativeStep >= 9));\n    setTimeout(() => setEnableAllowance(currentNarrativeStep >= 9), 800);\n    setShowBrackets(currentNarrativeStep >= 12 || currentNarrativeStep <= 3);\n    setActivateTax(currentNarrativeStep >= 13 || currentNarrativeStep === 2 || currentNarrativeStep === 3);\n    setTimeout(() => setShowFullScale(currentNarrativeStep >= 1 && currentNarrativeStep <= 3), 800);\n  }, [currentNarrativeStep, enableAllowance, income, expense]);\n\n  return (\n    <>\n      <GlobalStyle />\n      <StoryIndicator\n        currentStep={currentNarrativeStep}\n        totalSteps={narrativeSteps.length + 1}\n        style={{ marginBottom: '20px' }}\n      />\n      <PageContainer>\n        <CoverPage\n          currentNarrativeStep={currentNarrativeStep}\n          setCurrentNarrativeStep={setCurrentNarrativeStep}\n        />\n        <EndingPage\n          currentNarrativeStep={currentNarrativeStep}\n          setCurrentNarrativeStep={setCurrentNarrativeStep}\n          narrativeStepsCount={narrativeSteps.length}\n          tax={taxFinal}\n          income={income}\n        />\n\n        <ChartContainer>\n          <D3Component\n            incomeGroups={[\n              {\n                label: `เงินเดือน${incomeFreelanceDisplay > 0 ? ' + ฟรีแลนซ์' : ''\n                }`,\n                income: +salaryDisplay + +incomeFreelanceDisplay,\n                expense: expense40_1_2,\n              },\n              {\n                label: 'ขายของ',\n                income: incomeMerchantDisplay,\n                expense: expense40_8,\n              },\n            ]}\n            isGroupIncome={isGroupIncome}\n            showBreakdown={showBreakdown}\n            income={income}\n            expense={expense}\n            allowance={allowanceDisplay}\n            isPullTax={isPullTax}\n            setPullTax={setPullTax}\n            enableTransition={enableTransition}\n            isActivateTax={isActivateTax}\n            showBrackets={showBrackets}\n            isBlink={{\n              tax: currentNarrativeStep === 13 || currentNarrativeStep === 2 || currentNarrativeStep === 3,\n              income: currentNarrativeStep === 11,\n              // expense: currentNarrativeStep == 5,\n              // allowance: currentNarrativeStep == 6,\n            }}\n            forceBlinkTax={currentNarrativeStep === 2 || currentNarrativeStep === 3}\n            isFocusIncome={currentNarrativeStep >= 11}\n            showFullScale={showFullScale}\n            showScaleReference={currentNarrativeStep >= 4}\n            // slowTransition={currentNarrativeStep <= 4}\n          />\n          <TaxTableDisplay show={currentNarrativeStep <= 0}>\n            <img\n              src={`${process.env.PUBLIC_URL}/table.png`}\n              alt=\"ตารางอัตราภาษีเงินได้บุคคลธรรมดา\"\n              style={{\n                width: '100%',\n                maxWidth: 500,\n              }}\n            />\n          </TaxTableDisplay>\n        </ChartContainer>\n        <SideContainer>\n          <ContentContainer taller={currentNarrativeStep === 14}>\n            {narrativeSteps.map((step, i) => (\n              <>\n                <Step status={Math.sign(i - currentNarrativeStep)}>\n                  {step}\n                </Step>\n              </>\n            ))}\n          </ContentContainer>\n          <PageNavigator\n            currentStep={currentNarrativeStep}\n            setCurrentStep={setCurrentNarrativeStep}\n            stepCount={narrativeSteps.length}\n          />\n        </SideContainer>\n      </PageContainer>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  /* eslint-disable-next-line no-undef */\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}